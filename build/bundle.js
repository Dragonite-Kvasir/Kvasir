/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e,t,n={679:(e,t,n)=>{var r=n(296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var a=u(t),m=u(n),g=0;g<o.length;++g){var y=o[g];if(!(s[y]||r&&r[y]||m&&m[y]||a&&a[y])){var v=d(n,y);try{l(t,y,v)}catch(e){}}}}return t}},103:(e,t)=>{var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case u:return e;default:return t}}case i:return t}}}function S(e){return E(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||E(e)===c},t.isConcurrentMode=S,t.isContextConsumer=function(e){return E(e)===l},t.isContextProvider=function(e){return E(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return E(e)===d},t.isFragment=function(e){return E(e)===s},t.isLazy=function(e){return E(e)===g},t.isMemo=function(e){return E(e)===m},t.isPortal=function(e){return E(e)===i},t.isProfiler=function(e){return E(e)===a},t.isStrictMode=function(e){return E(e)===o},t.isSuspense=function(e){return E(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=E},296:(e,t,n)=>{e.exports=n(103)},448:(e,t,n)=>{var r=n(294),i=n(840);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function U(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return U(e.type,!1);case 11:return U(e.type.render,!1);case 1:return U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case _:return"Profiler";case k:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(e){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){X(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,ke=null;function _e(e){if(e=wi(e)){if("function"!=typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=Ei(t),Se(e.stateNode,e.type,t))}}function Te(e){Ie?ke?ke.push(e):ke=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=ke;if(ke=Ie=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function xe(e,t){return e(t)}function De(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ie||null!==ke)&&(De(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Pe=!1}function Re(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var Me=!1,Fe=null,Ve=!1,je=null,Ue={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,u){Me=!1,Fe=null,Re.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function $e(e){if(ze(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null,ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/ut|0)|0},at=Math.log,ut=Math.LN2,lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!=(s&=o)&&(r=ht(s))}else 0!=(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0==(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Et,St,It,kt,_t,Tt=!1,Ct=[],xt=null,Dt=null,Nt=null,At=new Map,Ot=new Map,Pt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=wi(t))&&St(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void _t(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Vt(e)&&n.delete(t)}function Ut(){Tt=!1,null!==xt&&Vt(xt)&&(xt=null),null!==Dt&&Vt(Dt)&&(Dt=null),null!==Nt&&Vt(Nt)&&(Nt=null),At.forEach(jt),Ot.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Bt(xt,e),null!==Dt&&Bt(Dt,e),null!==Nt&&Bt(Nt,e),At.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,$t=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if($t){var i=Qt(e,t,n,r);if(null===i)$r(e,t,r,Wt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Dt=Mt(Dt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&Et(s),null===(s=Qt(e,t,n,r))&&$r(e,t,r,Wt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Wt=null;function Qt(e,t,n,r){if(Wt=null,null!==(e=vi(e=Ee(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,an=e.screenY-un.screenY):an=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},ln,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function _n(){return kn}var Tn=F({},hn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Nn=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(An),Pn=[9,13,27,32],Ln=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Rn,Fn=c&&(!Ln||Rn&&8<Rn&&11>=Rn),Vn=String.fromCharCode(32),jn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Wn(e){Vr(e,0)}function Qn(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(Hn)){var t=[];Kn(t,Hn,e,Ee(e)),Ae(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Hn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ur(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==W(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Ir={},kr={};function _r(e){if(Ir[e])return Ir[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Ir[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=_r("animationend"),Cr=_r("animationiteration"),xr=_r("animationstart"),Dr=_r("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),u(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Lr=Ar[Pr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(xr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Dr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,u,l){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Fe;Me=!1,Fe=null,Ve||(Ve=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=u}else for(o=0;o<r.length;o++){if(u=(a=r[o]).instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=u}}}if(Ve)throw e=je,Ve=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(u=o.tag)||6===u){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=Ee(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dn;break;case Tr:case Cr:case xr:u=yn;break;case Dr:u=Nn;break;case"scroll":u=dn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=xn}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Oe(p,d))&&c.push(Kr(p,m,f))),h)break;p=p.return}0<c.length&&(a=new u(a,l,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[pi])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?a:bi(u),f=null==l?a:bi(l),(a=new c(m,p+"leave",u,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=f,c.relatedTarget=h,m=c),h=m,u&&l)e:{for(d=l,p=0,f=c=u;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)c=Hr(c),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Hr(c),d=Hr(d)}c=null}else c=null;null!==u&&Wr(o,a,u,c,!1),null!==l&&null!==h&&Wr(o,h,l,c,!0)}if("select"===(u=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var g=Yn;else if($n(a))if(Xn)g=or;else{g=ir;var y=rr}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(y=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),(v||null!==(v=Bn(n)))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Vn);case"textInput":return(e=t.data)===Vn&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Ln&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}Vr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(u=Oe(n,s))&&o.unshift(Kr(n,u,a)):i||null!=(u=Oe(n,s))&&o.push(Kr(n,u,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ei(e){return e[fi]||null}var Si=[],Ii=-1;function ki(e){return{current:e}}function _i(e){0>Ii||(e.current=Si[Ii],Si[Ii]=null,Ii--)}function Ti(e,t){Ii++,Si[Ii]=e.current,e.current=t}var Ci={},xi=ki(Ci),Di=ki(!1),Ni=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!=e.childContextTypes}function Pi(){_i(Di),_i(xi)}function Li(e,t,n){if(xi.current!==Ci)throw Error(s(168));Ti(xi,t),Ti(Di,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=xi.current,Ti(xi,e),Ti(Di,Di.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ri(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,_i(Di),_i(xi),Ti(xi,e)):_i(Di),Ti(Di,n)}var Vi=null,ji=!1,Ui=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Ui&&null!==Vi){Ui=!0;var e=0,t=wt;try{var n=Vi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,ji=!1}catch(t){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,zi),t}finally{wt=t,Ui=!1}}return null}var qi=[],$i=0,Ki=null,Gi=0,Hi=[],Wi=0,Qi=null,Yi=1,Xi="";function Ji(e,t){qi[$i++]=Gi,qi[$i++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Wi++]=Yi,Hi[Wi++]=Xi,Hi[Wi++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--$i],qi[$i]=null,Gi=qi[--$i],qi[$i]=null;for(;e===Qi;)Qi=Hi[--Wi],Hi[Wi]=null,Xi=Hi[--Wi],Hi[Wi]=null,Yi=Hi[--Wi],Hi[Wi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function us(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(us(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(us(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=ki(null),vs=null,ws=null,bs=null;function Es(){bs=ws=vs=null}function Ss(e){var t=ys.current;_i(ys),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ba=!0),e.firstContext=null)}function _s(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Ts=null;function Cs(e){null===Ts?Ts=[e]:Ts.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function As(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ps(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ls(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&xu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Rs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var u=a,l=u.next;u.next=null,null===o?s=l:o.next=l,o=u;var c=e.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u)}if(null!==s){var h=i.baseState;for(o=0,c=l=u=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Us(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),s=Ps(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Ls(e,s,i))&&(nl(t,e,i,r),Rs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),s=Ps(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Ls(e,s,i))&&(nl(t,e,i,r),Rs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Ps(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ls(e,i,r))&&(nl(t,e,r,n),Rs(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&ur(n,r)&&ur(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"==typeof s&&null!==s?s=_s(s):(i=Oi(t)?Ni:xi.current,s=(r=null!=(r=t.contextTypes))?Ai(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function $s(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,As(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=_s(s):(s=Oi(t)?Ni:xi.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Us(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ws(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===O&&Ws(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Rl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case S:return(t=Vl(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rl(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?l(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,u){for(var l=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?l=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),is&&Ji(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],u))&&(s=o(h,s,m),null===c?l=h:c.sibling=h,c=h);return is&&Ji(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?l=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,m),l}function g(i,a,u,l){var c=R(u);if("function"!=typeof c)throw Error(s(150));if(null==(u=c.call(u)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Ji(i,g),c;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return is&&Ji(i,g),c}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),c}return function e(r,s,o,u){if("object"==typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case E:e:{for(var l=o.key,c=s;null!==c;){if(c.key===l){if((l=o.type)===I){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===O&&Ws(l)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Gs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===I?((s=Rl(o.props.children,r.mode,u,o.key)).return=r,r=s):((u=Ll(o.type,o.key,o.props,null,r.mode,u)).ref=Gs(r,s,o),u.return=r,r=u)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vl(o,r.mode,u)).return=r,r=s}return a(r);case O:return e(r,s,(c=o._init)(o._payload),u)}if(te(o))return m(r,s,o,u);if(R(o))return g(r,s,o,u);Hs(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fl(o,r.mode,u)).return=r,r=s),a(r)):n(r,s)}}var Ys=Qs(!0),Xs=Qs(!1),Js={},Zs=ki(Js),eo=ki(Js),to=ki(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Zs),Ti(Zs,t)}function io(){_i(Zs),_i(eo),_i(to)}function so(e){no(to.current);var t=no(Zs.current),n=ue(t,e.type);t!==n&&(Ti(eo,e),Ti(Zs,n))}function oo(e){eo.current===e&&(_i(Zs),_i(eo))}var ao=ki(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,Eo=0;function So(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ua,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function _o(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"==typeof t?t(e):t}function Do(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=a=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,a=r):l=l.next=d,mo.lanes|=h,Mu|=h}c=c.next}while(null!==c&&c!==o);null===l?a=r:l.next=u,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Oo(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,$o(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Lo.bind(null,n,r,i,t),void 0,null),null===Du)throw Error(s(349));0!=(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Ro(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(e){return!0}}function Fo(e){var t=Ds(e,1);null!==t&&nl(t,e,1,-1)}function Vo(e){var t=To();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return Co().memoizedState}function Bo(e,t,n,r){var i=To();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function $o(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!=n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=tl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e)?ia(t,n):null!==(n=xs(e,t,n,r))&&(nl(n,e,r,el()),sa(n,t,r))}function na(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var u=t.interleaved;return null===u?(i.next=i,Cs(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=xs(e,t,i,r))&&(nl(n,e,r,i=el()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:_s,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:_s,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:_s,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Qo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Du)throw Error(s(349));0!=(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Du.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Eo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ua={readContext:_s,useCallback:Yo,useContext:_s,useEffect:$o,useImperativeHandle:Wo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:Do,useRef:Uo,useState:function(){return Do(xo)},useDebugValue:Qo,useDeferredValue:function(e){return Jo(Co(),go.memoizedState,e)},useTransition:function(){return[Do(xo)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1},la={readContext:_s,useCallback:Yo,useContext:_s,useEffect:$o,useImperativeHandle:Wo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:No,useRef:Uo,useState:function(){return No(xo)},useDebugValue:Qo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var fa="function"==typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ps(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,Ku=r),da(0,t)},n}function ma(e,t,n){(n=Ps(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!=typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_l.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ps(-1,1)).tag=2,Ls(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function Ea(e,t,n,r){t.child=null===e?Xs(t,null,n,r):Ys(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return ks(t,i),r=ko(e,t,n,r,s,i),n=_o(),null===e||ba?(is&&n&&es(t),t.flags|=1,Ea(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Ol(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ka(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return $a(e,t,i)}return t.flags|=1,(e=Pl(s,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,$a(e,t,i);0!=(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function _a(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Pu,Ou),Ou|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Pu,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Pu,Ou),Ou|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Pu,Ou),Ou|=r;return Ea(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Oi(n)?Ni:xi.current;return s=Ai(t,s),ks(t,i),n=ko(e,t,n,r,s,i),r=_o(),null===e||ba?(is&&r&&es(t),t.flags|=1,Ea(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function xa(e,t,n,r,i){if(Oi(n)){var s=!0;Mi(t)}else s=!1;if(ks(t,i),null===t.stateNode)qa(e,t),qs(t,n,r),Ks(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;l="object"==typeof l&&null!==l?_s(l):Ai(t,l=Oi(n)?Ni:xi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||u!==l)&&$s(t,o,r,l),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Di.current||Ns?("function"==typeof c&&(Us(t,n,c,r),u=t.memoizedState),(a=Ns||zs(t,n,a,r,d,u,l))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,u="object"==typeof(u=n.contextType)&&null!==u?_s(u):Ai(t,u=Oi(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==u)&&$s(t,o,r,u),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Di.current||Ns?("function"==typeof f&&(Us(t,n,f,r),p=t.memoizedState),(l=Ns||zs(t,n,l,r,d,p,u)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Da(e,t,n,r,s,i)}function Da(e,t,n,r,i,s){Ta(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),$a(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):Ea(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ro(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,Ea(e,t,n,r),t.child}var Oa,Pa,La,Ra={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,u=0!=(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,a?(i=t.mode,a=t.child,u={mode:"hidden",children:u},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=u):a=Ml(u,i,0,null),e=Rl(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Ra,e):Va(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(o=Rl(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Ra,o);if(0==(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,ja(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(u=0!=(a&e.childLanes),ba||u){if(null!==(r=Du)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),nl(r,e,i,-1))}return ml(),ja(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Wi++]=Yi,Hi[Wi++]=Xi,Hi[Wi++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),(t=Va(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(a){a=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Pl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Pl(r,a):(a=Rl(a,u,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=null===(u=e.child.memoizedState)?Ma(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Pl(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ea(e,t,r.children,n),0!=(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $a(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ha(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Ga(t),null;case 3:return r=t.stateNode,io(),_i(Di),_i(xi),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ss&&(ol(ss),ss=null))),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!=(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)jr(Rr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ve(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"==typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t),t.stateNode=e;e:{switch(u=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)jr(Rr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"==typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&w(e,o,c,u))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(_i(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!=(1&t.mode)&&0==(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ol(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ao.current)?0===Lu&&(Lu=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Ga(t),null;case 10:return Ss(t.type._context),Ga(t),null;case 19:if(_i(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!=(128&t.flags),null===(u=o.rendering))if(r)Ka(o,!1);else{if(0!==Lu||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zu&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!is)return Ga(t),null}else 2*Xe()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Ou)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Wa(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),_i(Di),_i(xi),co(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(_i(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&jr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Xa="function"==typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){kl(e,t,n)}else n.current=null}function eu(e,t,n){try{n()}catch(n){kl(e,t,n)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&eu(t,n,s)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function su(e){var t=e.alternate;null!==t&&(e.alternate=null,su(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function au(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=cu,i=hu;cu=null,du(e,t,n),hu=i,null!==(cu=r)&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,du(e,t,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ya&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!=(2&s)||0!=(4&s))&&eu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){kl(n,t,e)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,du(e,t,n),Ya=r):du(e,t,n);break;default:du(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,u=a;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===cu)throw Error(s(160));fu(o,a,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(e){kl(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(t){kl(e,e.return,t)}try{nu(5,e,e.return)}catch(t){kl(e,e.return,t)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){kl(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),we(u,a);var c=we(u,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,c)}switch(u){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(t){kl(e,e.return,t)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){kl(e,e.return,t)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(t){kl(e,e.return,t)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Xe())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||h,mu(t,e),Ya=c):mu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!=(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){kl(r,n,e)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){Eu(d);continue}}null!==p?(p.return=f,Ja=p):Eu(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",a))}catch(t){kl(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(t){kl(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(t,e),yu(e),4&r&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lu(e,au(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,au(e),o);break;default:throw Error(s(161))}}catch(t){kl(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Ja=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!=(1&e.mode);null!==Ja;){var i=Ja,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,u=null!==a&&null!==a.memoizedState||Ya;a=Qa;var l=Ya;if(Qa=o,(Ya=u)&&!l)for(Ja=i;null!==Ja;)u=(o=Ja).child,22===o.tag&&null!==o.memoizedState?Su(i):null!==u?(u.return=o,Ja=u):Su(i);for(;null!==s;)Ja=s,wu(s,t,n),s=s.sibling;Ja=i,Qa=a,Ya=l}bu(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ja=s):bu(e)}}function bu(e){for(;null!==Ja;){var t=Ja;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&iu(t)}catch(e){kl(t,t.return,e)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function Eu(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function Su(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(e){kl(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){kl(t,i,e)}}var s=t.return;try{iu(t)}catch(e){kl(t,s,e)}break;case 5:var o=t.return;try{iu(t)}catch(e){kl(t,o,e)}}}catch(e){kl(t,t.return,e)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Iu,ku=Math.ceil,_u=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Cu=b.ReactCurrentBatchConfig,xu=0,Du=null,Nu=null,Au=0,Ou=0,Pu=ki(0),Lu=0,Ru=null,Mu=0,Fu=0,Vu=0,ju=null,Uu=null,Bu=0,zu=1/0,qu=null,$u=!1,Ku=null,Gu=null,Hu=!1,Wu=null,Qu=0,Yu=0,Xu=null,Ju=-1,Zu=0;function el(){return 0!=(6&xu)?Xe():-1!==Ju?Ju:Ju=Xe()}function tl(e){return 0==(1&e.mode)?1:0!=(2&xu)&&0!==Au?Au&-Au:null!==ms.transition?(0===Zu&&(Zu=mt()),Zu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nl(e,t,n,r){if(50<Yu)throw Yu=0,Xu=null,Error(s(185));yt(e,n,r),0!=(2&xu)&&e===Du||(e===Du&&(0==(2&xu)&&(Fu|=n),4===Lu&&al(e,Au)),rl(e,r),1===n&&0===xu&&0==(1&t.mode)&&(zu=Xe()+500,ji&&zi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,u=i[o];-1===u?0!=(a&n)&&0==(a&r)||(i[o]=ft(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Du?Au:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(ul.bind(null,e)):Bi(ul.bind(null,e)),oi((function(){0==(6&xu)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Ju=-1,Zu=0,0!=(6&xu))throw Error(s(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=dt(e,e===Du?Au:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=xu;xu|=2;var o=pl();for(Du===e&&Au===t||(qu=null,zu=Xe()+500,dl(e,t));;)try{vl();break}catch(t){fl(e,t)}Es(),_u.current=o,xu=i,null!==Nu?t=0:(Du=null,Au=0,t=Lu)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=sl(e,i)),1===t)throw n=Ru,dl(e,0),al(e,r),rl(e,Xe()),n;if(6===t)al(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&0!==(o=pt(e))&&(r=o,t=sl(e,o)),1===t))throw n=Ru,dl(e,0),al(e,r),rl(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:El(e,Uu,qu);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=Bu+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,Uu,qu),t);break}El(e,Uu,qu);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,Uu,qu),r);break}El(e,Uu,qu);break;default:throw Error(s(329))}}}return rl(e,Xe()),e.callbackNode===n?il.bind(null,e):null}function sl(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Uu,Uu=n,null!==t&&ol(t)),e}function ol(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function al(e,t){for(t&=~Vu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!=(6&xu))throw Error(s(327));Sl();var t=dt(e,0);if(0==(1&t))return rl(e,Xe()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sl(e,r))}if(1===n)throw n=Ru,dl(e,0),al(e,t),rl(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,Uu,qu),rl(e,Xe()),null}function ll(e,t){var n=xu;xu|=1;try{return e(t)}finally{0===(xu=n)&&(zu=Xe()+500,ji&&zi())}}function cl(e){null!==Wu&&0===Wu.tag&&0==(6&xu)&&Sl();var t=xu;xu|=1;var n=Cu.transition,r=wt;try{if(Cu.transition=null,wt=1,e)return e()}finally{wt=r,Cu.transition=n,0==(6&(xu=t))&&zi()}}function hl(){Ou=Pu.current,_i(Pu)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Pi();break;case 3:io(),_i(Di),_i(xi),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:_i(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Du=e,Nu=e=Pl(e.current,null),Au=Ou=t,Lu=0,Ru=null,Vu=Fu=Mu=0,Uu=ju=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function fl(e,t){for(;;){var n=Nu;try{if(Es(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,Tu.current=null,null===n||null===n.return){Lu=1,Ru=t,Nu=null;break}e:{var o=e,a=n.return,u=n,l=t;if(t=Au,u.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,h=u,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,u,0,t),1&p.mode&&ga(o,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0==(1&t)){ga(o,c,t),ml();break e}l=Error(s(426))}else if(is&&1&u.mode){var y=ya(a);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),va(y,a,u,0,t),ps(ca(l,u));break e}}o=l=ca(l,u),4!==Lu&&(Lu=2),null===ju?ju=[o]:ju.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:u=l;var v=o.type,w=o.stateNode;if(0==(128&o.flags)&&("function"==typeof v.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Gu||!Gu.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,u,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(e){t=e,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pl(){var e=_u.current;return _u.current=oa,null===e?oa:e}function ml(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Du||0==(268435455&Mu)&&0==(268435455&Fu)||al(Du,Au)}function gl(e,t){var n=xu;xu|=2;var r=pl();for(Du===e&&Au===t||(qu=null,dl(e,t));;)try{yl();break}catch(t){fl(e,t)}if(Es(),xu=n,_u.current=r,null!==Nu)throw Error(s(261));return Du=null,Au=0,Lu}function yl(){for(;null!==Nu;)wl(Nu)}function vl(){for(;null!==Nu&&!Qe();)wl(Nu)}function wl(e){var t=Iu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?bl(e):Nu=t,Tu.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ha(n,t,Ou)))return void(Nu=n)}else{if(null!==(n=Wa(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Lu=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Lu&&(Lu=5)}function El(e,t,n){var r=wt,i=Cu.transition;try{Cu.transition=null,wt=1,function(e,t,n,r){do{Sl()}while(null!==Wu);if(0!=(6&xu))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Du&&(Nu=Du=null,Au=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Hu||(Hu=!0,Dl(tt,(function(){return Sl(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var a=wt;wt=1;var u=xu;xu|=4,Tu.current=null,function(e,t){if(ei=$t,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,u=-1,l=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(u=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(e){kl(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tu,tu=!1}(e,n),gu(n,e),pr(ti),$t=!!ei,ti=ei=null,e.current=n,vu(n,e,i),Ye(),xu=u,wt=a,Cu.transition=o}else e.current=n;if(Hu&&(Hu=!1,Wu=e,Qu=i),0===(o=e.pendingLanes)&&(Gu=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if($u)throw $u=!1,e=Ku,Ku=null,e;0!=(1&Qu)&&0!==e.tag&&Sl(),0!=(1&(o=e.pendingLanes))?e===Xu?Yu++:(Yu=0,Xu=e):Yu=0,zi()}(e,t,n,r)}finally{Cu.transition=i,wt=r}return null}function Sl(){if(null!==Wu){var e=bt(Qu),t=Cu.transition,n=wt;try{if(Cu.transition=null,wt=16>e?16:e,null===Wu)var r=!1;else{if(e=Wu,Wu=null,Qu=0,0!=(6&xu))throw Error(s(331));var i=xu;for(xu|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!=(16&Ja.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Ja=c;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(su(h),h===c){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ja=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!=(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ja=v;break e}Ja=o.return}}var w=e.current;for(Ja=w;null!==Ja;){var b=(a=Ja).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=w;null!==Ja;){if(0!=(2048&(u=Ja).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(e){kl(u,u.return,e)}if(u===a){Ja=null;break e}var E=u.sibling;if(null!==E){E.return=u.return,Ja=E;break e}Ja=u.return}}if(xu=i,zi(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{wt=n,Cu.transition=t}}return!1}function Il(e,t,n){e=Ls(e,t=pa(0,t=ca(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),rl(e,t))}function kl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Ls(t,e=ma(t,e=ca(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function _l(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Du===e&&(Au&n)===n&&(4===Lu||3===Lu&&(130023424&Au)===Au&&500>Xe()-Bu?dl(e,0):Vu|=n),rl(e,t)}function Tl(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ct,0==(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ds(e,t))&&(yt(e,t,n),rl(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function xl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tl(e,n)}function Dl(e,t){return He(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new Nl(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pl(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Ol(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case I:return Rl(n.children,i,o,t);case k:a=8,i|=8;break;case _:return(e=Al(12,n,t,2|i)).elementType=_,e.lanes=o,e;case D:return(e=Al(13,n,t,i)).elementType=D,e.lanes=o,e;case N:return(e=Al(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Ml(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case x:a=11;break e;case A:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Al(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Rl(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Al(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,r,i,s,o,a,u){return e=new jl(e,t,n,a,u),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Al(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},As(s),e}function Bl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zl(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ri(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,u){return(e=Ul(n,r,!0,e,0,s,0,a,u)).context=zl(null),n=e.current,(s=Ps(r=el(),i=tl(n))).callback=null!=t?t:null,Ls(n,s,i),e.current.lanes=i,yt(e,i,r),rl(e,r),e}function $l(e,t,n,r){var i=t.current,s=el(),o=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ps(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ls(i,t,o))&&(nl(e,i,o,s),Rs(e,i,o)),o}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)ba=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Fa(e,t,n):(Ti(ao,1&ao.current),null!==(e=$a(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,_a(e,t,n)}return $a(e,t,n)}(e,t,n);ba=0!=(131072&e.flags)}else ba=!1,is&&0!=(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ai(t,xi.current);ks(t,n),i=ko(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,As(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ks(t,r,e,n),t=Da(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),Ea(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ol(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===A)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=$a(e,t,n);break e}Ea(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),Ea(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Fa(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):Ea(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return Ea(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Di.current){t=$a(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){a=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ps(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ea(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ks(t,n),r=r(i=_s(i)),t.flags|=1,Ea(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),qa(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,ks(t,n),qs(t,r,i),Ks(t,r,i,n),Da(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return _a(e,t,n)}throw Error(s(156,t.tag))};var Wl="function"==typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Kl(o);a.call(e)}}$l(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Kl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Kl(u);a.call(e)}}var u=Ul(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),cl((function(){$l(t,u,n,r)})),u}(n,t,e,i,r);return Kl(o)}Yl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$l(e,t,null,null)},Yl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){$l(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rl(t,Xe()),0==(6&xu)&&(zu=Xe()+500,zi()))}break;case 13:cl((function(){var t=Ds(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Hl(e,1)}},St=function(e){if(13===e.tag){var t=Ds(e,134217728);null!==t&&nl(t,e,134217728,el()),Hl(e,134217728)}},It=function(e){if(13===e.tag){var t=tl(e),n=Ds(e,t);null!==n&&nl(n,e,t,el()),Hl(e,t)}},kt=function(){return wt},_t=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(s(90));H(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ll,De=cl;var tc={usingClientEntryPoint:!1,Events:[wi,bi,Ei,Te,Ce,ll]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(s(200));return Bl(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(s(299));var n=!1,r="",i=Wl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Wl;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(s(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{var r=n(935);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},935:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},921:(e,t)=>{Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},864:(e,t,n)=>{n(921)},408:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var u=arguments.length-2;if(1===u)s.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===s[i]&&(s[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===s?"."+x(u,0):s,E(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,s=""===s?".":s+":",E(e))for(var l=0;l<e.length;l++){var c=s+x(a=e[l],l);u+=D(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)u+=D(a=a.value,t,i,c=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:I};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)S.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},294:(e,t,n)=>{e.exports=n(408)},53:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,u=e[a],l=a+1,c=e[l];if(0>s(u,n))l<i&&0>s(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[a]=n,r=a);else{if(!(l<i&&0>s(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var l=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,w="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function E(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,P(S);else{var t=r(c);null!==t&&L(E,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!D());){var o=d.callback;if("function"==typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&L(E,h.startTime-n),u=!1}return u}finally{d=null,f=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,k=!1,_=null,T=-1,C=5,x=-1;function D(){return!(t.unstable_now()-x<C)}function N(){if(null!==_){var e=t.unstable_now();x=e;var n=!0;try{n=_(!0,e)}finally{n?I():(k=!1,_=null)}}else k=!1}if("function"==typeof w)I=function(){w(N)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=N,I=function(){O.postMessage(null)}}else I=function(){y(N,0)};function P(e){_=e,k||(k=!0,I())}function L(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(l)&&e===r(c)&&(g?(v(T),T=-1):g=!0,L(E,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},840:(e,t,n)=>{e.exports=n(53)},250:(e,t,n)=>{var r=n(294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return a((function(){i.value=n,i.getSnapshot=t,l(i)&&c({inst:i})}),[e,n,t]),o((function(){return l(i)&&c({inst:i}),e((function(){l(i)&&c({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},139:(e,t,n)=>{var r=n(294),i=n(688),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,a=r.useRef,u=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,a=n)}var o,a,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,i]);var f=o(e,h[0],h[1]);return u((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},688:(e,t,n)=>{e.exports=n(250)},798:(e,t,n)=>{e.exports=n(139)}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return n[e](s,s.exports,i),s.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);i.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(s,o),s},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};i.r(e),i.d(e,{FirebaseError:()=>jn,SDK_VERSION:()=>Br,_DEFAULT_ENTRY_NAME:()=>Dr,_addComponent:()=>Pr,_addOrOverwriteComponent:()=>Lr,_apps:()=>Ar,_clearComponents:()=>Vr,_components:()=>Or,_getProvider:()=>Mr,_registerComponent:()=>Rr,_removeServiceInstance:()=>Fr,deleteApp:()=>Kr,getApp:()=>qr,getApps:()=>$r,initializeApp:()=>zr,onLog:()=>Hr,registerVersion:()=>Gr,setLogLevel:()=>Wr});var t,n=i(294),r=i.t(n,2),s=i(745);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const a="popstate";function u(e){return{usr:e.state,key:e.key}}function l(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function c(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function d(e){let t="undefined"!=typeof window&&void 0!==window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"==typeof e?e:c(e);return new URL(n,t)}var f;function p(e,t,n){void 0===n&&(n="/");let r=S(("string"==typeof t?h(t):t).pathname||"/",n);if(null==r)return null;let i=m(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let e=0;null==s&&e<i.length;++e)s=w(i[e],E(r));return s}function m(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach(((e,i)=>{let s={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(I(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=x([r,s.relativePath]),a=n.concat(s);e.children&&e.children.length>0&&(I(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),m(e.children,t,a,o)),(null!=e.path||e.index)&&t.push({path:o,score:v(o,e.index),routesMeta:a})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));const g=/^:\w+$/,y=e=>"*"===e;function v(e,t){let n=e.split("/"),r=n.length;return n.some(y)&&(r+=-2),t&&(r+=2),n.filter((e=>!y(e))).reduce(((e,t)=>e+(g.test(t)?3:""===t?1:10)),r)}function w(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let e=0;e<n.length;++e){let o=n[e],a=e===n.length-1,u="/"===i?t:t.slice(i.length)||"/",l=b({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},u);if(!l)return null;Object.assign(r,l.params);let c=o.route;s.push({params:r,pathname:x([i,l.pathname]),pathnameBase:D(x([i,l.pathnameBase])),route:c}),"/"!==l.pathnameBase&&(i=x([i,l.pathnameBase]))}return s}function b(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),k("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(r.push(t),"([^\\/]+)")));return e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return k(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(a[n]||"",t),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function E(e){try{return decodeURI(e)}catch(t){return k(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function S(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function I(e,t){if(!1===e||null==e)throw new Error(t)}function k(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function _(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function T(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function C(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=h(e):(i=o({},e),I(!i.pathname||!i.pathname.includes("?"),_("?","pathname","search",i)),I(!i.pathname||!i.pathname.includes("#"),_("#","pathname","hash",i)),I(!i.search||!i.search.includes("#"),_("#","search","hash",i)));let s,a=""===e||""===i.pathname,u=a?"/":i.pathname;if(r||null==u)s=n;else{let e=t.length-1;if(u.startsWith("..")){let t=u.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?h(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:N(r),hash:A(i)}}(i,s),c=u&&"/"!==u&&u.endsWith("/"),d=(a||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const x=e=>e.join("/").replace(/\/\/+/g,"/"),D=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),N=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",A=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class O extends Error{}class P{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function L(e){return e instanceof P}const R=["post","put","patch","delete"],M=(new Set(R),["get",...R]);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}new Set(M),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;"function"==typeof Object.is&&Object.is;const{useState:V,useEffect:j,useLayoutEffect:U,useDebugValue:B}=r;"undefined"==typeof window||void 0===window.document||window.document.createElement,r.useSyncExternalStore;const z=n.createContext(null),q=n.createContext(null),$=n.createContext(null),K=n.createContext(null),G=n.createContext(null),H=n.createContext({outlet:null,matches:[]}),W=n.createContext(null);function Q(){return null!=n.useContext(G)}function Y(){return Q()||I(!1),n.useContext(G).location}function X(){Q()||I(!1);let{basename:e,navigator:t}=n.useContext(K),{matches:r}=n.useContext(H),{pathname:i}=Y(),s=JSON.stringify(T(r).map((e=>e.pathnameBase))),o=n.useRef(!1);n.useEffect((()=>{o.current=!0}));let a=n.useCallback((function(n,r){if(void 0===r&&(r={}),!o.current)return;if("number"==typeof n)return void t.go(n);let a=C(n,JSON.parse(s),i,"path"===r.relative);"/"!==e&&(a.pathname="/"===a.pathname?e:x([e,a.pathname])),(r.replace?t.replace:t.push)(a,r.state,r)}),[e,t,s,i]);return a}function J(e,t){let{relative:r}=void 0===t?{}:t,{matches:i}=n.useContext(H),{pathname:s}=Y(),o=JSON.stringify(T(i).map((e=>e.pathnameBase)));return n.useMemo((()=>C(e,JSON.parse(o),s,"path"===r)),[e,o,s,r])}function Z(){let e=function(){var e;let t=n.useContext(W),r=function(e){let t=n.useContext($);return t||I(!1),t}(re.UseRouteError),i=n.useContext(H),s=i.matches[i.matches.length-1];return t||(i||I(!1),!s.route.id&&I(!1),null==(e=r.errors)?void 0:e[s.route.id])}(),t=L(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unhandled Thrown Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:s},r):null,n.createElement("p",null,"💿 Hey developer 👋"),n.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",n.createElement("code",{style:o},"errorElement")," props on ",n.createElement("code",{style:o},"<Route>")))}class ee extends n.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?n.createElement(W.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function te(e){let{routeContext:t,match:r,children:i}=e,s=n.useContext(z);return s&&r.route.errorElement&&(s._deepestRenderedBoundaryId=r.route.id),n.createElement(H.Provider,{value:t},i)}var ne,re,ie;function se(e){I(!1)}function oe(e){let{basename:r="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:u=!1}=e;Q()&&I(!1);let l=r.replace(/^\/*/,"/"),c=n.useMemo((()=>({basename:l,navigator:a,static:u})),[l,a,u]);"string"==typeof s&&(s=h(s));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:g="default"}=s,y=n.useMemo((()=>{let e=S(d,l);return null==e?null:{pathname:e,search:f,hash:p,state:m,key:g}}),[l,d,f,p,m,g]);return null==y?null:n.createElement(K.Provider,{value:c},n.createElement(G.Provider,{children:i,value:{location:y,navigationType:o}}))}function ae(e){let{children:r,location:i}=e,s=n.useContext(q);return function(e,r){Q()||I(!1);let{navigator:i}=n.useContext(K),s=n.useContext($),{matches:o}=n.useContext(H),a=o[o.length-1],u=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let c,d=Y();if(r){var f;let e="string"==typeof r?h(r):r;"/"===l||(null==(f=e.pathname)?void 0:f.startsWith(l))||I(!1),c=e}else c=d;let m=c.pathname||"/",g=p(e,{pathname:"/"===l?m:m.slice(l.length)||"/"}),y=function(e,t,r){if(void 0===t&&(t=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}let i=e,s=null==r?void 0:r.errors;if(null!=s){let e=i.findIndex((e=>e.route.id&&(null==s?void 0:s[e.route.id])));e>=0||I(!1),i=i.slice(0,Math.min(i.length,e+1))}return i.reduceRight(((e,o,a)=>{let u=o.route.id?null==s?void 0:s[o.route.id]:null,l=r?o.route.errorElement||n.createElement(Z,null):null,c=()=>n.createElement(te,{match:o,routeContext:{outlet:e,matches:t.concat(i.slice(0,a+1))}},u?l:void 0!==o.route.element?o.route.element:e);return r&&(o.route.errorElement||0===a)?n.createElement(ee,{location:r.location,component:l,error:u,children:c()}):c()}),null)}(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:x([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:x([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,s||void 0);return r&&y?n.createElement(G.Provider,{value:{location:F({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:t.Pop}},y):y}(s&&!r?s.router.routes:le(r),i)}!function(e){e.UseRevalidator="useRevalidator"}(ne||(ne={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(re||(re={})),function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ie||(ie={})),new Promise((()=>{}));class ue extends n.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:e,errorElement:t,resolve:n}=this.props,r=null,i=ie.pending;if(n instanceof Promise)if(this.state.error){ie.error;let e=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>e})}else n._tracked?void 0!==r._error?ie.error:void 0!==r._data?ie.success:ie.pending:(ie.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((e=>Object.defineProperty(n,"_data",{get:()=>e})),(e=>Object.defineProperty(n,"_error",{get:()=>e}))));else ie.success,Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});if(i===ie.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===ie.error&&!t)throw r._error;if(i===ie.error)return React.createElement(AwaitContext.Provider,{value:r,children:t});if(i===ie.success)return React.createElement(AwaitContext.Provider,{value:r,children:e});throw r}}function le(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,i)=>{if(!n.isValidElement(e))return;if(e.type===n.Fragment)return void r.push.apply(r,le(e.props.children,t));e.type!==se&&I(!1),e.props.index&&e.props.children&&I(!1);let s=[...t,i],o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=le(e.props.children,s)),r.push(o)})),r}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}const he=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function de(e){let{basename:r,children:i,window:s}=e,o=n.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),function(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,h=s.history,f=t.Pop,p=null;function m(){f=t.Pop,p&&p({action:f,location:g.location})}let g={get action(){return f},get location(){return e(s,h)},listen(e){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(a,m),p=e,()=>{s.removeEventListener(a,m),p=null}},createHref:e=>n(s,e),encodeLocation(e){let t=d("string"==typeof e?e:c(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;let i=l(g.location,e,n);r&&r(i,e);let a=u(i),c=g.createHref(i);try{h.pushState(a,"",c)}catch(e){s.location.assign(c)}o&&p&&p({action:f,location:g.location})},replace:function(e,n){f=t.Replace;let i=l(g.location,e,n);r&&r(i,e);let s=u(i),a=g.createHref(i);h.replaceState(s,"",a),o&&p&&p({action:f,location:g.location})},go:e=>h.go(e)};return g}((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return l("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:c(t)}),null,e)}({window:s,v5Compat:!0}));let h=o.current,[f,p]=n.useState({action:h.action,location:h.location});return n.useLayoutEffect((()=>h.listen(p)),[h]),n.createElement(oe,{basename:r,children:i,location:f.location,navigationType:f.action,navigator:h})}const fe=n.forwardRef((function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:h}=e,d=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,he),f=function(e,t){let{relative:r}=void 0===t?{}:t;Q()||I(!1);let{basename:i,navigator:s}=n.useContext(K),{hash:o,pathname:a,search:u}=J(e,{relative:r}),l=a;return"/"!==i&&(l="/"===a?i:x([i,a])),s.createHref({pathname:l,search:u,hash:o})}(l,{relative:i}),p=function(e,t){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a}=void 0===t?{}:t,u=X(),l=Y(),h=J(e,{relative:a});return n.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let n=void 0!==i?i:c(l)===c(h);u(e,{replace:n,state:s,preventScrollReset:o,relative:a})}}),[l,u,h,i,s,r,e,o,a])}(l,{replace:o,state:a,target:u,preventScrollReset:h,relative:i});return n.createElement("a",ce({},d,{href:f,onClick:s?r:function(e){r&&r(e),e.defaultPrevented||p(e)},ref:t,target:u}))}));var pe,me;function ge(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ye(e){return!!e&&!!e[rt]}function ve(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===it}(e)||Array.isArray(e)||!!e[nt]||!!(null===(t=e.constructor)||void 0===t?void 0:t[nt])||ke(e)||_e(e))}function we(e,t,n){void 0===n&&(n=!1),0===be(e)?(n?Object.keys:st)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function be(e){var t=e[rt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ke(e)?2:_e(e)?3:0}function Ee(e,t){return 2===be(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Se(e,t,n){var r=be(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Ie(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ke(e){return Je&&e instanceof Map}function _e(e){return Ze&&e instanceof Set}function Te(e){return e.o||e.t}function Ce(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ot(e);delete t[rt];for(var n=st(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function xe(e,t){return void 0===t&&(t=!1),Ne(e)||ye(e)||!ve(e)||(be(e)>1&&(e.set=e.add=e.clear=e.delete=De),Object.freeze(e),t&&we(e,(function(e,t){return xe(t,!0)}),!0)),e}function De(){ge(2)}function Ne(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ae(e){var t=at[e];return t||ge(18,e),t}function Oe(){return Ye}function Pe(e,t){t&&(Ae("Patches"),e.u=[],e.s=[],e.v=t)}function Le(e){Re(e),e.p.forEach(Fe),e.p=null}function Re(e){e===Ye&&(Ye=e.l)}function Me(e){return Ye={p:[],l:Ye,h:e,m:!0,_:0}}function Fe(e){var t=e[rt];0===t.i||1===t.i?t.j():t.O=!0}function Ve(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Ae("ES5").S(t,e,r),r?(n[rt].P&&(Le(t),ge(4)),ve(e)&&(e=je(t,e),t.l||Be(t,e)),t.u&&Ae("Patches").M(n[rt].t,e,t.u,t.s)):e=je(t,n,[]),Le(t),t.u&&t.v(t.u,t.s),e!==tt?e:void 0}function je(e,t,n){if(Ne(t))return t;var r=t[rt];if(!r)return we(t,(function(i,s){return Ue(e,r,t,i,s,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Be(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Ce(r.k):r.o;we(3===r.i?new Set(i):i,(function(t,s){return Ue(e,r,i,t,s,n)})),Be(e,i,!1),n&&e.u&&Ae("Patches").R(r,n,e.u,e.s)}return r.o}function Ue(e,t,n,r,i,s){if(ye(i)){var o=je(e,i,s&&t&&3!==t.i&&!Ee(t.D,r)?s.concat(r):void 0);if(Se(n,r,o),!ye(o))return;e.m=!1}if(ve(i)&&!Ne(i)){if(!e.h.F&&e._<1)return;je(e,i),t&&t.A.l||Be(e,i)}}function Be(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&xe(t,n)}function ze(e,t){var n=e[rt];return(n?Te(n):e)[t]}function qe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $e(e){e.P||(e.P=!0,e.l&&$e(e.l))}function Ke(e){e.o||(e.o=Ce(e.t))}function Ge(e,t,n){var r=ke(t)?Ae("MapSet").N(t,n):_e(t)?Ae("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Oe(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=ut;n&&(i=[r],s=lt);var o=Proxy.revocable(i,s),a=o.revoke,u=o.proxy;return r.k=u,r.j=a,u}(t,n):Ae("ES5").J(t,n);return(n?n.A:Oe()).p.push(r),r}function He(e){return ye(e)||ge(22,e),function e(t){if(!ve(t))return t;var n,r=t[rt],i=be(t);if(r){if(!r.P&&(r.i<4||!Ae("ES5").K(r)))return r.t;r.I=!0,n=We(t,i),r.I=!1}else n=We(t,i);return we(n,(function(t,i){r&&function(e,t){return 2===be(e)?e.get(t):e[t]}(r.t,t)===i||Se(n,t,e(i))})),3===i?new Set(n):n}(e)}function We(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ce(e)}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(pe||(pe={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(me||(me={}));var Qe,Ye,Xe="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Je="undefined"!=typeof Map,Ze="undefined"!=typeof Set,et="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,tt=Xe?Symbol.for("immer-nothing"):((Qe={})["immer-nothing"]=!0,Qe),nt=Xe?Symbol.for("immer-draftable"):"__$immer_draftable",rt=Xe?Symbol.for("immer-state"):"__$immer_state",it=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),st="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ot=Object.getOwnPropertyDescriptors||function(e){var t={};return st(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},at={},ut={get:function(e,t){if(t===rt)return e;var n=Te(e);if(!Ee(n,t))return function(e,t,n){var r,i=qe(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!ve(r)?r:r===ze(e.t,t)?(Ke(e),e.o[t]=Ge(e.A.h,r,e)):r},has:function(e,t){return t in Te(e)},ownKeys:function(e){return Reflect.ownKeys(Te(e))},set:function(e,t,n){var r=qe(Te(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ze(Te(e),t),s=null==i?void 0:i[rt];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Ie(n,i)&&(void 0!==n||Ee(e.t,t)))return!0;Ke(e),$e(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==ze(e.t,t)||t in e.t?(e.D[t]=!1,Ke(e),$e(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Te(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){ge(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ge(12)}},lt={};we(ut,(function(e,t){lt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),lt.deleteProperty=function(e,t){return lt.set.call(this,e,t,void 0)},lt.set=function(e,t,n){return ut.set.call(this,e[0],t,n,e[0])};var ct=function(){function e(e){var t=this;this.g=et,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return s.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&ge(6),void 0!==r&&"function"!=typeof r&&ge(7),ve(e)){var a=Me(t),u=Ge(t,e,void 0),l=!0;try{o=n(u),l=!1}finally{l?Le(a):Re(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Pe(a,r),Ve(e,a)}),(function(e){throw Le(a),e})):(Pe(a,r),Ve(o,a))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===tt&&(o=void 0),t.F&&xe(o,!0),r){var c=[],h=[];Ae("Patches").M(e,o,c,h),r(c,h)}return o}ge(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,s=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,r,i]})):[s,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){ve(e)||ge(8),ye(e)&&(e=He(e));var t=Me(this),n=Ge(this,e,void 0);return n[rt].C=!0,Re(t),n},t.finishDraft=function(e,t){var n=(e&&e[rt]).A;return Pe(n,t),Ve(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!et&&ge(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Ae("Patches").$;return ye(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),ht=new ct,dt=ht.produce;ht.produceWithPatches.bind(ht),ht.setAutoFreeze.bind(ht),ht.setUseProxies.bind(ht),ht.applyPatches.bind(ht),ht.createDraft.bind(ht),ht.finishDraft.bind(ht);const ft=dt;function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function mt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==pt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===pt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var wt="function"==typeof Symbol&&Symbol.observable||"@@observable",bt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Et={INIT:"@@redux/INIT"+bt(),REPLACE:"@@redux/REPLACE"+bt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+bt()}};function St(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function It(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(vt(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(vt(1));return n(It)(e,t)}if("function"!=typeof e)throw new Error(vt(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(vt(3));return s}function h(e){if("function"!=typeof e)throw new Error(vt(4));if(u)throw new Error(vt(5));var t=!0;return l(),a.push(e),function(){if(t){if(u)throw new Error(vt(6));t=!1,l();var n=a.indexOf(e);a.splice(n,1),o=null}}}function d(e){if(!St(e))throw new Error(vt(7));if(void 0===e.type)throw new Error(vt(8));if(u)throw new Error(vt(9));try{u=!0,s=i(s,e)}finally{u=!1}for(var t=o=a,n=0;n<t.length;n++)(0,t[n])();return e}function f(e){if("function"!=typeof e)throw new Error(vt(10));i=e,d({type:Et.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(vt(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[wt]=function(){return this},e}return d({type:Et.INIT}),(r={dispatch:d,subscribe:h,getState:c,replaceReducer:f})[wt]=p,r}function kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function _t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(vt(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return r=kt.apply(void 0,s)(n.dispatch),yt(yt({},n),{},{dispatch:r})}}}function Tt(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var Ct=Tt();Ct.withExtraArgument=Tt;const xt=Ct;var Dt,Nt=(Dt=function(e,t){return Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Dt(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Dt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),At=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ot=Object.defineProperty,Pt=Object.defineProperties,Lt=Object.getOwnPropertyDescriptors,Rt=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,Vt=function(e,t,n){return t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jt=function(e,t){for(var n in t||(t={}))Mt.call(t,n)&&Vt(e,n,t[n]);if(Rt)for(var r=0,i=Rt(t);r<i.length;r++)n=i[r],Ft.call(t,n)&&Vt(e,n,t[n]);return e},Ut=function(e,t){return Pt(e,Lt(t))},Bt="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?kt:kt.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var zt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Nt(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,At([void 0],e[0].concat(this)))):new(t.bind.apply(t,At([void 0],e.concat(this))))},t}(Array);function qt(e){return ve(e)?ft(e,(function(){})):e}function $t(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return jt(jt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var Kt=["name","message","stack","code"],Gt=function(e,t){this.payload=e,this.meta=t},Ht=function(e,t){this.payload=e,this.meta=t},Wt=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=Kt;n<r.length;n++){var i=r[n];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};function Qt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}!function(){function e(e,t,n){var r=$t(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Ut(jt({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=$t(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Ut(jt({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),s=$t(e+"/rejected",(function(e,t,r,i,s){return{payload:i,error:(n&&n.serializeError||Wt)(e||"Rejected"),meta:Ut(jt({},s||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(a,u,l){var c,h=(null==n?void 0:n.idGenerator)?n.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),d=new o;function f(e){c=e,d.abort()}var p=function(){return o=this,p=null,m=function(){var o,p,m,g,y,v;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),null===(b=g=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:u,extra:l}))||"object"!=typeof b||"function"!=typeof b.then?[3,2]:[4,g];case 1:g=w.sent(),w.label=2;case 2:if(!1===g||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise((function(e,t){return d.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),a(i(h,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:h,arg:e},{getState:u,extra:l}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:a,getState:u,extra:l,requestId:h,signal:d.signal,abort:f,rejectWithValue:function(e,t){return new Gt(e,t)},fulfillWithValue:function(e,t){return new Ht(e,t)}})).then((function(t){if(t instanceof Gt)throw t;return t instanceof Ht?r(t.payload,h,e,t.meta):r(t,h,e)}))])];case 3:return m=w.sent(),[3,5];case 4:return v=w.sent(),m=v instanceof Gt?s(null,h,e,v.payload,v.meta):s(v,h,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&s.match(m)&&m.meta.condition||a(m),[2,m]}var b}))},new Promise((function(e,t){var n=function(e){try{i(m.next(e))}catch(e){t(e)}},r=function(e){try{i(m.throw(e))}catch(e){t(e)}},i=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,r)};i((m=m.apply(o,p)).next())}));var o,p,m}();return Object.assign(p,{abort:f,requestId:h,arg:e,unwrap:function(){return p.then(Qt)}})}}),{pending:i,rejected:s,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}(),Object.assign;var Yt="listenerMiddleware";$t(Yt+"/add"),$t(Yt+"/removeAll"),$t(Yt+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==i.g?i.g:globalThis);"undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame,function(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[rt];return ut.get(t,e)},set:function(t){var n=this[rt];ut.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][rt];if(!i.P)switch(i.i){case 5:r(i)&&$e(i);break;case 4:n(i)&&$e(i)}}}function n(e){for(var t=e.t,n=e.k,r=st(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==rt){var o=t[s];if(void 0===o&&!Ee(t,s))return!0;var a=n[s],u=a&&a[rt];if(u?u.t!==o:!Ie(a,o))return!0}}var l=!!t[rt];return r.length!==st(t).length+(l?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};!function(e,t){at[e]||(at[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var s=ot(n);delete s[rt];for(var o=st(s),a=0;a<o.length;a++){var u=o[a];s[u]=e(u,t||!!s[u].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,t),s={i:r?5:4,A:n?n.A:Oe(),P:!1,I:!1,D:{},l:n,t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,rt,{value:s,writable:!0}),i},S:function(e,n,i){i?ye(n)&&n[rt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[rt];if(n){var i=n.t,s=n.k,o=n.D,a=n.i;if(4===a)we(s,(function(t){t!==rt&&(void 0!==i[t]||Ee(i,t)?o[t]||e(s[t]):(o[t]=!0,$e(n)))})),we(i,(function(e){void 0!==s[e]||Ee(s,e)||(o[e]=!1,$e(n))}));else if(5===a){if(r(n)&&($e(n),o.length=!0),s.length<i.length)for(var u=s.length;u<i.length;u++)o[u]=!1;else for(var l=i.length;l<s.length;l++)o[l]=!0;for(var c=Math.min(s.length,i.length),h=0;h<c;h++)s.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(s[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}();var Xt=$t("updateFeed"),Jt=$t("loginAction"),Zt=$t("updateExplore"),en=$t("updateInterests"),tn=$t("updateCanTeach"),nn=$t("updateCanLearn"),rn=$t("updateChats");const sn=function(e,t,n,r){void 0===n&&(n=[]);var i,s="function"==typeof t?function(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}(t):[t,n,r],o=s[0],a=s[1],u=s[2];if(function(e){return"function"==typeof e}(e))i=function(){return qt(e())};else{var l=qt(e);i=function(){return l}}function c(e,t){void 0===e&&(e=i());var n=At([o[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if(ye(e))return void 0===(r=n(e,t))?e:r;if(ve(e))return ft(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return c.getInitialState=i,c}({userInfo:{displayName:"hi",canTeach:["Spanish","Russian"],canLearn:["Cantonese","English"],imgUrl:"",friends:[],interests:["Saving Ethans Marriage","Running"]},currentChats:[],loggedIn:!1,feedCurrent:"Friends",exploreCurrent:{willTeach:"",willLearn:""}},(function(e){return e.addCase(Xt,(function(e,t){e.feedCurrent=t.payload})).addCase(Jt,(function(e){e.loggedIn?e.loggedIn=!1:e.loggedIn=!0})).addCase(Zt,(function(e,t){e.exploreCurrent=t.payload})).addCase(en,(function(e,t){e.userInfo.interests=t.payload})).addCase(tn,(function(e,t){e.userInfo.canTeach=t.payload})).addCase(nn,(function(e,t){e.userInfo.canLearn=t.payload})).addCase(rn,(function(e,t){console.log("chatupdate")}))}));var on=i(688),an=i(798),un=i(935);let ln=function(e){e()};const cn=()=>ln,hn=(0,n.createContext)(null);function dn(){return(0,n.useContext)(hn)}let fn=()=>{throw new Error("uSES not initialized!")};const pn=(e,t)=>e===t;function mn(e=hn){const t=e===hn?dn:()=>(0,n.useContext)(e);return function(e,r=pn){const{store:i,subscription:s,getServerState:o}=t(),a=fn(s.addNestedSub,i.getState,o||i.getState,e,r);return(0,n.useDebugValue)(a),a}}const gn=mn();i(679),i(864);const yn={notify(){},get:()=>[]};const vn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect;let wn=null;const bn=function({store:e,context:t,children:r,serverState:i}){const s=(0,n.useMemo)((()=>{const t=function(e,t){let n,r=yn;function i(){o.onStateChange&&o.onStateChange()}function s(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=cn();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const o={addNestedSub:function(e){return s(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=yn)},getListeners:()=>r};return o}(e);return{store:e,subscription:t,getServerState:i?()=>i:void 0}}),[e,i]),o=(0,n.useMemo)((()=>e.getState()),[e]);vn((()=>{const{subscription:t}=s;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),o!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[s,o]);const a=t||hn;return n.createElement(a.Provider,{value:s},r)};function En(e=hn){const t=e===hn?dn:()=>(0,n.useContext)(e);return function(){const{store:e}=t();return e}}const Sn=En();function In(e=hn){const t=e===hn?Sn:En(e);return function(){return t().dispatch}}const kn=In();var _n;(e=>{fn=e})(an.useSyncExternalStoreWithSelector),(e=>{wn=e})(on.useSyncExternalStore),_n=un.unstable_batchedUpdates,ln=_n;const Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:props,t=e.loggedIn,r=kn();return n.createElement("div",{className:"nav-links"},t?n.createElement("div",null,n.createElement(fe,{to:"/explore"},"Explore"),n.createElement(fe,{to:"/"},"Home Page"),n.createElement(fe,{to:"/profile"},"Profile"),n.createElement(fe,{to:"/login",onClick:function(){return r(Jt())}},"Log Out")):n.createElement("div",null,n.createElement(fe,{to:"/login"},"Login")))},Cn=function(){console.log("here");var e=gn((function(e){return e.loggedIn}));return n.createElement("div",{id:"nav-bar"},n.createElement("h1",null,"Kvasir"),n.createElement(Tn,{loggedIn:e}))};function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Dn=function(e){var t=e.options,r=e.current,i=e.handleChange,s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(!1),2),o=s[0],a=s[1],u=[];t.forEach((function(e){u.push(n.createElement("li",{key:"li"+e,className:"menu-item"},n.createElement("button",{key:"li-but"+e,onClick:function(){l(e),i(e)}},e)))}));var l=function(e){a(!1)},c=function(e){var t=(0,n.useRef)(null);return(0,n.useEffect)((function(){var n=function(n){t.current&&!t.current.contains(n.target)&&e()};return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[]),t}((function(){a(!1)}));return n.createElement("div",{id:"dropdown"},n.createElement("button",{id:"dropdown-but",ref:c,onClick:function(){a(!o)}},r),o?n.createElement("ul",{className:"menu"},u):null)},Nn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},An={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,u=a?e[t+2]:0,l=i>>2,c=(3&i)<<4|o>>4;let h=(15&o)<<2|u>>6,d=63&u;a||(d=64,s||(h=64)),r.push(n[l],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Nn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const u=i<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},On=function(e){return function(e){const t=Nn(e);return An.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function Pn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Pn(e[n],t[n]));return e}function Ln(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Rn(){return"object"==typeof indexedDB}function Mn(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}const Fn=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return An.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};class Vn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class jn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}}class Un{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Bn,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new jn(r,o,n)}}const Bn=/\{\$([^}]+)}/g;function zn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if($n(n)&&$n(s)){if(!qn(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function $n(e){return null!==e&&"object"==typeof e}function Kn(e,t){const n=new Gn(e,t);return n.subscribe.bind(n)}class Gn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Hn),void 0===r.error&&(r.error=Hn),void 0===r.complete&&(r.complete=Hn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Hn(){}function Wn(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Qn(e){return e&&e._delegate?e._delegate:e}class Yn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xn="[DEFAULT]";class Jn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Vn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Xn?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Zn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Jn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const er=[];var tr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(tr||(tr={}));const nr={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},rr=tr.INFO,ir={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},sr=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=ir[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class or{constructor(e){this.name=e,this._logLevel=rr,this._logHandler=sr,this._userLogHandler=null,er.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?nr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...e),this._logHandler(this,tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...e),this._logHandler(this,tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tr.INFO,...e),this._logHandler(this,tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tr.WARN,...e),this._logHandler(this,tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...e),this._logHandler(this,tr.ERROR,...e)}}let ar,ur;const lr=new WeakMap,cr=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap;let pr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return cr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||hr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function mr(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ur||(ur=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(yr(this),e),gr(lr.get(this))}:function(...e){return gr(t.apply(yr(this),e))}:function(e,...n){const r=t.call(yr(this),e,...n);return hr.set(r,e.sort?e.sort():[e]),gr(r)}:(e instanceof IDBTransaction&&function(e){if(cr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));cr.set(e,t)}(e),n=e,(ar||(ar=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,pr):e);var t,n}function gr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(gr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&lr.set(t,e)})).catch((()=>{})),fr.set(t,e),t}(e);if(dr.has(e))return dr.get(e);const t=mr(e);return t!==e&&(dr.set(e,t),fr.set(t,e)),t}const yr=e=>fr.get(e);function vr(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=gr(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(gr(o.result),e.oldVersion,e.newVersion,gr(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}function wr(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),gr(n).then((()=>{}))}const br=["get","getKey","getAll","getAllKeys","count"],Er=["put","add","delete","clear"],Sr=new Map;function Ir(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Sr.get(t))return Sr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Er.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!br.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return Sr.set(t,s),s}var kr;kr=pr,pr={...kr,get:(e,t,n)=>Ir(e,t)||kr.get(e,t,n),has:(e,t)=>!!Ir(e,t)||kr.has(e,t)};class _r{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Tr="@firebase/app",Cr="0.8.4",xr=new or("@firebase/app"),Dr="[DEFAULT]",Nr={[Tr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ar=new Map,Or=new Map;function Pr(e,t){try{e.container.addComponent(t)}catch(n){xr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Lr(e,t){e.container.addOrOverwriteComponent(t)}function Rr(e){const t=e.name;if(Or.has(t))return xr.debug(`There were multiple attempts to register component ${t}.`),!1;Or.set(t,e);for(const t of Ar.values())Pr(t,e);return!0}function Mr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fr(e,t,n=Dr){Mr(e,t).clearInstance(n)}function Vr(){Or.clear()}const jr=new Un("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Yn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}const Br="9.14.0";function zr(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Dr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var e;return null===(e=Fn())||void 0===e?void 0:e.config})()),!n)throw jr.create("no-options");const s=Ar.get(i);if(s){if(qn(n,s.options)&&qn(r,s.config))return s;throw jr.create("duplicate-app",{appName:i})}const o=new Zn(i);for(const e of Or.values())o.addComponent(e);const a=new Ur(n,r,o);return Ar.set(i,a),a}function qr(e=Dr){const t=Ar.get(e);if(!t&&e===Dr)return zr();if(!t)throw jr.create("no-app",{appName:e});return t}function $r(){return Array.from(Ar.values())}async function Kr(e){const t=e.name;Ar.has(t)&&(Ar.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Gr(e,t,n){var r;let i=null!==(r=Nr[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void xr.warn(e.join(" "))}Rr(new Yn(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function Hr(e,t){if(null!==e&&"function"!=typeof e)throw jr.create("invalid-log-argument");!function(e,t){for(const n of er){let r=null;t&&t.level&&(r=nr[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:tr[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function Wr(e){var t;t=e,er.forEach((e=>{e.setLogLevel(t)}))}const Qr="firebase-heartbeat-store";let Yr=null;function Xr(){return Yr||(Yr=vr("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Qr)}}).catch((e=>{throw jr.create("idb-open",{originalErrorMessage:e.message})}))),Yr}async function Jr(e,t){var n;try{const n=(await Xr()).transaction(Qr,"readwrite"),r=n.objectStore(Qr);return await r.put(t,Zr(e)),n.done}catch(e){if(e instanceof jn)xr.warn(e.message);else{const t=jr.create("idb-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message});xr.warn(t.message)}}}function Zr(e){return`${e.name}!${e.options.appId}`}class ei{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ni(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ti();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ti(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ri(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ri(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=On(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ti(){return(new Date).toISOString().substring(0,10)}class ni{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Rn()&&Mn().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await Xr()).transaction(Qr).objectStore(Qr).get(Zr(e))}catch(e){if(e instanceof jn)xr.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message});xr.warn(n.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Jr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Jr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ri(e){return On(JSON.stringify({version:2,heartbeats:e})).length}Rr(new Yn("platform-logger",(e=>new _r(e)),"PRIVATE")),Rr(new Yn("heartbeat",(e=>new ei(e)),"PRIVATE")),Gr(Tr,Cr,""),Gr(Tr,Cr,"esm2017"),Gr("fire-js","");const ii="@firebase/installations",si="0.5.16",oi=`w:${si}`,ai="FIS_v2",ui=new Un("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function li(e){return e instanceof jn&&e.code.includes("request-failed")}function ci({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function hi(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function di(e,t){const n=(await t.json()).error;return ui.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function fi({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function pi(e){const t=await e();return t.status>=500&&t.status<600?e():t}function mi(e){return new Promise((t=>{setTimeout(t,e)}))}const gi=/^[cdef][\w-]{21}$/;function yi(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return gi.test(t)?t:""}catch(e){return""}}function vi(e){return`${e.appName}!${e.appId}`}const wi=new Map;function bi(e,t){const n=vi(e);Ei(n,t),function(e,t){const n=(!Si&&"BroadcastChannel"in self&&(Si=new BroadcastChannel("[Firebase] FID Change"),Si.onmessage=e=>{Ei(e.data.key,e.data.fid)}),Si);n&&n.postMessage({key:e,fid:t}),0===wi.size&&Si&&(Si.close(),Si=null)}(n,t)}function Ei(e,t){const n=wi.get(e);if(n)for(const e of n)e(t)}let Si=null;const Ii="firebase-installations-store";let ki=null;function _i(){return ki||(ki=vr("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ii)}})),ki}async function Ti(e,t){const n=vi(e),r=(await _i()).transaction(Ii,"readwrite"),i=r.objectStore(Ii),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||bi(e,t.fid),t}async function Ci(e){const t=vi(e),n=(await _i()).transaction(Ii,"readwrite");await n.objectStore(Ii).delete(t),await n.done}async function xi(e,t){const n=vi(e),r=(await _i()).transaction(Ii,"readwrite"),i=r.objectStore(Ii),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||bi(e,o.fid),o}async function Di(e){let t;const n=await xi(e.appConfig,(n=>{const r=function(e){return Oi(e||{fid:yi(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(ui.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=ci(e),i=fi(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:ai,appId:e.appId,sdkVersion:oi},a={method:"POST",headers:i,body:JSON.stringify(o)},u=await pi((()=>fetch(r,a)));if(u.ok){const e=await u.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:hi(e.authToken)}}throw await di("Create Installation",u)}(e,t);return Ti(e.appConfig,n)}catch(n){throw li(n)&&409===n.customData.serverCode?await Ci(e.appConfig):await Ti(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ni(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Ni(e){let t=await Ai(e.appConfig);for(;1===t.registrationStatus;)await mi(100),t=await Ai(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Di(e);return n||t}return t}function Ai(e){return xi(e,(e=>{if(!e)throw ui.create("installation-not-found");return Oi(e)}))}function Oi(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Pi({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${ci(e)}/${t}/authTokens:generate`}(e,n),i=function(e,{refreshToken:t}){const n=fi(e);return n.append("Authorization",function(e){return`${ai} ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:oi,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},u=await pi((()=>fetch(r,a)));if(u.ok)return hi(await u.json());throw await di("Generate Auth Token",u)}async function Li(e,t=!1){let n;const r=await xi(e.appConfig,(r=>{if(!Mi(r))throw ui.create("not-registered");const i=r.authToken;if(!t&&(2===(s=i).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(s)))return r;var s;if(1===i.requestStatus)return n=async function(e,t){let n=await Ri(e.appConfig);for(;1===n.authToken.requestStatus;)await mi(100),n=await Ri(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Li(e,t):r}(e,t),r;{if(!navigator.onLine)throw ui.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await Pi(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Ti(e.appConfig,r),n}catch(n){if(!li(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ti(e.appConfig,n)}else await Ci(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Ri(e){return xi(e,(e=>{if(!Mi(e))throw ui.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Mi(e){return void 0!==e&&2===e.registrationStatus}function Fi(e){return ui.create("missing-app-config-values",{valueName:e})}const Vi="installations";Rr(new Yn(Vi,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Fi("App Configuration");if(!e.name)throw Fi("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Fi(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Mr(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Rr(new Yn("installations-internal",(e=>{const t=Mr(e.getProvider("app").getImmediate(),Vi).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Di(t);return r?r.catch(console.error):Li(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await Di(e);t&&await t}(n),(await Li(n,t)).token}(t,e)}}),"PRIVATE")),Gr(ii,si),Gr(ii,si,"esm2017");const ji="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ui="google.c.a.c_id";var Bi,zi;function qi(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $i(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r[e]=n.charCodeAt(e);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Bi||(Bi={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(zi||(zi={}));const Ki="fcm_token_details_db",Gi="fcm_token_object_Store",Hi="firebase-messaging-store";let Wi=null;function Qi(){return Wi||(Wi=vr("firebase-messaging-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Hi)}})),Wi}async function Yi(e){const t=Ji(e),n=await Qi(),r=await n.transaction(Hi).objectStore(Hi).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(Ki))return null}let t=null;const n=await vr(Ki,5,{upgrade:async(n,r,i,s)=>{var o;if(r<2)return;if(!n.objectStoreNames.contains(Gi))return;const a=s.objectStore(Gi),u=await a.index("fcmSenderId").get(e);if(await a.clear(),u)if(2===r){const e=u;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:qi(e.vapidKey)}}}else if(3===r){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:qi(e.auth),p256dh:qi(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:qi(e.vapidKey)}}}else if(4===r){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:qi(e.auth),p256dh:qi(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:qi(e.vapidKey)}}}}});return n.close(),await wr(Ki),await wr("fcm_vapid_details_db"),await wr("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await Xi(e,t),t}}async function Xi(e,t){const n=Ji(e),r=(await Qi()).transaction(Hi,"readwrite");return await r.objectStore(Hi).put(t,n),await r.done,t}function Ji({appConfig:e}){return e.appId}const Zi=new Un("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function es(e,t){var n;const r={method:"DELETE",headers:await ns(e)};try{const n=await fetch(`${ts(e.appConfig)}/${t}`,r),i=await n.json();if(i.error){const e=i.error.message;throw Zi.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw Zi.create("token-unsubscribe-failed",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()})}}function ts({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}async function ns({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function rs({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==ji&&(i.web.applicationPubKey=r),i}async function is(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$i(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:qi(t.getKey("auth")),p256dh:qi(t.getKey("p256dh"))},r=await Yi(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){var n;const r=await ns(e),i=rs(t.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{const n=await fetch(`${ts(e.appConfig)}/${t.token}`,s);o=await n.json()}catch(e){throw Zi.create("token-update-failed",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()})}if(o.error){const e=o.error.message;throw Zi.create("token-update-failed",{errorInfo:e})}if(!o.token)throw Zi.create("token-update-no-token");return o.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await Xi(e.firebaseDependencies,r),n}catch(t){throw await async function(e){const t=await Yi(e.firebaseDependencies);t&&(await es(e.firebaseDependencies,t.token),await async function(e){const t=Ji(e),n=(await Qi()).transaction(Hi,"readwrite");await n.objectStore(Hi).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}(e),t}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await es(e.firebaseDependencies,r.token)}catch(e){console.warn(e)}return ss(e.firebaseDependencies,n)}return ss(e.firebaseDependencies,n)}async function ss(e,t){const n=await async function(e,t){var n;const r=await ns(e),i=rs(t),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{const t=await fetch(ts(e.appConfig),s);o=await t.json()}catch(e){throw Zi.create("token-subscribe-failed",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()})}if(o.error){const e=o.error.message;throw Zi.create("token-subscribe-failed",{errorInfo:e})}if(!o.token)throw Zi.create("token-subscribe-no-token");return o.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await Xi(e,r),r.token}function os(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const u=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(e.fcmOptions.analyticsLabel=u)}(t,e),t}function as(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function us(e){return Zi.create("missing-app-config-values",{valueName:e})}as("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),as("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ls{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw us("App Configuration Object");if(!e.name)throw us("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const e of t)if(!n[e])throw us(e);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function cs(e,t){if(!navigator)throw Zi.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Zi.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=ji)}(e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await async function(e){var t;try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch((()=>{}))}catch(e){throw Zi.create("failed-service-worker-registration",{browserErrorMessage:null===(t=e)||void 0===t?void 0:t.message})}}(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Zi.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),is(e)}async function hs(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===zi.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(os(n)):e.onMessageHandler.next(os(n)));const r=n.data;var i;"object"==typeof(i=r)&&i&&Ui in i&&"1"===r["google.c.a.e"]&&await async function(e,t,n){const r=function(e){switch(e){case zi.NOTIFICATION_CLICKED:return"notification_open";case zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Ui],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}(e,n.messageType,r)}const ds="@firebase/messaging",fs="0.11.0";Rr(new Yn("messaging",(e=>{const t=new ls(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>hs(t,e))),t}),"PUBLIC")),Rr(new Yn("messaging-internal",(e=>{const t=e.getProvider("messaging").getImmediate(),n={getToken:e=>cs(t,e)};return n}),"PRIVATE")),Gr(ds,fs),Gr(ds,fs,"esm2017");class ps{constructor(e,t){this._delegate=e,this.firebase=t,Pr(e,new Yn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Kr(this._delegate))))}_getService(e,t=Dr){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Dr){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Pr(this._delegate,e)}_addOrOverwriteComponent(e){Lr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ms=new Un("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),gs=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e,i={}){const s=zr(e,i);if(zn(n,s.name))return n[s.name];const o=new t(s,r);return n[s.name]=o,o},app:i,registerVersion:Gr,setLogLevel:Wr,onLog:Hr,apps:null,SDK_VERSION:Br,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Rr(e)&&"PUBLIC"===e.type){const o=(e=i())=>{if("function"!=typeof e[s])throw ms.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Pn(o,e.serviceProps),r[s]=o,t.prototype[s]=function(...t){return this._getService.bind(this,n).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!zn(n,e=e||Dr))throw ms.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(ps);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Pn(n,e)},createSubscribe:Kn,ErrorFactory:Un,deepExtend:Pn}),n}(),ys=new or("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ys.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ys.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vs=gs;Gr("@firebase/app-compat","0.1.39",void 0),vs.registerVersion("firebase","9.14.0","app-compat"),Gr("firebase","9.14.0","app");const ws="analytics",bs="https://www.googletagmanager.com/gtag/js",Es=new or("@firebase/analytics");function Ss(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Is=new Un("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ks=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function _s(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ts(e,t=ks,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Is.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Is.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new xs;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Cs({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Cs(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=ks){var s,o;const{appId:a,measurementId:u}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(Is.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(u)return Es.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null===(s=e)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:u};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:_s(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Is.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(a),t}catch(t){const s=t;if(!function(e){if(!(e instanceof jn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(s)){if(i.deleteThrottleMetadata(a),u)return Es.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null==s?void 0:s.message}]`),{appId:a,measurementId:u};throw t}const l=503===Number(null===(o=null==s?void 0:s.customData)||void 0===o?void 0:o.httpStatus)?Wn(n,i.intervalMillis,30):Wn(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(a,c),Es.debug(`Calling attemptFetch again in ${l} millis`),Cs(e,c,r,i)}}class xs{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ds,Ns;async function As(e,t,n,r,i,s,o){var a;const u=Ts(e);u.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Es.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Es.error(e))),t.push(u);const l=async function(){var e;if(!Rn())return Es.warn(Is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Mn()}catch(t){return Es.warn(Is.create("indexeddb-unavailable",{errorInfo:null===(e=t)||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,h]=await Promise.all([u,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(bs)&&n.src.includes(e))return n;return null})(s)||function(e,t){const n=document.createElement("script");n.src=`${bs}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(s,c.measurementId),Ns&&(i("consent","default",Ns),Ns=void 0),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",c.measurementId,d),Ds&&(i("set",Ds),Ds=void 0),c.measurementId}class Os{constructor(e){this.app=e}_delete(){return delete Ps[this.app.options.appId],Promise.resolve()}}let Ps={},Ls=[];const Rs={};let Ms,Fs,Vs="dataLayer",js=!1;function Us(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Is.create("invalid-analytics-context",{errorInfo:t});Es.warn(n.message)}}();const r=e.options.appId;if(!r)throw Is.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Is.create("no-api-key");Es.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ps[r])throw Is.create("already-exists",{id:r});if(!js){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Vs);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function(e,t,n,r){return async function(i,s,o){try{"event"===i?await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Ss(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(e){Es.error(e)}}(e,t,n,s,o):"config"===i?await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Ss(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){Es.error(e)}e("config",i,s)}(e,t,n,r,s,o):"consent"===i?e("consent","update",o):e("set",s)}catch(e){Es.error(e)}}}(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Ps,Ls,Rs,Vs,"gtag");Fs=e,Ms=t,js=!0}return Ps[r]=As(e,Ls,Rs,t,Ms,Vs,n),new Os(e)}const Bs="@firebase/analytics",zs="0.8.4";Rr(new Yn(ws,((e,{options:t})=>Us(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Rr(new Yn("analytics-internal",(function(e){try{const t=e.getProvider(ws).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=Qn(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Fs,Ps[e.app.options.appId],t,n,r).catch((e=>Es.error(e)))}(t,e,n,r)}}catch(e){throw Is.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Gr(Bs,zs),Gr(Bs,zs,"esm2017");var qs,$s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},Ks={},Gs=Gs||{},Hs=$s||self;function Ws(){}function Qs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ys(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Xs="closure_uid_"+(1e9*Math.random()>>>0),Js=0;function Zs(e,t,n){return e.call.apply(e.bind,arguments)}function eo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function to(e,t,n){return(to=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zs:eo).apply(null,arguments)}function no(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ro(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function io(){this.s=this.s,this.o=this.o}io.prototype.s=!1,io.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Xs)&&e[Xs]||(e[Xs]=++Js)}(this)},io.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const so=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function oo(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ao(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(Qs(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function uo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}uo.prototype.h=function(){this.defaultPrevented=!0};var lo=function(){if(!Hs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Hs.addEventListener("test",Ws,t),Hs.removeEventListener("test",Ws,t)}catch(e){}return e}();function co(e){return/^[\s\xa0]*$/.test(e)}var ho=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function fo(e,t){return e<t?-1:e>t?1:0}function po(){var e=Hs.navigator;return e&&(e=e.userAgent)?e:""}function mo(e){return-1!=po().indexOf(e)}function go(e){return go[" "](e),e}go[" "]=Ws;var yo,vo=mo("Opera"),wo=mo("Trident")||mo("MSIE"),bo=mo("Edge"),Eo=bo||wo,So=mo("Gecko")&&!(-1!=po().toLowerCase().indexOf("webkit")&&!mo("Edge"))&&!(mo("Trident")||mo("MSIE"))&&!mo("Edge"),Io=-1!=po().toLowerCase().indexOf("webkit")&&!mo("Edge");function ko(){var e=Hs.document;return e?e.documentMode:void 0}e:{var _o="",To=function(){var e=po();return So?/rv:([^\);]+)(\)|;)/.exec(e):bo?/Edge\/([\d\.]+)/.exec(e):wo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Io?/WebKit\/(\S+)/.exec(e):vo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(To&&(_o=To?To[1]:""),wo){var Co=ko();if(null!=Co&&Co>parseFloat(_o)){yo=String(Co);break e}}yo=_o}var xo,Do={};function No(){return function(e){var t=Do;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let e=0;const t=ho(String(yo)).split("."),n=ho("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=fo(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||fo(0==i[2].length,0==s[2].length)||fo(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}()}()}Hs.document&&wo?xo=ko()||parseInt(yo,10)||void 0:xo=void 0;var Ao=xo;function Oo(e,t){if(uo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(So){e:{try{go(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Po[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Oo.X.h.call(this)}}ro(Oo,uo);var Po={2:"touch",3:"pen",4:"mouse"};Oo.prototype.h=function(){Oo.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Lo="closure_listenable_"+(1e6*Math.random()|0),Ro=0;function Mo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Ro,this.ba=this.ea=!1}function Fo(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Vo(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function jo(e){const t={};for(const n in e)t[n]=e[n];return t}const Uo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bo(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Uo.length;t++)n=Uo[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function zo(e){this.src=e,this.g={},this.h=0}function qo(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=so(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Fo(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $o(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ba&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}zo.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$o(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Mo(t,this.src,s,!!r,i)).ea=n,e.push(t)),t};var Ko="closure_lm_"+(1e6*Math.random()|0),Go={};function Ho(e,t,n,r,i){if(r&&r.once)return Qo(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ho(e,t[s],n,r,i);return null}return n=na(n),e&&e[Lo]?e.N(t,n,Ys(r)?!!r.capture:!!r,i):Wo(e,t,n,!1,r,i)}function Wo(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Ys(i)?!!i.capture:!!i,a=ea(e);if(a||(e[Ko]=a=new zo(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=Zo;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)lo||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Qo(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qo(e,t[s],n,r,i);return null}return n=na(n),e&&e[Lo]?e.O(t,n,Ys(r)?!!r.capture:!!r,i):Wo(e,t,n,!0,r,i)}function Yo(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Yo(e,t[s],n,r,i);else r=Ys(r)?!!r.capture:!!r,n=na(n),e&&e[Lo]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=$o(s=e.g[t],n,r,i))&&(Fo(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=ea(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$o(t,n,r,i)),(n=-1<e?t[e]:null)&&Xo(n))}function Xo(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Lo])qo(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ea(t))?(qo(n,e),0==n.h&&(n.src=null,t[Ko]=null)):Fo(e)}}}function Jo(e){return e in Go?Go[e]:Go[e]="on"+e}function Zo(e,t){if(e.ba)e=!0;else{t=new Oo(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Xo(e),e=n.call(r,t)}return e}function ea(e){return(e=e[Ko])instanceof zo?e:null}var ta="__closure_events_fn_"+(1e9*Math.random()>>>0);function na(e){return"function"==typeof e?e:(e[ta]||(e[ta]=function(t){return e.handleEvent(t)}),e[ta])}function ra(){io.call(this),this.i=new zo(this),this.P=this,this.I=null}function ia(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new uo(t,e);else if(t instanceof uo)t.target=t.target||e;else{var i=t;Bo(t=new uo(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=sa(o,r,!0,t)&&i}if(i=sa(o=t.g=e,r,!0,t)&&i,i=sa(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=sa(o=t.g=n[s],r,!1,t)&&i}function sa(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&qo(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ro(ra,io),ra.prototype[Lo]=!0,ra.prototype.removeEventListener=function(e,t,n,r){Yo(this,e,t,n,r)},ra.prototype.M=function(){if(ra.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fo(n[r]);delete t.g[e],t.h--}}this.I=null},ra.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ra.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var oa=Hs.JSON.stringify;function aa(){var e=pa;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ua,la=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ca),(e=>e.reset()));class ca{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ha(e){Hs.setTimeout((()=>{throw e}),0)}function da(e,t){ua||function(){var e=Hs.Promise.resolve(void 0);ua=function(){e.then(ma)}}(),fa||(ua(),fa=!0),pa.add(e,t)}var fa=!1,pa=new class{constructor(){this.h=this.g=null}add(e,t){const n=la.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function ma(){for(var e;e=aa();){try{e.h.call(e.g)}catch(e){ha(e)}var t=la;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}fa=!1}function ga(e,t){ra.call(this),this.h=e||1,this.g=t||Hs,this.j=to(this.lb,this),this.l=Date.now()}function ya(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function va(e,t,n){if("function"==typeof e)n&&(e=to(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=to(e.handleEvent,e)}return 2147483647<Number(t)?-1:Hs.setTimeout(e,t||0)}function wa(e){e.g=va((()=>{e.g=null,e.i&&(e.i=!1,wa(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ro(ga,ra),(qs=ga.prototype).ca=!1,qs.R=null,qs.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ia(this,"tick"),this.ca&&(ya(this),this.start()))}},qs.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qs.M=function(){ga.X.M.call(this),ya(this),delete this.g};class ba extends io{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wa(this)}M(){super.M(),this.g&&(Hs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ea(e){io.call(this),this.h=e,this.g={}}ro(Ea,io);var Sa=[];function Ia(e,t,n,r){Array.isArray(n)||(n&&(Sa[0]=n.toString()),n=Sa);for(var i=0;i<n.length;i++){var s=Ho(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ka(e){Vo(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Xo(e)}),e),e.g={}}function _a(){this.g=!0}function Ta(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return oa(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ea.prototype.M=function(){Ea.X.M.call(this),ka(this)},Ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_a.prototype.Aa=function(){this.g=!1},_a.prototype.info=function(){};var Ca={},xa=null;function Da(){return xa=xa||new ra}function Na(e){uo.call(this,Ca.Pa,e)}function Aa(e){const t=Da();ia(t,new Na(t))}function Oa(e,t){uo.call(this,Ca.STAT_EVENT,e),this.stat=t}function Pa(e){const t=Da();ia(t,new Oa(t,e))}function La(e,t){uo.call(this,Ca.Qa,e),this.size=t}function Ra(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Hs.setTimeout((function(){e()}),t)}Ca.Pa="serverreachability",ro(Na,uo),Ca.STAT_EVENT="statevent",ro(Oa,uo),Ca.Qa="timingevent",ro(La,uo);var Ma={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Fa={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Va(){}function ja(e){return e.h||(e.h=e.i())}function Ua(){}Va.prototype.h=null;var Ba,za={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function qa(){uo.call(this,"d")}function $a(){uo.call(this,"c")}function Ka(){}function Ga(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Ea(this),this.O=Wa,e=Eo?125:void 0,this.T=new ga(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ha}function Ha(){this.i=null,this.g="",this.h=!1}ro(qa,uo),ro($a,uo),ro(Ka,Va),Ka.prototype.g=function(){return new XMLHttpRequest},Ka.prototype.i=function(){return{}},Ba=new Ka;var Wa=45e3,Qa={},Ya={};function Xa(e,t,n){e.K=1,e.v=gu(hu(t)),e.s=n,e.P=!0,Ja(e,null)}function Ja(e,t){e.F=Date.now(),nu(e),e.A=hu(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Du(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Ha,e.g=xl(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ba(to(e.La,e,e.g),e.N)),Ia(e.S,e.g,"readystatechange",e.ib),t=e.H?jo(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Aa(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Za(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Da}function eu(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=tu(e,n),r==Ya){4==t&&(e.o=4,Pa(14),i=!1),Ta(e.j,e.m,null,"[Incomplete Response]");break}if(r==Qa){e.o=4,Pa(15),Ta(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ta(e.j,e.m,r,null),au(e,r)}Za(e)&&r!=Ya&&r!=Qa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Pa(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),bl(t),t.K=!0,Pa(11))):(Ta(e.j,e.m,n,"[Invalid Chunked Response]"),ou(e),su(e))}function tu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ya:(n=Number(t.substring(n,r)),isNaN(n)?Qa:(r+=1)+n>t.length?Ya:(t=t.substr(r,n),e.C=r+n,t))}function nu(e){e.V=Date.now()+e.O,ru(e,e.O)}function ru(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ra(to(e.gb,e),t)}function iu(e){e.B&&(Hs.clearTimeout(e.B),e.B=null)}function su(e){0==e.l.G||e.I||Il(e.l,e)}function ou(e){iu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ya(e.T),ka(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function au(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ru(n.h,e)))if(!e.J&&Ru(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Sl(n),dl(n)}wl(n),Pa(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Ra(to(n.cb,n),6e3));if(1>=Lu(n.h)&&n.ja){try{n.ja()}catch(e){}n.ja=void 0}}else _l(n,11)}else if((e.J||n.g==e)&&Sl(n),!co(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.I=l[1],n.ka=l[2];const t=l[3];null!=t&&(n.ma=t,n.j.info("VER="+n.ma));const i=l[4];null!=i&&(n.Ca=i,n.j.info("SVER="+n.Ca));const c=l[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Mu(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.za=e,mu(r.F,r.D,e))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=e;if((r=n).sa=Cl(r,r.H?r.ka:null,r.V),o.J){Fu(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(iu(a),nu(a)),r.g=o}else vl(r);0<n.i.length&&pl(n)}else"stop"!=l[0]&&"close"!=l[0]||_l(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?_l(n,7):hl(n):"noop"!=l[0]&&n.l&&n.l.wa(l),n.A=0)}Aa()}catch(e){}}function uu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Qs(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Qs(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Qs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(qs=Ga.prototype).setTimeout=function(e){this.O=e},qs.ib=function(e){e=e.target;const t=this.L;t&&3==sl(e)?t.l():this.La(e)},qs.La=function(e){try{if(e==this.g)e:{const c=sl(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>c)&&(3!=c||Eo||this.g&&(this.h.h||this.g.fa()||ol(this.g)))){this.I||4!=c||7==t||Aa(),iu(this);var n=this.g.aa();this.Y=n;t:if(Za(this)){var r=ol(this.g);e="";var i=r.length,s=4==sl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ou(this),su(this);var o="";break t}this.h.i=new Hs.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!co(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Pa(12),ou(this),su(this);break e}Ta(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,au(this,n)}this.P?(eu(this,c,o),Eo&&this.i&&3==c&&(Ia(this.S,this.T,"tick",this.hb),this.T.start())):(Ta(this.j,this.m,o,null),au(this,o)),4==c&&ou(this),this.i&&!this.I&&(4==c?Il(this.l,this):(this.i=!1,nu(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Pa(12)):(this.o=0,Pa(13)),ou(this),su(this)}}}catch(e){}},qs.hb=function(){if(this.g){var e=sl(this.g),t=this.g.fa();this.C<t.length&&(iu(this),eu(this,e,t),this.i&&4!=e&&nu(this))}},qs.cancel=function(){this.I=!0,ou(this)},qs.gb=function(){this.B=null;const e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Aa(),Pa(17)),ou(this),this.o=2,su(this)):ru(this,this.V-e)};var lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cu(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof cu){this.h=void 0!==t?t:e.h,du(this,e.j),this.s=e.s,this.g=e.g,fu(this,e.m),this.l=e.l,t=e.i;var n=new _u;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pu(this,n),this.o=e.o}else e&&(n=String(e).match(lu))?(this.h=!!t,du(this,n[1]||"",!0),this.s=yu(n[2]||""),this.g=yu(n[3]||"",!0),fu(this,n[4]),this.l=yu(n[5]||"",!0),pu(this,n[6]||"",!0),this.o=yu(n[7]||"")):(this.h=!!t,this.i=new _u(null,this.h))}function hu(e){return new cu(e)}function du(e,t,n){e.j=n?yu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function fu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function pu(e,t,n){t instanceof _u?(e.i=t,function(e,t){t&&!e.j&&(Tu(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Cu(this,t),Du(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vu(t,Iu)),e.i=new _u(t,e.h))}function mu(e,t,n){e.i.set(t,n)}function gu(e){return mu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vu(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,wu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}cu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vu(t,bu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vu(t,bu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vu(n,"/"==n.charAt(0)?Su:Eu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vu(n,ku)),e.join("")};var bu=/[#\/\?@]/g,Eu=/[#\?:]/g,Su=/[#\?]/g,Iu=/[#\?@]/g,ku=/#/g;function _u(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Tu(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Cu(e,t){Tu(e),t=Nu(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xu(e,t){return Tu(e),t=Nu(e,t),e.g.has(t)}function Du(e,t,n){Cu(e,t),0<n.length&&(e.i=null,e.g.set(Nu(e,t),oo(n)),e.h+=n.length)}function Nu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Au(e){this.l=e||Ou,e=Hs.PerformanceNavigationTiming?0<(e=Hs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Hs.g&&Hs.g.Ga&&Hs.g.Ga()&&Hs.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qs=_u.prototype).add=function(e,t){Tu(this),this.i=null,e=Nu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},qs.forEach=function(e,t){Tu(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},qs.oa=function(){Tu(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},qs.W=function(e){Tu(this);let t=[];if("string"==typeof e)xu(this,e)&&(t=t.concat(this.g.get(Nu(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},qs.set=function(e,t){return Tu(this),this.i=null,xu(this,e=Nu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},qs.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},qs.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ou=10;function Pu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Lu(e){return e.h?1:e.g?e.g.size:0}function Ru(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Mu(e,t){e.g?e.g.add(t):e.h=t}function Fu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Vu(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return oo(e.i)}function ju(){}function Uu(){this.g=new ju}function Bu(e,t,n){const r=n||"";try{uu(e,(function(e,n){let i=e;Ys(e)&&(i=oa(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function zu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function qu(e){this.l=e.ac||null,this.j=e.jb||!1}function $u(e,t){ra.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ku,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Au.prototype.cancel=function(){if(this.i=Vu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},ju.prototype.stringify=function(e){return Hs.JSON.stringify(e,void 0)},ju.prototype.parse=function(e){return Hs.JSON.parse(e,void 0)},ro(qu,Va),qu.prototype.g=function(){return new $u(this.l,this.j)},qu.prototype.i=function(e){return function(){return e}}({}),ro($u,ra);var Ku=0;function Gu(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Hu(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wu(e)}function Wu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(qs=$u.prototype).open=function(e,t){if(this.readyState!=Ku)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wu(this)},qs.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Hs).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},qs.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hu(this)),this.readyState=Ku},qs.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wu(this)),this.g&&(this.readyState=3,Wu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Hs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gu(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},qs.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hu(this):Wu(this),3==this.readyState&&Gu(this)}},qs.Va=function(e){this.g&&(this.response=this.responseText=e,Hu(this))},qs.Ua=function(e){this.g&&(this.response=e,Hu(this))},qs.ga=function(){this.g&&Hu(this)},qs.setRequestHeader=function(e,t){this.v.append(e,t)},qs.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},qs.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($u.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qu=Hs.JSON.parse;function Yu(e){ra.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xu,this.K=this.L=!1}ro(Yu,ra);var Xu="",Ju=/^https?$/i,Zu=["POST","PUT"];function el(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,tl(e),rl(e)}function tl(e){e.D||(e.D=!0,ia(e,"complete"),ia(e,"error"))}function nl(e){if(e.h&&void 0!==Gs&&(!e.C[1]||4!=sl(e)||2!=e.aa()))if(e.v&&4==sl(e))va(e.Ha,0,e);else if(ia(e,"readystatechange"),4==sl(e)){e.h=!1;try{const a=e.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(lu)[1]||null;if(!i&&Hs.self&&Hs.self.location){var s=Hs.self.location.protocol;i=s.substr(0,s.length-1)}r=!Ju.test(i?i.toLowerCase():"")}n=r}if(n)ia(e,"complete"),ia(e,"success");else{e.m=6;try{var o=2<sl(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.aa()+"]",tl(e)}}finally{rl(e)}}}function rl(e,t){if(e.g){il(e);const n=e.g,r=e.C[0]?Ws:null;e.g=null,e.C=null,t||ia(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function il(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Hs.clearTimeout(e.A),e.A=null)}function sl(e){return e.g?e.g.readyState:0}function ol(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Xu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function al(e){let t="";return Vo(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ul(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=al(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):mu(e,t,n))}function ll(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cl(e){this.Ca=0,this.i=[],this.j=new _a,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ll("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ll("baseRetryDelayMs",5e3,e),this.bb=ll("retryDelaySeedMs",1e4,e),this.$a=ll("forwardChannelMaxRetries",2,e),this.ta=ll("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Au(e&&e.concurrentRequestLimit),this.Fa=new Uu,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function hl(e){if(fl(e),3==e.G){var t=e.U++,n=hu(e.F);mu(n,"SID",e.I),mu(n,"RID",t),mu(n,"TYPE","terminate"),gl(e,n),(t=new Ga(e,e.j,t,void 0)).K=2,t.v=gu(hu(n)),n=!1,Hs.navigator&&Hs.navigator.sendBeacon&&(n=Hs.navigator.sendBeacon(t.v.toString(),"")),!n&&Hs.Image&&((new Image).src=t.v,n=!0),n||(t.g=xl(t.l,null),t.g.da(t.v)),t.F=Date.now(),nu(t)}Tl(e)}function dl(e){e.g&&(bl(e),e.g.cancel(),e.g=null)}function fl(e){dl(e),e.u&&(Hs.clearTimeout(e.u),e.u=null),Sl(e),e.h.cancel(),e.m&&("number"==typeof e.m&&Hs.clearTimeout(e.m),e.m=null)}function pl(e){Pu(e.h)||e.m||(e.m=!0,da(e.Ja,e),e.C=0)}function ml(e,t){var n;n=t?t.m:e.U++;const r=hu(e.F);mu(r,"SID",e.I),mu(r,"RID",n),mu(r,"AID",e.T),gl(e,r),e.o&&e.s&&ul(r,e.o,e.s),n=new Ga(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=yl(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Mu(e.h,n),Xa(n,r,t)}function gl(e,t){e.ia&&Vo(e.ia,(function(e,n){mu(t,n,e)})),e.l&&uu({},(function(e,n){mu(t,n,e)}))}function yl(e,t,n){n=Math.min(e.i.length,n);var r=e.l?to(e.l.Ra,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{Bu(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function vl(e){e.g||e.u||(e.Z=1,da(e.Ia,e),e.A=0)}function wl(e){return!(e.g||e.u||3<=e.A||(e.Z++,e.u=Ra(to(e.Ia,e),kl(e,e.A)),e.A++,0))}function bl(e){null!=e.B&&(Hs.clearTimeout(e.B),e.B=null)}function El(e){e.g=new Ga(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=hu(e.sa);mu(t,"RID","rpc"),mu(t,"SID",e.I),mu(t,"CI",e.L?"0":"1"),mu(t,"AID",e.T),mu(t,"TYPE","xmlhttp"),gl(e,t),e.o&&e.s&&ul(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=gu(hu(t)),n.s=null,n.P=!0,Ja(n,e)}function Sl(e){null!=e.v&&(Hs.clearTimeout(e.v),e.v=null)}function Il(e,t){var n=null;if(e.g==t){Sl(e),bl(e),e.g=null;var r=2}else{if(!Ru(e.h,t))return;n=t.D,Fu(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ia(r=Da(),new La(r,n)),pl(e)}else vl(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Lu(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.C>=(e.Za?0:e.$a)||(e.m=Ra(to(e.Ja,e,t),kl(e,e.C)),e.C++,0)))}(e,t)||2==r&&wl(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:_l(e,5);break;case 4:_l(e,10);break;case 3:_l(e,6);break;default:_l(e,2)}}function kl(e,t){let n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function _l(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=to(e.kb,e);n||(n=new cu("//www.google.com/images/cleardot.gif"),Hs.location&&"http"==Hs.location.protocol||du(n,"https"),gu(n)),function(e,t){const n=new _a;if(Hs.Image){const r=new Image;r.onload=no(zu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=no(zu,n,r,"TestLoadImage: error",!1,t),r.onabort=no(zu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=no(zu,n,r,"TestLoadImage: timeout",!1,t),Hs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Pa(2);e.G=0,e.l&&e.l.va(t),Tl(e),fl(e)}function Tl(e){if(e.G=0,e.la=[],e.l){const t=Vu(e.h);0==t.length&&0==e.i.length||(ao(e.la,t),ao(e.la,e.i),e.h.i.length=0,oo(e.i),e.i.length=0),e.l.ua()}}function Cl(e,t,n){var r=n instanceof cu?hu(n):new cu(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),fu(r,r.m);else{var i=Hs.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new cu(null,void 0);r&&du(s,r),t&&(s.g=t),i&&fu(s,i),n&&(s.l=n),r=s}return n=e.D,t=e.za,n&&t&&mu(r,n,t),mu(r,"VER",e.ma),gl(e,r),r}function xl(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Yu(new qu({jb:!0})):new Yu(e.ra)).Ka(e.H),t}function Dl(){}function Nl(){if(wo&&!(10<=Number(Ao)))throw Error("Environmental error: no available transport.")}function Al(e,t){ra.call(this),this.g=new cl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!co(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!co(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Ll(this)}function Ol(e){qa.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Pl(){$a.call(this),this.status=1}function Ll(e){this.g=e}(qs=Yu.prototype).Ka=function(e){this.L=e},qs.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ba.g(),this.C=this.u?ja(this.u):ja(Ba),this.g.onreadystatechange=to(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void el(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Hs.FormData&&e instanceof Hs.FormData,!(0<=so(Zu,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{il(this),0<this.B&&((this.K=function(e){return wo&&No()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=to(this.qa,this)):this.A=va(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){el(this,e)}},qs.qa=function(){void 0!==Gs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ia(this,"timeout"),this.abort(8))},qs.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ia(this,"complete"),ia(this,"abort"),rl(this))},qs.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rl(this,!0)),Yu.X.M.call(this)},qs.Ha=function(){this.s||(this.F||this.v||this.l?nl(this):this.fb())},qs.fb=function(){nl(this)},qs.aa=function(){try{return 2<sl(this)?this.g.status:-1}catch(e){return-1}},qs.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},qs.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qu(t)}},qs.Ea=function(){return this.m},qs.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(qs=cl.prototype).ma=8,qs.G=1,qs.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ga(this,this.j,e,void 0);let s=this.s;if(this.S&&(s?(s=jo(s),Bo(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=yl(this,i,t),mu(n=hu(this.F),"RID",e),mu(n,"CVER",22),this.D&&mu(n,"X-HTTP-Session-Id",this.D),gl(this,n),s&&(this.N?t="headers="+encodeURIComponent(String(al(s)))+"&"+t:this.o&&ul(n,this.o,s)),Mu(this.h,i),this.Ya&&mu(n,"TYPE","init"),this.O?(mu(n,"$req",t),mu(n,"SID","null"),i.Z=!0,Xa(i,n,null)):Xa(i,n,t),this.G=2}}else 3==this.G&&(e?ml(this,e):0==this.i.length||Pu(this.h)||ml(this))},qs.Ia=function(){if(this.u=null,El(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Ra(to(this.eb,this),e)}},qs.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Pa(10),dl(this),El(this))},qs.cb=function(){null!=this.v&&(this.v=null,dl(this),wl(this),Pa(19))},qs.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Pa(2)):(this.j.info("Failed to ping google.com"),Pa(1))},(qs=Dl.prototype).xa=function(){},qs.wa=function(){},qs.va=function(){},qs.ua=function(){},qs.Ra=function(){},Nl.prototype.g=function(e,t){return new Al(e,t)},ro(Al,ra),Al.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Pa(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Cl(e,null,e.V),pl(e)},Al.prototype.close=function(){hl(this.g)},Al.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oa(e),e=n);t.i.push(new class{constructor(e,t){this.h=e,this.g=t}}(t.ab++,e)),3==t.G&&pl(t)},Al.prototype.M=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,Al.X.M.call(this)},ro(Ol,qa),ro(Pl,$a),ro(Ll,Dl),Ll.prototype.xa=function(){ia(this.g,"a")},Ll.prototype.wa=function(e){ia(this.g,new Ol(e))},Ll.prototype.va=function(e){ia(this.g,new Pl)},Ll.prototype.ua=function(){ia(this.g,"b")},Nl.prototype.createWebChannel=Nl.prototype.g,Al.prototype.send=Al.prototype.u,Al.prototype.open=Al.prototype.m,Al.prototype.close=Al.prototype.close,Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,Fa.COMPLETE="complete",Ua.EventType=za,za.OPEN="a",za.CLOSE="b",za.ERROR="c",za.MESSAGE="d",ra.prototype.listen=ra.prototype.N,Yu.prototype.listenOnce=Yu.prototype.O,Yu.prototype.getLastError=Yu.prototype.Oa,Yu.prototype.getLastErrorCode=Yu.prototype.Ea,Yu.prototype.getStatus=Yu.prototype.aa,Yu.prototype.getResponseJson=Yu.prototype.Sa,Yu.prototype.getResponseText=Yu.prototype.fa,Yu.prototype.send=Yu.prototype.da,Yu.prototype.setWithCredentials=Yu.prototype.Ka;var Rl=Ks.createWebChannelTransport=function(){return new Nl},Ml=Ks.getStatEventTarget=function(){return Da()},Fl=Ks.ErrorCode=Ma,Vl=Ks.EventType=Fa,jl=Ks.Event=Ca,Ul=Ks.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Bl=Ks.FetchXmlHttpFactory=qu,zl=Ks.WebChannel=Ua,ql=Ks.XhrIo=Yu;const $l="@firebase/firestore";class Kl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kl.UNAUTHENTICATED=new Kl(null),Kl.GOOGLE_CREDENTIALS=new Kl("google-credentials-uid"),Kl.FIRST_PARTY=new Kl("first-party-uid"),Kl.MOCK_USER=new Kl("mock-user");let Gl="9.14.0";const Hl=new or("@firebase/firestore");function Wl(){return Hl.logLevel}function Ql(e,...t){if(Hl.logLevel<=tr.DEBUG){const n=t.map(Jl);Hl.debug(`Firestore (${Gl}): ${e}`,...n)}}function Yl(e,...t){if(Hl.logLevel<=tr.ERROR){const n=t.map(Jl);Hl.error(`Firestore (${Gl}): ${e}`,...n)}}function Xl(e,...t){if(Hl.logLevel<=tr.WARN){const n=t.map(Jl);Hl.warn(`Firestore (${Gl}): ${e}`,...n)}}function Jl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Zl(e="Unexpected state"){const t=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: `+e;throw Yl(t),new Error(t)}function ec(e,t){e||Zl()}function tc(e,t){return e}const nc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rc extends jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ic{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class sc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kl.UNAUTHENTICATED)))}shutdown(){}}class ac{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uc{constructor(e){this.t=e,this.currentUser=Kl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ic;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ic,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ql("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ql("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ic)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ql("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ec("string"==typeof t.accessToken),new sc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ec(null===e||"string"==typeof e),new Kl(e)}}class lc{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r,this.type="FirstParty",this.user=Kl.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ec(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class cc{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r}getToken(){return Promise.resolve(new lc(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable((()=>t(Kl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dc{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=e=>{null!=e.error&&Ql("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.A;return this.A=e.token,Ql("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ql("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?r(e):Ql("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ec("string"==typeof e.token),this.A=e.token,new hc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class pc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=fc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function mc(e,t){return e<t?-1:e>t?1:0}function gc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function yc(e){return e+"\0"}class vc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new rc(nc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new rc(nc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new rc(nc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rc(nc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vc.fromMillis(Date.now())}static fromDate(e){return vc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new vc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mc(this.nanoseconds,e.nanoseconds):mc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wc(e)}static min(){return new wc(new vc(0,0))}static max(){return new wc(new vc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Zl(),void 0===n?n=e.length-t:n>e.length-t&&Zl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===bc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ec extends bc{construct(e,t,n){return new Ec(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new rc(nc.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Ec(t)}static emptyPath(){return new Ec([])}}const Sc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ic extends bc{construct(e,t,n){return new Ic(e,t,n)}static isValidIdentifier(e){return Sc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ic.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ic(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new rc(nc.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new rc(nc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new rc(nc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new rc(nc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ic(t)}static emptyPath(){return new Ic([])}}class kc{constructor(e){this.path=e}static fromPath(e){return new kc(Ec.fromString(e))}static fromName(e){return new kc(Ec.fromString(e).popFirst(5))}static empty(){return new kc(Ec.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ec.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ec.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kc(new Ec(e.slice()))}}class _c{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Tc(e){return e.fields.find((e=>2===e.kind))}function Cc(e){return e.fields.filter((e=>2!==e.kind))}_c.UNKNOWN_ID=-1;class xc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Dc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Dc(0,Oc.min())}}function Nc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=wc.fromTimestamp(1e9===r?new vc(n+1,0):new vc(n,r));return new Oc(i,kc.empty(),t)}function Ac(e){return new Oc(e.readTime,e.key,-1)}class Oc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Oc(wc.min(),kc.empty(),-1)}static max(){return new Oc(wc.max(),kc.empty(),-1)}}function Pc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=kc.comparator(e.documentKey,t.documentKey),0!==n?n:mc(e.largestBatchId,t.largestBatchId))}const Lc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Mc(e){if(e.code!==nc.FAILED_PRECONDITION||e.message!==Lc)throw e;Ql("LocalStore","Unexpectedly lost primary lease")}class Fc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Fc?t:Fc.resolve(t)}catch(e){return Fc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Fc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Fc.reject(t)}static resolve(e){return new Fc(((t,n)=>{t(e)}))}static reject(e){return new Fc(((t,n)=>{n(e)}))}static waitFor(e){return new Fc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Fc.resolve(!1);for(const n of e)t=t.next((e=>e?Fc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Fc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const u=a;t(e[u]).next((e=>{s[u]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Fc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Vc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ic,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Bc(e,t.error)):this.P.resolve()},this.transaction.onerror=t=>{const n=Gc(t.target.error);this.P.reject(new Bc(e,n))}}static open(e,t,n,r){try{return new Vc(t,e.transaction(r,n))}catch(e){throw new Bc(t,e)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ql("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qc(t)}}class jc{constructor(e,t,n){this.name=e,this.version=t,this.S=n,12.2===jc.D(Ln())&&Yl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ql("SimpleDb","Removing database:",e),$c(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Rn())return!1;if(jc.N())return!0;const e=Ln(),t=jc.D(e),n=0<t&&t<10,r=jc.k(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static k(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async F(e){return this.db||(Ql("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Bc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new rc(nc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new rc(nc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Bc(e,r))},r.onupgradeneeded=e=>{Ql("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.S.$(t,r.transaction,e.oldVersion,this.version).next((()=>{Ql("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.F(e);const t=Vc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.V(),e))).catch((e=>(t.abort(e),Fc.reject(e)))).toPromise();return s.catch((()=>{})),await t.v,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ql("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Uc{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return $c(this.U.delete())}}class Bc extends rc{constructor(e,t){super(nc.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zc(e){return"IndexedDbTransactionError"===e.name}class qc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ql("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ql("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$c(n)}add(e){return Ql("SimpleDb","ADD",this.store.name,e,e),$c(this.store.add(e))}get(e){return $c(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ql("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ql("SimpleDb","DELETE",this.store.name,e),$c(this.store.delete(e))}count(){return Ql("SimpleDb","COUNT",this.store.name),$c(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.H(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Fc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}J(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Fc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}Y(e,t){Ql("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}tt(e){const t=this.cursor({});return new Fc(((n,r)=>{t.onerror=e=>{const t=Gc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}H(e,t){const n=[];return new Fc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Uc(i),o=t(i.primaryKey,i.value,s);if(o instanceof Fc){const e=o.catch((e=>(s.done(),Fc.reject(e))));n.push(e)}s.isDone?r():null===s.G?i.continue():i.continue(s.G)}})).next((()=>Fc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $c(e){return new Fc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Gc(e.target.error);n(t)}}))}let Kc=!1;function Gc(e){const t=jc.D(Ln());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new rc("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kc||(Kc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Hc{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){Ql("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ql("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(e){zc(e)?Ql("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Mc(e)}await this.nt(6e4)}))}}class Wc{constructor(e,t){this.localStore=e,this.persistence=t}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.it(t,e)))}it(e,t){const n=new Set;let r=t,i=!0;return Fc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ql("IndexBackiller",`Processing collection: ${t}`),this.rt(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}rt(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ot(r,n))).next((n=>(Ql("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ot(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ac(t);Pc(r,n)>0&&(n=r)})),new Oc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ut(e),this.ct=e=>t.writeSequenceNumber(e))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Yc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Jc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Qc.at=-1;class Zc{constructor(e,t){this.comparator=e,this.root=t||th.EMPTY}insert(e,t){return new Zc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,th.BLACK,null,null))}remove(e){return new Zc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,th.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class th{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:th.RED,this.left=null!=r?r:th.EMPTY,this.right=null!=i?i:th.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new th(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return th.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return th.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,th.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,th.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Zl();if(this.right.isRed())throw Zl();const e=this.left.check();if(e!==this.right.check())throw Zl();return e+(this.isRed()?0:1)}}th.EMPTY=null,th.RED=!0,th.BLACK=!1,th.EMPTY=new class{constructor(){this.size=0}get key(){throw Zl()}get value(){throw Zl()}get color(){throw Zl()}get left(){throw Zl()}get right(){throw Zl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new th(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nh{constructor(e){this.comparator=e,this.data=new Zc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rh(this.data.getIterator())}getIteratorFrom(e){return new rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof nh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nh(this.comparator);return t.data=e,t}}class rh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ih(e){return e.hasNext()?e.getNext():void 0}class sh{constructor(e){this.fields=e,e.sort(Ic.comparator)}static empty(){return new sh([])}unionWith(e){let t=new nh(Ic.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new sh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class oh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new oh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oh.EMPTY_BYTE_STRING=new oh("");const ah=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uh(e){if(ec(!!e),"string"==typeof e){let t=0;const n=ah.exec(e);if(ec(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:lh(e.seconds),nanos:lh(e.nanos)}}function lh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ch(e){return"string"==typeof e?oh.fromBase64String(e):oh.fromUint8Array(e)}function hh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dh(e){const t=e.mapValue.fields.__previous_value__;return hh(t)?dh(t):t}function fh(e){const t=uh(e.mapValue.fields.__local_write_time__.timestampValue);return new vc(t.seconds,t.nanos)}class ph{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class mh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new mh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof mh&&e.projectId===this.projectId&&e.database===this.database}}function gh(e){return null==e}function yh(e){return 0===e&&1/e==-1/0}function vh(e){return"number"==typeof e&&Number.isInteger(e)&&!yh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const wh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bh={nullValue:"NULL_VALUE"};function Eh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hh(e)?4:Rh(e)?9007199254740991:10:Zl()}function Sh(e,t){if(e===t)return!0;const n=Eh(e);if(n!==Eh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fh(e).isEqual(fh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=uh(e.timestampValue),r=uh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ch(e.bytesValue).isEqual(ch(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lh(e.geoPointValue.latitude)===lh(t.geoPointValue.latitude)&&lh(e.geoPointValue.longitude)===lh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lh(e.integerValue)===lh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=lh(e.doubleValue),r=lh(t.doubleValue);return n===r?yh(n)===yh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return gc(e.arrayValue.values||[],t.arrayValue.values||[],Sh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yc(n)!==Yc(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Sh(n[e],r[e])))return!1;return!0}(e,t);default:return Zl()}}function Ih(e,t){return void 0!==(e.values||[]).find((e=>Sh(e,t)))}function kh(e,t){if(e===t)return 0;const n=Eh(e),r=Eh(t);if(n!==r)return mc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return mc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=lh(e.integerValue||e.doubleValue),r=lh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _h(e.timestampValue,t.timestampValue);case 4:return _h(fh(e),fh(t));case 5:return mc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ch(e),r=ch(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=mc(n[e],r[e]);if(0!==t)return t}return mc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=mc(lh(e.latitude),lh(t.latitude));return 0!==n?n:mc(lh(e.longitude),lh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=kh(n[e],r[e]);if(t)return t}return mc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===wh.mapValue&&t===wh.mapValue)return 0;if(e===wh.mapValue)return 1;if(t===wh.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=mc(r[e],s[e]);if(0!==t)return t;const o=kh(n[r[e]],i[s[e]]);if(0!==o)return o}return mc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Zl()}}function _h(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return mc(e,t);const n=uh(e),r=uh(t),i=mc(n.seconds,r.seconds);return 0!==i?i:mc(n.nanos,r.nanos)}function Th(e){return Ch(e)}function Ch(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=uh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ch(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,kc.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ch(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ch(e.fields[i])}`;return n+"}"}(e.mapValue):Zl();var t,n}function xh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Dh(e){return!!e&&"integerValue"in e}function Nh(e){return!!e&&"arrayValue"in e}function Ah(e){return!!e&&"nullValue"in e}function Oh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ph(e){return!!e&&"mapValue"in e}function Lh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Lh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Rh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mh(e){return"nullValue"in e?bh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?xh(mh.empty(),kc.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Zl()}function Fh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?xh(mh.empty(),kc.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?wh:Zl()}function Vh(e,t){const n=kh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function jh(e,t){const n=kh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Uh{constructor(e){this.value=e}static empty(){return new Uh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lh(t)}setAll(e){let t=Ic.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Lh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ph(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xc(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Uh(Lh(this.value))}}function Bh(e){const t=[];return Xc(e.fields,((e,n)=>{const r=new Ic([e]);if(Ph(n)){const e=Bh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new sh(t)}class zh{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new zh(e,0,wc.min(),wc.min(),Uh.empty(),0)}static newFoundDocument(e,t,n){return new zh(e,1,t,wc.min(),n,0)}static newNoDocument(e,t){return new zh(e,2,t,wc.min(),Uh.empty(),0)}static newUnknownDocument(e,t){return new zh(e,3,t,wc.min(),Uh.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zh(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qh{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ht=null}}function $h(e,t=null,n=[],r=[],i=null,s=null,o=null){return new qh(e,t,n,r,i,s,o)}function Kh(e){const t=tc(e);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+Th(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),gh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Th(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Th(e))).join(",")),t.ht=e}return t.ht}function Gh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ud(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Sh(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cd(e.startAt,t.startAt)&&cd(e.endAt,t.endAt)}function Hh(e){return kc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Wh(e,t){return e.filters.filter((e=>e instanceof Xh&&e.field.isEqual(t)))}function Qh(e,t,n){let r=bh,i=!0;for(const n of Wh(e,t)){let e=bh,t=!0;switch(n.op){case"<":case"<=":e=Mh(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=bh}Vh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Vh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Yh(e,t,n){let r=wh,i=!0;for(const n of Wh(e,t)){let e=wh,t=!0;switch(n.op){case">=":case">":e=Fh(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=wh}jh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];jh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Xh extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,n):new Jh(e,t,n):"array-contains"===t?new nd(e,n):"in"===t?new rd(e,n):"not-in"===t?new id(e,n):"array-contains-any"===t?new sd(e,n):new Xh(e,t,n)}static lt(e,t,n){return"in"===t?new Zh(e,n):new ed(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(kh(t,this.value)):null!==t&&Eh(this.value)===Eh(t)&&this.ft(kh(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zl()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Jh extends Xh{constructor(e,t,n){super(e,t,n),this.key=kc.fromName(n.referenceValue)}matches(e){const t=kc.comparator(e.key,this.key);return this.ft(t)}}class Zh extends Xh{constructor(e,t){super(e,"in",t),this.keys=td(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ed extends Xh{constructor(e,t){super(e,"not-in",t),this.keys=td(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function td(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>kc.fromName(e.referenceValue)))}class nd extends Xh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nh(t)&&Ih(t.arrayValue,this.value)}}class rd extends Xh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ih(this.value.arrayValue,t)}}class id extends Xh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ih(this.value.arrayValue,t)}}class sd extends Xh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ih(this.value.arrayValue,e)))}}class od{constructor(e,t){this.position=e,this.inclusive=t}}class ad{constructor(e,t="asc"){this.field=e,this.dir=t}}function ud(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function ld(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?kc.comparator(kc.fromName(o.referenceValue),n.key):kh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function cd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sh(e.position[n],t.position[n]))return!1;return!0}class hd{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this._t=null,this.wt=null,this.startAt,this.endAt}}function dd(e,t,n,r,i,s,o,a){return new hd(e,t,n,r,i,s,o,a)}function fd(e){return new hd(e)}function pd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function md(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function gd(e){for(const t of e.filters)if(t.dt())return t.field;return null}function yd(e){return null!==e.collectionGroup}function vd(e){const t=tc(e);if(null===t._t){t._t=[];const e=gd(t),n=md(t);if(null!==e&&null===n)e.isKeyField()||t._t.push(new ad(e)),t._t.push(new ad(Ic.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t._t.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new ad(Ic.keyField(),e))}}}return t._t}function wd(e){const t=tc(e);if(!t.wt)if("F"===t.limitType)t.wt=$h(t.path,t.collectionGroup,vd(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of vd(t)){const t="desc"===n.dir?"asc":"desc";e.push(new ad(n.field,t))}const n=t.endAt?new od(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new od(t.startAt.position,t.startAt.inclusive):null;t.wt=$h(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.wt}function bd(e,t,n){return new hd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ed(e,t){return Gh(wd(e),wd(t))&&e.limitType===t.limitType}function Sd(e){return`${Kh(wd(e))}|lt:${e.limitType}`}function Id(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Th(t.value)}`;var t})).join(", ")}]`),gh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Th(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Th(e))).join(",")),`Target(${t})`}(wd(e))}; limitType=${e.limitType})`}function kd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):kc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ld(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vd(e),t)||e.endAt&&!function(e,t,n){const r=ld(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vd(e),t))}(e,t)}function _d(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Td(e){return(t,n)=>{let r=!1;for(const i of vd(e)){const e=Cd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Cd(e,t,n){const r=e.field.isKeyField()?kc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?kh(r,i):Zl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Zl()}}function xd(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(t)?"-0":t}}function Dd(e){return{integerValue:""+e}}function Nd(e,t){return vh(t)?Dd(t):xd(e,t)}class Ad{constructor(){this._=void 0}}function Od(e,t,n){return e instanceof Rd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Md?Fd(e,t):e instanceof Vd?jd(e,t):function(e,t){const n=Ld(e,t),r=Bd(n)+Bd(e.yt);return Dh(n)&&Dh(e.yt)?Dd(r):xd(e.It,r)}(e,t)}function Pd(e,t,n){return e instanceof Md?Fd(e,t):e instanceof Vd?jd(e,t):n}function Ld(e,t){return e instanceof Ud?Dh(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Rd extends Ad{}class Md extends Ad{constructor(e){super(),this.elements=e}}function Fd(e,t){const n=zd(t);for(const t of e.elements)n.some((e=>Sh(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Vd extends Ad{constructor(e){super(),this.elements=e}}function jd(e,t){let n=zd(t);for(const t of e.elements)n=n.filter((e=>!Sh(e,t)));return{arrayValue:{values:n}}}class Ud extends Ad{constructor(e,t){super(),this.It=e,this.yt=t}}function Bd(e){return lh(e.integerValue||e.doubleValue)}function zd(e){return Nh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class qd{constructor(e,t){this.field=e,this.transform=t}}class $d{constructor(e,t){this.version=e,this.transformResults=t}}class Kd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kd}static exists(e){return new Kd(void 0,e)}static updateTime(e){return new Kd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Hd{}function Wd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sf(e.key,Kd.none()):new Zd(e.key,e.data,Kd.none());{const n=e.data,r=Uh.empty();let i=new nh(Ic.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ef(e.key,r,new sh(i.toArray()),Kd.none())}}function Qd(e,t,n){e instanceof Zd?function(e,t,n){const r=e.value.clone(),i=nf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ef?function(e,t,n){if(!Gd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=nf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(tf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yd(e,t,n,r){return e instanceof Zd?function(e,t,n,r){if(!Gd(e.precondition,t))return n;const i=e.value.clone(),s=rf(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ef?function(e,t,n,r){if(!Gd(e.precondition,t))return n;const i=rf(e.fieldTransforms,r,t),s=t.data;return s.setAll(tf(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Gd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ld(r.transform,e||null);null!=i&&(null===n&&(n=Uh.empty()),n.set(r.field,i))}return n||null}function Jd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&gc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Md&&t instanceof Md||e instanceof Vd&&t instanceof Vd?gc(e.elements,t.elements,Sh):e instanceof Ud&&t instanceof Ud?Sh(e.yt,t.yt):e instanceof Rd&&t instanceof Rd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zd extends Hd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ef extends Hd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function nf(e,t,n){const r=new Map;ec(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Pd(o,a,n[i]))}return r}function rf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Od(e,s,t))}return r}class sf extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class of extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class af{constructor(e){this.count=e}}var uf,lf;function cf(e){switch(e){default:return Zl();case nc.CANCELLED:case nc.UNKNOWN:case nc.DEADLINE_EXCEEDED:case nc.RESOURCE_EXHAUSTED:case nc.INTERNAL:case nc.UNAVAILABLE:case nc.UNAUTHENTICATED:return!1;case nc.INVALID_ARGUMENT:case nc.NOT_FOUND:case nc.ALREADY_EXISTS:case nc.PERMISSION_DENIED:case nc.FAILED_PRECONDITION:case nc.ABORTED:case nc.OUT_OF_RANGE:case nc.UNIMPLEMENTED:case nc.DATA_LOSS:return!0}}function hf(e){if(void 0===e)return Yl("GRPC error has no .code"),nc.UNKNOWN;switch(e){case uf.OK:return nc.OK;case uf.CANCELLED:return nc.CANCELLED;case uf.UNKNOWN:return nc.UNKNOWN;case uf.DEADLINE_EXCEEDED:return nc.DEADLINE_EXCEEDED;case uf.RESOURCE_EXHAUSTED:return nc.RESOURCE_EXHAUSTED;case uf.INTERNAL:return nc.INTERNAL;case uf.UNAVAILABLE:return nc.UNAVAILABLE;case uf.UNAUTHENTICATED:return nc.UNAUTHENTICATED;case uf.INVALID_ARGUMENT:return nc.INVALID_ARGUMENT;case uf.NOT_FOUND:return nc.NOT_FOUND;case uf.ALREADY_EXISTS:return nc.ALREADY_EXISTS;case uf.PERMISSION_DENIED:return nc.PERMISSION_DENIED;case uf.FAILED_PRECONDITION:return nc.FAILED_PRECONDITION;case uf.ABORTED:return nc.ABORTED;case uf.OUT_OF_RANGE:return nc.OUT_OF_RANGE;case uf.UNIMPLEMENTED:return nc.UNIMPLEMENTED;case uf.DATA_LOSS:return nc.DATA_LOSS;default:return Zl()}}(lf=uf||(uf={}))[lf.OK=0]="OK",lf[lf.CANCELLED=1]="CANCELLED",lf[lf.UNKNOWN=2]="UNKNOWN",lf[lf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lf[lf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lf[lf.NOT_FOUND=5]="NOT_FOUND",lf[lf.ALREADY_EXISTS=6]="ALREADY_EXISTS",lf[lf.PERMISSION_DENIED=7]="PERMISSION_DENIED",lf[lf.UNAUTHENTICATED=16]="UNAUTHENTICATED",lf[lf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lf[lf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lf[lf.ABORTED=10]="ABORTED",lf[lf.OUT_OF_RANGE=11]="OUT_OF_RANGE",lf[lf.UNIMPLEMENTED=12]="UNIMPLEMENTED",lf[lf.INTERNAL=13]="INTERNAL",lf[lf.UNAVAILABLE=14]="UNAVAILABLE",lf[lf.DATA_LOSS=15]="DATA_LOSS";class df{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xc(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Jc(this.inner)}size(){return this.innerSize}}const ff=new Zc(kc.comparator);function pf(){return ff}const mf=new Zc(kc.comparator);function gf(...e){let t=mf;for(const n of e)t=t.insert(n.key,n);return t}function yf(e){let t=mf;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function vf(){return bf()}function wf(){return bf()}function bf(){return new df((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ef=new Zc(kc.comparator),Sf=new nh(kc.comparator);function If(...e){let t=Sf;for(const n of e)t=t.add(n);return t}const kf=new nh(mc);function _f(){return kf}class Tf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Cf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Tf(wc.min(),r,_f(),pf(),If())}}class Cf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Cf(n,t,If(),If(),If())}}class xf{constructor(e,t,n,r){this.Tt=e,this.removedTargetIds=t,this.key=n,this.Et=r}}class Df{constructor(e,t){this.targetId=e,this.At=t}}class Nf{constructor(e,t,n=oh.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Af{constructor(){this.Rt=0,this.bt=Lf(),this.Pt=oh.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=If(),t=If(),n=If();return this.bt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Zl()}})),new Cf(this.Pt,this.vt,e,t,n)}Nt(){this.Vt=!1,this.bt=Lf()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Of{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=pf(),this.qt=Pf(),this.Kt=new nh(mc)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,(t=>{const n=this.zt(t);switch(e.state){case 0:this.Ht(t)&&n.Ct(e.resumeToken);break;case 1:n.Ft(),n.St||n.Nt(),n.Ct(e.resumeToken);break;case 2:n.Ft(),n.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(n.$t(),n.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),n.Ct(e.resumeToken));break;default:Zl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach(((e,n)=>{this.Ht(n)&&t(n)}))}Yt(e){const t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){const e=r.target;if(Hh(e))if(0===n){const n=new kc(e.path);this.jt(t,n,zh.newNoDocument(n,wc.min()))}else ec(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach(((n,r)=>{const i=this.Xt(r);if(i){if(n.current&&Hh(i.target)){const t=new kc(i.target.path);null!==this.Ut.get(t)||this.ee(r,t)||this.jt(r,t,zh.newNoDocument(t,e))}n.Dt&&(t.set(r,n.xt()),n.Nt())}}));let n=If();this.qt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Ut.forEach(((t,n)=>n.setReadTime(e)));const r=new Tf(e,t,this.Kt,this.Ut,n);return this.Ut=pf(),this.qt=Pf(),this.Kt=new nh(mc),r}Qt(e,t){if(!this.Ht(e))return;const n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,n){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Af,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new nh(mc),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ql("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Af),this.Bt.getRemoteKeysForTarget(e).forEach((t=>{this.jt(e,t,null)}))}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new Zc(kc.comparator)}function Lf(){return new Zc(kc.comparator)}const Rf={asc:"ASCENDING",desc:"DESCENDING"},Mf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ff{constructor(e,t){this.databaseId=e,this.gt=t}}function Vf(e,t){return e.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jf(e,t){return e.gt?t.toBase64():t.toUint8Array()}function Uf(e,t){return Vf(e,t.toTimestamp())}function Bf(e){return ec(!!e),wc.fromTimestamp(function(e){const t=uh(e);return new vc(t.seconds,t.nanos)}(e))}function zf(e,t){return function(e){return new Ec(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qf(e){const t=Ec.fromString(e);return ec(hp(t)),t}function $f(e,t){return zf(e.databaseId,t.path)}function Kf(e,t){const n=qf(t);if(n.get(1)!==e.databaseId.projectId)throw new rc(nc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new rc(nc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new kc(Qf(n))}function Gf(e,t){return zf(e.databaseId,t)}function Hf(e){const t=qf(e);return 4===t.length?Ec.emptyPath():Qf(t)}function Wf(e){return new Ec(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qf(e){return ec(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Yf(e,t,n){return{name:$f(e,t),fields:n.value.mapValue.fields}}function Xf(e,t,n){const r=Kf(e,t.name),i=Bf(t.updateTime),s=new Uh({mapValue:{fields:t.fields}}),o=zh.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Jf(e,t){let n;if(t instanceof Zd)n={update:Yf(e,t.key,t.value)};else if(t instanceof sf)n={delete:$f(e,t.key)};else if(t instanceof ef)n={update:Yf(e,t.key,t.data),updateMask:cp(t.fieldMask)};else{if(!(t instanceof of))return Zl();n={verify:$f(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Rd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Md)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ud)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Zl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Zl()}(e,t.precondition)),n}function Zf(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Kd.updateTime(Bf(e.updateTime)):void 0!==e.exists?Kd.exists(e.exists):Kd.none()}(t.currentDocument):Kd.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)ec("REQUEST_TIME"===t.setToServerValue),n=new Rd;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Md(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Vd(e)}else"increment"in t?n=new Ud(e,t.increment):Zl();const r=Ic.fromServerFormat(t.fieldPath);return new qd(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Kf(e,t.update.name),s=new Uh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new sh(t.map((e=>Ic.fromServerFormat(e))))}(t.updateMask);return new ef(i,s,e,n,r)}return new Zd(i,s,n,r)}if(t.delete){const r=Kf(e,t.delete);return new sf(r,n)}if(t.verify){const r=Kf(e,t.verify);return new of(r,n)}return Zl()}function ep(e,t){return{documents:[Gf(e,t.path)]}}function tp(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Gf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Gf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Oh(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NAN"}};if(Ah(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Oh(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NOT_NAN"}};if(Ah(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:op(e.field),op:sp(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:op(e.field),direction:ip(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.gt||gh(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function np(e){let t=Hf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ec(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=rp(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new ad(ap(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,gh(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new od(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new od(n,t)}(n.endAt)),dd(t,i,o,s,a,"F",u,l)}function rp(e){return e?void 0!==e.unaryFilter?[lp(e)]:void 0!==e.fieldFilter?[up(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>rp(e))).reduce(((e,t)=>e.concat(t))):Zl():[]}function ip(e){return Rf[e]}function sp(e){return Mf[e]}function op(e){return{fieldPath:e.canonicalString()}}function ap(e){return Ic.fromServerFormat(e.fieldPath)}function up(e){return Xh.create(ap(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zl()}}(e.fieldFilter.op),e.fieldFilter.value)}function lp(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ap(e.unaryFilter.field);return Xh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ap(e.unaryFilter.field);return Xh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ap(e.unaryFilter.field);return Xh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ap(e.unaryFilter.field);return Xh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Zl()}}function cp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function hp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function dp(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=pp(t)),t=fp(e.get(n),t);return pp(t)}function fp(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function pp(e){return e+""}function mp(e){const t=e.length;if(ec(t>=2),2===t)return ec(""===e.charAt(0)&&""===e.charAt(1)),Ec.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&Zl(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:Zl()}s=t+2}return new Ec(r)}const gp=["userId","batchId"];function yp(e,t){return[e,dp(t)]}function vp(e,t,n){return[e,dp(t),n]}const wp={},bp=["prefixPath","collectionGroup","readTime","documentId"],Ep=["prefixPath","collectionGroup","documentId"],Sp=["collectionGroup","readTime","prefixPath","documentId"],Ip=["canonicalId","targetId"],kp=["targetId","path"],_p=["path","targetId"],Tp=["collectionId","parent"],Cp=["indexId","uid"],xp=["uid","sequenceNumber"],Dp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Np=["indexId","uid","orderedDocumentKey"],Ap=["userId","collectionPath","documentId"],Op=["userId","collectionPath","largestBatchId"],Pp=["userId","collectionGroup","largestBatchId"],Lp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rp=[...Lp,"documentOverlays"],Mp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fp=Mp,Vp=[...Fp,"indexConfiguration","indexState","indexEntries"];class jp extends Rc{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Up(e,t){const n=tc(e);return jc.M(n.ie,t)}class Bp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Qd(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Yd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Yd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=wf();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Wd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(wc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),If())}isEqual(e){return this.batchId===e.batchId&&gc(this.mutations,e.mutations,((e,t)=>Jd(e,t)))&&gc(this.baseMutations,e.baseMutations,((e,t)=>Jd(e,t)))}}class zp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ec(e.mutations.length===n.length);let r=Ef;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new zp(e,t,n,r)}}class qp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $p{constructor(e,t,n,r,i=wc.min(),s=wc.min(),o=oh.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new $p(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new $p(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new $p(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Kp{constructor(e){this.re=e}}function Gp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:$f(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Vf(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wp(t.version)};else{if(!t.isUnknownDocument())return Zl();r.unknownDocument={path:n.path.toArray(),version:Wp(t.version)}}return r}function Hp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Wp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qp(e){const t=new vc(e.seconds,e.nanoseconds);return wc.fromTimestamp(t)}function Yp(e,t){const n=(t.baseMutations||[]).map((t=>Zf(e.re,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>Zf(e.re,t))),i=vc.fromMillis(t.localWriteTimeMs);return new Bp(t.batchId,i,n,r)}function Xp(e){const t=Qp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Qp(e.lastLimboFreeSnapshotVersion):wc.min();let r;var i;return void 0!==e.query.documents?(ec(1===(i=e.query).documents.length),r=wd(fd(Hf(i.documents[0])))):r=function(e){return wd(np(e))}(e.query),new $p(r,e.targetId,0,e.lastListenSequenceNumber,t,n,oh.fromBase64String(e.resumeToken))}function Jp(e,t){const n=Wp(t.snapshotVersion),r=Wp(t.lastLimboFreeSnapshotVersion);let i;i=Hh(t.target)?ep(e.re,t.target):tp(e.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Kh(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zp(e){const t=np({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bd(t,t.limit,"L"):t}function em(e,t){return new qp(t.largestBatchId,Zf(e.re,t.overlayMutation))}function tm(e,t){const n=t.path.lastSegment();return[e,dp(t.path.popLast()),n]}function nm(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Wp(r.readTime),documentKey:dp(r.documentKey.path),largestBatchId:r.largestBatchId}}class rm{getBundleMetadata(e,t){return im(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Qp(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return im(e).put({bundleId:(n=t).id,createTime:Wp(Bf(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return sm(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Zp(t.bundledQuery),readTime:Qp(t.readTime)};var t}))}saveNamedQuery(e,t){return sm(e).put(function(e){return{name:e.name,readTime:Wp(Bf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function im(e){return Up(e,"bundles")}function sm(e){return Up(e,"namedQueries")}class om{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){const n=t.uid||"";return new om(e,n)}getOverlay(e,t){return am(e).get(tm(this.userId,t)).next((e=>e?em(this.It,e):null))}getOverlays(e,t){const n=vf();return Fc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new qp(t,i);r.push(this.ue(e,s))})),Fc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(dp(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(am(e).Y("collectionPathOverlayIndex",r))})),Fc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=vf(),i=dp(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return am(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=em(this.It,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=vf();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return am(e).Z({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=em(this.It,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ue(e,t){return am(e).put(function(e,t,n){const[r,i,s]=tm(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jf(e.re,n.mutation)}}(this.It,this.userId,t))}}function am(e){return Up(e,"documentOverlays")}class um{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(lh(e.integerValue));else if("doubleValue"in e){const n=lh(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),yh(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.le(t,20),"string"==typeof n?t.de(n):(t.de(`${n.seconds||""}`),t.fe(n.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ch(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.le(t,45),t.fe(n.latitude||0),t.fe(n.longitude||0)}else"mapValue"in e?Rh(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Zl()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const n=e.fields||{};this.le(t,55);for(const e of Object.keys(n))this._e(e,t),this.ae(n[e],t)}pe(e,t){const n=e.values||[];this.le(t,50);for(const e of n)this.ae(e,t)}ge(e,t){this.le(t,37),kc.fromName(e).path.forEach((e=>{this.le(t,60),this.Ie(e,t)}))}le(e,t){e.fe(t)}we(e){e.fe(2)}}function lm(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=lm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}um.Te=new um;class hm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ae(n.value),n=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Pe(n.value),n=t.next();this.ve()}Ve(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ae(e);else if(e<2048)this.Ae(960|e>>>6),this.Ae(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|e>>>12),this.Ae(128|63&e>>>6),this.Ae(128|63&e);else{const e=t.codePointAt(0);this.Ae(240|e>>>18),this.Ae(128|63&e>>>12),this.Ae(128|63&e>>>6),this.Ae(128|63&e)}}this.Re()}Se(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Pe(e);else if(e<2048)this.Pe(960|e>>>6),this.Pe(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|e>>>12),this.Pe(128|63&e>>>6),this.Pe(128|63&e);else{const e=t.codePointAt(0);this.Pe(240|e>>>18),this.Pe(128|63&e>>>12),this.Pe(128|63&e>>>6),this.Pe(128|63&e)}}this.ve()}De(e){const t=this.Ce(e),n=cm(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}Ne(e){const t=this.Ce(e),n=cm(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class dm{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class fm{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class pm{constructor(){this.Be=new hm,this.Le=new dm(this.Be),this.Ue=new fm(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new mm(this.indexId,this.documentKey,this.arrayValue,n)}}function gm(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=ym(e.arrayValue,t.arrayValue),0!==n?n:(n=ym(e.directionalValue,t.directionalValue),0!==n?n:kc.comparator(e.documentKey,t.documentKey)))}function ym(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class vm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const e=t;e.dt()?this.je=e:this.Qe.push(e)}}We(e){const t=Tc(e);if(void 0!==t&&!this.ze(t))return!1;const n=Cc(e);let r=0,i=0;for(;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){const e=n[r];if(!this.He(this.je,e)||!this.Je(this.Ge[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],e))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class wm{constructor(){this.Ye=new bm}addToCollectionParentIndex(e,t){return this.Ye.add(t),Fc.resolve()}getCollectionParents(e,t){return Fc.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Fc.resolve()}deleteFieldIndex(e,t){return Fc.resolve()}getDocumentsMatchingTarget(e,t){return Fc.resolve(null)}getIndexType(e,t){return Fc.resolve(0)}getFieldIndexes(e,t){return Fc.resolve([])}getNextCollectionGroupToUpdate(e){return Fc.resolve(null)}getMinOffset(e,t){return Fc.resolve(Oc.min())}getMinOffsetFromCollectionGroup(e,t){return Fc.resolve(Oc.min())}updateCollectionGroup(e,t,n){return Fc.resolve()}updateIndexEntries(e,t){return Fc.resolve()}}class bm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nh(Ec.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nh(Ec.comparator)).toArray()}}const Em=new Uint8Array(0);class Sm{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new bm,this.Ze=new df((e=>Kh(e)),((e,t)=>Gh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Xe.add(t)}));const i={collectionId:n,parent:dp(r)};return Im(e).put(i)}return Fc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[yc(t),""],!1,!0);return Im(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(mp(r.parent))}return n}))}addFieldIndex(e,t){const n=_m(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Tm(e);return i.next((e=>{n.put(nm(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=_m(e),r=Tm(e),i=km(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=km(e);let r=!0;const i=new Map;return Fc.forEach(this.tn(t),(t=>this.en(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=If();const r=[];return Fc.forEach(i,((i,s)=>{var o;Ql("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${Kh(t)}`);const a=function(e,t){const n=Tc(t);if(void 0===n)return null;for(const t of Wh(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),u=function(e,t){const n=new Map;for(const r of Cc(t))for(const t of Wh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Cc(t)){const t=0===i.kind?Qh(e,i.fieldPath,e.startAt):Yh(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new od(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Cc(t)){const t=0===i.kind?Yh(e,i.fieldPath,e.endAt):Qh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new od(n,r)}(s,i),h=this.nn(i,s,l),d=this.nn(i,s,c),f=this.sn(i,s,u),p=this.rn(i.indexId,a,h,l.inclusive,d,c.inclusive,f);return Fc.forEach(p,(i=>n.J(i,t.limit).next((t=>{t.forEach((t=>{const n=kc.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Fc.resolve(null)}))}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),u=a/(null!=t?t.length:1),l=[];for(let c=0;c<a;++c){const a=t?this.on(t[c/u]):Em,h=this.un(e,a,n[c%u],r),d=this.cn(e,a,i[c%u],s),f=o.map((t=>this.un(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}un(e,t,n,r){const i=new mm(e,kc.empty(),t,n);return r?i:i.Ke()}cn(e,t,n,r){const i=new mm(e,kc.empty(),t,n);return r?i.Ke():i}en(e,t){const n=new vm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.We(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;return Fc.forEach(this.tn(t),(t=>this.en(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new nh(Ic.comparator),n=!1;for(const r of e.filters){const e=r;e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field))}for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>n))}an(e,t){const n=new pm;for(const r of Cc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.qe(r.kind);um.Te.ce(e,i)}return n.$e()}on(e){const t=new pm;return um.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const n=new pm;return um.Te.ce(xh(this.databaseId,t),n.qe(function(e){const t=Cc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}sn(e,t,n){if(null===n)return[];let r=[];r.push(new pm);let i=0;for(const s of Cc(e)){const e=n[i++];for(const n of r)if(this.ln(t,s.fieldPath)&&Nh(e))r=this.fn(r,s,e);else{const t=n.qe(s.kind);um.Te.ce(e,t)}}return this.dn(r)}nn(e,t,n){return this.sn(e,t,n.position)}dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].$e();return t}fn(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new pm;r.seed(n.$e()),um.Te.ce(e,r.qe(t.kind)),i.push(r)}return i}ln(e,t){return!!e.filters.find((e=>e instanceof Xh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=_m(e),r=Tm(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Fc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Dc(t.sequenceNumber,new Oc(Qp(t.readTime),new kc(mp(t.documentKey)),t.largestBatchId)):Dc.empty(),r=e.fields.map((([e,t])=>new xc(Ic.fromServerFormat(e),t)));return new _c(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:mc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=_m(e),i=Tm(e);return this._n(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Fc.forEach(t,(t=>i.put(nm(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Fc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Fc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Fc.forEach(i,(n=>this.wn(e,t,n).next((t=>{const i=this.mn(r,n);return t.isEqual(i)?Fc.resolve():this.gn(e,r,n,t,i)})))))))}))}yn(e,t,n,r){return km(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}pn(e,t,n,r){return km(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const r=km(e);let i=new nh(gm);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},((e,r)=>{i=i.add(new mm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}mn(e,t){let n=new nh(gm);const r=this.an(t,e);if(null==r)return n;const i=Tc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Nh(s))for(const i of s.arrayValue.values||[])n=n.add(new mm(t.indexId,e.key,this.on(i),r))}else n=n.add(new mm(t.indexId,e.key,Em,r));return n}gn(e,t,n,r,i){Ql("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ih(s),u=ih(o);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=ih(o)):t?(i(a),a=ih(s)):(a=ih(s),u=ih(o))}}(r,i,gm,(r=>{s.push(this.yn(e,t,n,r))}),(r=>{s.push(this.pn(e,t,n,r))})),Fc.waitFor(s)}_n(e){let t=1;return Tm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>gm(e,t))).filter(((e,t,n)=>!t||0!==gm(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=gm(i,e),s=gm(i,t);if(0===n)r[0]=e.Ke();else if(n>0&&s<0)r.push(i),r.push(i.Ke());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2)i.push(IDBKeyRange.bound([r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,Em,[]],[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,Em,[]]));return i}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Cm)}getMinOffset(e,t){return Fc.mapArray(this.tn(t),(t=>this.en(e,t).next((e=>e||Zl())))).next(Cm)}}function Im(e){return Up(e,"collectionParents")}function km(e){return Up(e,"indexEntries")}function _m(e){return Up(e,"indexConfiguration")}function Tm(e){return Up(e,"indexState")}function Cm(e){ec(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Pc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Oc(t.readTime,t.documentKey,n)}const xm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Dm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Dm(e,Dm.DEFAULT_COLLECTION_PERCENTILE,Dm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Nm(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Z({range:o},((e,t,n)=>(a++,n.delete())));s.push(u.next((()=>{ec(1===a)})));const l=[];for(const e of n.mutations){const r=vp(t,e.key.path,n.batchId);s.push(i.delete(r)),l.push(e.key)}return Fc.waitFor(s).next((()=>l))}function Am(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Zl();t=e.noDocument}return JSON.stringify(t).length}Dm.DEFAULT_COLLECTION_PERCENTILE=10,Dm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dm.DEFAULT=new Dm(41943040,Dm.DEFAULT_COLLECTION_PERCENTILE,Dm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dm.DISABLED=new Dm(-1,0,0);class Om{constructor(e,t,n,r){this.userId=e,this.It=t,this.indexManager=n,this.referenceDelegate=r,this.In={}}static oe(e,t,n,r){ec(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Om(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lm(e).Z({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Rm(e),s=Lm(e);return s.add({}).next((o=>{ec("number"==typeof o);const a=new Bp(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map((t=>Jf(e.re,t))),i=n.mutations.map((t=>Jf(e.re,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.It,this.userId,a),l=[];let c=new nh(((e,t)=>mc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=vp(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),l.push(s.put(u)),l.push(i.put(t,wp))}return c.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.In[o]=a.keys()})),Fc.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Lm(e).get(t).next((e=>e?(ec(e.userId===this.userId),Yp(this.It,e)):null))}Tn(e,t){return this.In[t]?Fc.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.In[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Lm(e).Z({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(ec(t.batchId>=n),i=Yp(this.It,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Lm(e).Z({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lm(e).W("userMutationsIndex",t).next((e=>e.map((e=>Yp(this.It,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=yp(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Rm(e).Z({range:r},((n,r,s)=>{const[o,a,u]=n,l=mp(a);if(o===this.userId&&t.path.isEqual(l))return Lm(e).get(u).next((e=>{if(!e)throw Zl();ec(e.userId===this.userId),i.push(Yp(this.It,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nh(mc);const r=[];return t.forEach((t=>{const i=yp(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Rm(e).Z({range:s},((e,r,i)=>{const[s,o,a]=e,u=mp(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()}));r.push(o)})),Fc.waitFor(r).next((()=>this.En(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=yp(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new nh(mc);return Rm(e).Z({range:s},((e,t,i)=>{const[s,a,u]=e,l=mp(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(u)):i.done()})).next((()=>this.En(e,o)))}En(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Lm(e).get(t).next((e=>{if(null===e)throw Zl();ec(e.userId===this.userId),n.push(Yp(this.It,e))})))})),Fc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Nm(e.ie,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.An(t.batchId)})),Fc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Fc.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Rm(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=mp(e[1]);r.push(t)}else n.done()})).next((()=>{ec(0===r.length)}))}))}containsKey(e,t){return Pm(e,this.userId,t)}Rn(e){return Mm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Pm(e,t,n){const r=yp(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Rm(e).Z({range:s,X:!0},((e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Lm(e){return Up(e,"mutations")}function Rm(e){return Up(e,"documentMutations")}function Mm(e){return Up(e,"mutationQueues")}class Fm{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Fm(0)}static vn(){return new Fm(-1)}}class Vm{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next((t=>{const n=new Fm(t.highestTargetId);return t.highestTargetId=n.next(),this.Sn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Vn(e).next((e=>wc.fromTimestamp(new vc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Vn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Vn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r))))}addTargetData(e,t){return this.Dn(e,t).next((()=>this.Vn(e).next((n=>(n.targetCount+=1,this.Cn(t,n),this.Sn(e,n))))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>jm(e).delete(t.targetId))).next((()=>this.Vn(e))).next((t=>(ec(t.targetCount>0),t.targetCount-=1,this.Sn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return jm(e).Z(((s,o)=>{const a=Xp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Fc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return jm(e).Z(((e,n)=>{const r=Xp(n);t(r)}))}Vn(e){return Um(e).get("targetGlobalKey").next((e=>(ec(null!==e),e)))}Sn(e,t){return Um(e).put("targetGlobalKey",t)}Dn(e,t){return jm(e).put(Jp(this.It,t))}Cn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Vn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Kh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return jm(e).Z({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Xp(n);Gh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Bm(e);return t.forEach((t=>{const s=dp(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Fc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Bm(e);return Fc.forEach(t,(t=>{const i=dp(t.path);return Fc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Bm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Bm(e);let i=If();return r.Z({range:n,X:!0},((e,t,n)=>{const r=mp(e[1]),s=new kc(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=dp(t.path),r=IDBKeyRange.bound([n],[yc(n)],!1,!0);let i=0;return Bm(e).Z({index:"documentTargetsIndex",X:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}se(e,t){return jm(e).get(t).next((e=>e?Xp(e):null))}}function jm(e){return Up(e,"targets")}function Um(e){return Up(e,"targetGlobal")}function Bm(e){return Up(e,"targetDocuments")}function zm([e,t],[n,r]){const i=mc(e,n);return 0===i?mc(t,r):i}class qm{constructor(e){this.xn=e,this.buffer=new nh(zm),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();zm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $m{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){Ql("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zc(e)?Ql("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Mc(e)}await this.Fn(3e5)}))}}class Km{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Fc.resolve(Qc.at);const n=new qm(t);return this.$n.forEachTarget(e,(e=>n.On(e.sequenceNumber))).next((()=>this.$n.Ln(e,(e=>n.On(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.$n.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ql("LruGarbageCollector","Garbage collection skipped; disabled"),Fc.resolve(xm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ql("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xm):this.Un(e,t)))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let n,r,i,s,o,a,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ql("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),Wl()<=tr.DEBUG&&Ql("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-l}ms`),Fc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Gm{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Km(e,t)}(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}qn(e){let t=0;return this.Ln(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,((e,n)=>t(n)))}addReference(e,t,n){return Hm(e,n)}removeReference(e,t,n){return Hm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Hm(e,t)}Gn(e,t){return function(e,t){let n=!1;return Mm(e).tt((r=>Pm(e,r,t).next((e=>(e&&(n=!0),Fc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Kn(e,((s,o)=>{if(o<=t){const t=this.Gn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,wc.min()),Bm(e).delete([0,dp(s.path)]))))}));r.push(t)}})).next((()=>Fc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Hm(e,t)}Kn(e,t){const n=Bm(e);let r,i=Qc.at;return n.Z({index:"documentTargetsIndex"},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Qc.at&&t(new kc(mp(r)),i),i=o,r=s):i=Qc.at})).next((()=>{i!==Qc.at&&t(new kc(mp(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hm(e,t){return Bm(e).put(function(e,t){return{targetId:0,path:dp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Wm{constructor(){this.changes=new df((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Fc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qm{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Zm(e).put(n)}removeEntry(e,t,n){return Zm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Hp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Qn(e,n))))}getEntry(e,t){let n=zh.newInvalidDocument(t);return Zm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eg(t))},((e,r)=>{n=this.jn(t,r)})).next((()=>n))}Wn(e,t){let n={size:0,document:zh.newInvalidDocument(t)};return Zm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eg(t))},((e,r)=>{n={document:this.jn(t,r),size:Am(r)}})).next((()=>n))}getEntries(e,t){let n=pf();return this.zn(e,t,((e,t)=>{const r=this.jn(e,t);n=n.insert(e,r)})).next((()=>n))}Hn(e,t){let n=pf(),r=new Zc(kc.comparator);return this.zn(e,t,((e,t)=>{const i=this.jn(e,t);n=n.insert(e,i),r=r.insert(e,Am(t))})).next((()=>({documents:n,Jn:r})))}zn(e,t,n){if(t.isEmpty())return Fc.resolve();let r=new nh(ng);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(eg(r.first()),eg(r.last())),s=r.getIterator();let o=s.getNext();return Zm(e).Z({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=kc.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&ng(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.j(eg(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getAllFromCollection(e,t,n){const r=[t.popLast().toArray(),t.lastSegment(),Hp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zm(e).W(IDBKeyRange.bound(r,i,!0)).next((e=>{let t=pf();for(const n of e){const e=this.jn(kc.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t}))}getAllFromCollectionGroup(e,t,n,r){let i=pf();const s=tg(t,n),o=tg(t,Oc.max());return Zm(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.jn(kc.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Xm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Jm(e).get("remoteDocumentGlobalKey").next((e=>(ec(!!e),e)))}Qn(e,t){return Jm(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Xf(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=kc.fromSegments(t.noDocument.path),r=Qp(t.noDocument.readTime);n=zh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Zl();{const e=kc.fromSegments(t.unknownDocument.path),r=Qp(t.unknownDocument.version);n=zh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new vc(e[0],e[1]);return wc.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!e.isNoDocument()||!e.version.isEqual(wc.min()))return e}return zh.newInvalidDocument(e)}}function Ym(e){return new Qm(e)}class Xm extends Wm{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new df((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new nh(((e,t)=>mc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Xn.get(i);if(t.push(this.Yn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Gp(this.Yn.It,s);r=r.add(i.path.popLast());const u=Am(a);n+=u-o.size,t.push(this.Yn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Gp(this.Yn.It,s.convertToNoDocument(wc.min()));t.push(this.Yn.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Yn.updateMetadata(e,n)),Fc.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next((e=>(this.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next((({documents:e,Jn:t})=>(t.forEach(((t,n)=>{this.Xn.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function Jm(e){return Up(e,"remoteDocumentGlobal")}function Zm(e){return Up(e,"remoteDocumentsV14")}function eg(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function tg(e,t){const n=t.documentKey.path.toArray();return[e,Hp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ng(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=mc(n[e],r[e]),i)return i;return i=mc(n.length,r.length),i||(i=mc(n[n.length-2],r[r.length-2]),i||mc(n[n.length-1],r[r.length-1]))}class rg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ig{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.getBaseDocument(e,t,n)))).next((e=>(null!==n&&Yd(n.mutation,e,sh.empty(),vc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,If()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=If()){const r=vf();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=gf();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=vf();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,If())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=pf();const s=bf(),o=bf();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ef)?i=i.insert(t.key,t):void 0!==o&&(s.set(t.key,o.mutation.getFieldMask()),Yd(o.mutation,t,o.mutation.getFieldMask(),vc.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new rg(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=bf();let r=new Zc(((e,t)=>e-t)),i=If();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||sh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||If()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,u=r.value,l=wf();u.forEach((e=>{if(!i.has(e)){const r=Wd(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Fc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return kc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Fc.resolve(vf());let o=-1,a=i;return s.next((t=>Fc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Fc.resolve():this.getBaseDocument(e,t,n).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,If()))).next((e=>({batchId:o,changes:yf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kc(t)).next((e=>{let t=gf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=gf();return this.indexManager.getCollectionParents(e,r).next((s=>Fc.forEach(s,(s=>{const o=function(e,t){return new hd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)))).next((e=>{e.forEach(((e,t)=>{const n=t.getKey();null===r.get(n)&&(r=r.insert(n,zh.newInvalidDocument(n)))}));let n=gf();return r.forEach(((r,i)=>{const s=e.get(r);void 0!==s&&Yd(s.mutation,i,sh.empty(),vc.now()),kd(t,i)&&(n=n.insert(r,i))})),n}))}getBaseDocument(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Fc.resolve(zh.newInvalidDocument(t))}}class sg{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Fc.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Bf(n.createTime)}),Fc.resolve()}getNamedQuery(e,t){return Fc.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Zp(e.bundledQuery),readTime:Bf(e.readTime)}}(t)),Fc.resolve()}}class og{constructor(){this.overlays=new Zc(kc.comparator),this.es=new Map}getOverlay(e,t){return Fc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=vf();return Fc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ue(e,t,r)})),Fc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.es.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.es.delete(n)),Fc.resolve()}getOverlaysForCollection(e,t,n){const r=vf(),i=t.length+1,s=new kc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Fc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Zc(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=vf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=vf(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Fc.resolve(o)}ue(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qp(t,n));let i=this.es.get(t);void 0===i&&(i=If(),this.es.set(t,i)),this.es.set(t,i.add(n.key))}}class ag{constructor(){this.ns=new nh(ug.ss),this.rs=new nh(ug.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const n=new ug(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.cs(new ug(e,t))}hs(e,t){e.forEach((e=>this.removeReference(e,t)))}ls(e){const t=new kc(new Ec([])),n=new ug(t,e),r=new ug(t,e+1),i=[];return this.rs.forEachInRange([n,r],(e=>{this.cs(e),i.push(e.key)})),i}fs(){this.ns.forEach((e=>this.cs(e)))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new kc(new Ec([])),n=new ug(t,e),r=new ug(t,e+1);let i=If();return this.rs.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ug(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ug{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return kc.comparator(e.key,t.key)||mc(e._s,t._s)}static os(e,t){return mc(e._s,t._s)||kc.comparator(e.key,t.key)}}class lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new nh(ug.ss)}checkEmpty(e){return Fc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Bp(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.gs=this.gs.add(new ug(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Fc.resolve(s)}lookupMutationBatch(e,t){return Fc.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ps(n),i=r<0?0:r;return Fc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Fc.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Fc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ug(t,0),r=new ug(t,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([n,r],(e=>{const t=this.ys(e._s);i.push(t)})),Fc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nh(mc);return t.forEach((e=>{const t=new ug(e,0),r=new ug(e,Number.POSITIVE_INFINITY);this.gs.forEachInRange([t,r],(e=>{n=n.add(e._s)}))})),Fc.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;kc.isDocumentKey(i)||(i=i.child(""));const s=new ug(new kc(i),0);let o=new nh(mc);return this.gs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),s),Fc.resolve(this.Is(o))}Is(e){const t=[];return e.forEach((e=>{const n=this.ys(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ec(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return Fc.forEach(t.mutations,(r=>{const i=new ug(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.gs=n}))}An(e){}containsKey(e,t){const n=new ug(t,0),r=this.gs.firstAfterOrEqual(n);return Fc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fc.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cg{constructor(e){this.Es=e,this.docs=new Zc(kc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Fc.resolve(n?n.document.mutableCopy():zh.newInvalidDocument(t))}getEntries(e,t){let n=pf();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():zh.newInvalidDocument(e))})),Fc.resolve(n)}getAllFromCollection(e,t,n){let r=pf();const i=new kc(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||Pc(Ac(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Fc.resolve(r)}getAllFromCollectionGroup(e,t,n,r){Zl()}As(e,t){return Fc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new hg(this)}getSize(e){return Fc.resolve(this.size)}}class hg extends Wm{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(n)})),Fc.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class dg{constructor(e){this.persistence=e,this.Rs=new df((e=>Kh(e)),Gh),this.lastRemoteSnapshotVersion=wc.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ag,this.targetCount=0,this.vs=Fm.Pn()}forEachTarget(e,t){return this.Rs.forEach(((e,n)=>t(n))),Fc.resolve()}getLastRemoteSnapshotVersion(e){return Fc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fc.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Fc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Fc.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Fm(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Fc.resolve()}updateTargetData(e,t){return this.Dn(t),Fc.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Fc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Rs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Rs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Fc.waitFor(i).next((()=>r))}getTargetCount(e){return Fc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Rs.get(t)||null;return Fc.resolve(n)}addMatchingKeys(e,t,n){return this.Ps.us(t,n),Fc.resolve()}removeMatchingKeys(e,t,n){this.Ps.hs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Fc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Fc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ps.ds(t);return Fc.resolve(n)}containsKey(e,t){return Fc.resolve(this.Ps.containsKey(t))}}class fg{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Qc(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new dg(this),this.indexManager=new wm,this.remoteDocumentCache=function(e){return new cg(e)}((e=>this.referenceDelegate.xs(e))),this.It=new Kp(t),this.Ns=new sg(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new og,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Vs[e.toKey()];return n||(n=new lg(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,n){Ql("MemoryPersistence","Starting transaction:",e);const r=new pg(this.Ss.next());return this.referenceDelegate.ks(),n(r).next((e=>this.referenceDelegate.Os(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ms(e,t){return Fc.or(Object.values(this.Vs).map((n=>()=>n.containsKey(e,t))))}}class pg extends Rc{constructor(e){super(),this.currentSequenceNumber=e}}class mg{constructor(e){this.persistence=e,this.Fs=new ag,this.$s=null}static Bs(e){return new mg(e)}get Ls(){if(this.$s)return this.$s;throw Zl()}addReference(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Fc.resolve()}removeReference(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Fc.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Fc.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach((e=>this.Ls.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ls.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fc.forEach(this.Ls,(n=>{const r=kc.fromPath(n);return this.Us(e,r).next((e=>{e||t.removeEntry(r,wc.min())}))})).next((()=>(this.$s=null,t.apply(e))))}updateLimboDocument(e,t){return this.Us(e,t).next((e=>{e?this.Ls.delete(t.toString()):this.Ls.add(t.toString())}))}xs(e){return 0}Us(e,t){return Fc.or([()=>Fc.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class gg{constructor(e){this.It=e}$(e,t,n,r){const i=new Vc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gp,{unique:!0}),e.createObjectStore("documentMutations")}(e),yg(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Fc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),yg(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wc.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gp,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Fc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.qs(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i))))),n<7&&r>=7&&(s=s.next((()=>this.Gs(i)))),n<8&&r>=8&&(s=s.next((()=>this.Qs(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.js(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Ap});t.createIndex("collectionPathOverlayIndex",Op,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Pp,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:bp});t.createIndex("documentKeyIndex",Ep),t.createIndex("collectionGroupIndex",Sp)}(e))).next((()=>this.Ws(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.zs(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Cp}).createIndex("sequenceNumberIndex",xp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Dp}).createIndex("documentKeyIndex",Np,{unique:!1})}(e)))),s}Ks(e){let t=0;return e.store("remoteDocuments").Z(((e,n)=>{t+=Am(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}qs(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Fc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Fc.forEach(n,(n=>{ec(n.userId===t.userId);const r=Yp(this.It,n);return Nm(e,t.userId,r).next((()=>{}))}))))}))))}Gs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Z(((n,i)=>{const s=new Ec(n),o=function(e){return[0,dp(e)]}(s);r.push(t.get(o).next((n=>n?Fc.resolve():(n=>t.put({targetId:0,path:dp(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Fc.waitFor(r)))}))}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Tp});const n=t.store("collectionParents"),r=new bm,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:dp(r)})}};return t.store("remoteDocuments").Z({X:!0},((e,t)=>{const n=new Ec(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Z({X:!0},(([e,t,n],r)=>{const s=mp(t);return i(s.popLast())}))))}js(e){const t=e.store("targets");return t.Z(((e,n)=>{const r=Xp(n),i=Jp(this.It,r);return t.put(i)}))}Ws(e,t){const n=t.store("remoteDocuments"),r=[];return n.Z(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new kc(Ec.fromString(o.document.name).popFirst(5)):o.noDocument?kc.fromSegments(o.noDocument.path):o.unknownDocument?kc.fromSegments(o.unknownDocument.path):Zl()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>Fc.waitFor(r)))}zs(e,t){const n=t.store("mutations"),r=Ym(this.It),i=new fg(mg.Bs,this.It.re);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:If();Yp(this.It,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Fc.forEach(n,((e,n)=>{const s=new Kl(n),o=om.oe(this.It,s),a=i.getIndexManager(s),u=Om.oe(s,this.It,a,i.referenceDelegate);return new ig(r,u,o,a).recalculateAndSaveOverlaysForDocumentKeys(new jp(t,Qc.at),e).next()}))}))}}function yg(e){e.createObjectStore("targetDocuments",{keyPath:kp}).createIndex("documentTargetsIndex",_p,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ip,{unique:!0}),e.createObjectStore("targetGlobal")}const vg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wg{constructor(e,t,n,r,i,s,o,a,u,l,c=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Hs=i,this.window=s,this.document=o,this.Js=u,this.Ys=l,this.Xs=c,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=e=>Promise.resolve(),!wg.C())throw new rc(nc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gm(this,r),this.ii=t+"main",this.It=new Kp(a),this.ri=new jc(this.ii,this.Xs,new gg(this.It)),this.Cs=new Vm(this.referenceDelegate,this.It),this.remoteDocumentCache=Ym(this.It),this.Ns=new rm,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Yl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new rc(nc.FAILED_PRECONDITION,vg);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Cs.getHighestSequenceNumber(e)))})).then((e=>{this.Ss=new Qc(e,this.Js)})).then((()=>{this.Ds=!0})).catch((e=>(this.ri&&this.ri.close(),Promise.reject(e))))}li(e){return this.si=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((async()=>{this.started&&await this.ui()})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Eg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))))}))})).next((()=>this.di(e))).next((t=>this.isPrimary&&!t?this._i(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(zc(e))return Ql("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ql("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable((()=>this.si(e))),this.isPrimary=e}))}fi(e){return bg(e).get("owner").next((e=>Fc.resolve(this.mi(e))))}gi(e){return Eg(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Up(e,"clientMetadata");return t.W().next((e=>{const n=this.Ii(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Fc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.oi)for(const t of e)this.oi.removeItem(this.Ti(t.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.ui().then((()=>this.yi())).then((()=>this.hi()))))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Fc.resolve(!0):bg(e).get("owner").next((t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new rc(nc.FAILED_PRECONDITION,vg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Eg(e).W().next((e=>void 0===this.Ii(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ql("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new jp(e,Qc.at);return this._i(t).next((()=>this.gi(t)))})),this.ri.close(),this.Pi()}Ii(e,t){return e.filter((e=>this.pi(e.updateTimeMs,t)&&!this.Ei(e.clientId)))}vi(){return this.runTransaction("getActiveClients","readonly",(e=>Eg(e).W().next((e=>this.Ii(e,18e5).map((e=>e.clientId))))))}get started(){return this.Ds}getMutationQueue(e,t){return Om.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Sm(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return om.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,n){Ql("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.Xs)?Vp:14===s?Fp:13===s?Mp:12===s?Rp:11===s?Lp:void Zl();var s;let o;return this.ri.runTransaction(e,r,i,(r=>(o=new jp(r,this.Ss?this.Ss.next():Qc.at),"readwrite-primary"===t?this.fi(o).next((e=>!!e||this.di(o))).next((t=>{if(!t)throw Yl(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))),new rc(nc.FAILED_PRECONDITION,Lc);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.Vi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Vi(e){return bg(e).get("owner").next((e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new rc(nc.FAILED_PRECONDITION,vg)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bg(e).put("owner",t)}static C(){return jc.C()}_i(e){const t=bg(e);return t.get("owner").next((e=>this.mi(e)?(Ql("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Fc.resolve()))}pi(e,t){const n=Date.now();return!(e<n-t||e>n&&(Yl(`Detected an update time that is in the future: ${e} > ${n}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.ui())))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),!function(){try{return"[object process]"===Object.prototype.toString.call(i.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ql("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Yl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Yl("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bg(e){return Up(e,"owner")}function Eg(e){return Up(e,"clientMetadata")}function Sg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ig{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Si=n,this.Di=r}static Ci(e,t){let n=If(),r=If();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Ig(e,t.fromCache,n,r)}}class kg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.ki(e,t).next((i=>i||this.Oi(e,t,r,n))).next((n=>n||this.Mi(e,t)))}ki(e,t){if(pd(t))return Fc.resolve(null);let n=wd(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=bd(t,null,"F"),n=wd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=If(...r);return this.Ni.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Fi(t,r);return this.$i(t,s,i,n.readTime)?this.ki(e,bd(t,null,"F")):this.Bi(e,s,t,n)}))))})))))}Oi(e,t,n,r){return pd(t)||r.isEqual(wc.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((i=>{const s=this.Fi(t,i);return this.$i(t,s,n,r)?this.Mi(e,t):(Wl()<=tr.DEBUG&&Ql("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Id(t)),this.Bi(e,s,t,Nc(r,-1)))}))}Fi(e,t){let n=new nh(Td(e));return t.forEach(((t,r)=>{kd(e,r)&&(n=n.add(r))})),n}$i(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,t){return Wl()<=tr.DEBUG&&Ql("QueryEngine","Using full collection scan to execute query:",Id(t)),this.Ni.getDocumentsMatchingQuery(e,t,Oc.min())}Bi(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class _g{constructor(e,t,n,r){this.persistence=e,this.Li=t,this.It=r,this.Ui=new Zc(mc),this.qi=new df((e=>Kh(e)),Gh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ig(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ui)))}}function Tg(e,t,n,r){return new _g(e,t,n,r)}async function Cg(e,t){const n=tc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Qi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=If();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ji:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function xg(e){const t=tc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Cs.getLastRemoteSnapshotVersion(e)))}function Dg(e,t,n){let r=If(),i=If();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=pf();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(wc.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ql("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Wi:r,zi:i}}))}function Ng(e,t){const n=tc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ag(e,t){const n=tc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Cs.getTargetData(e,t).next((i=>i?(r=i,Fc.resolve(r)):n.Cs.allocateTargetId(e).next((i=>(r=new $p(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}async function Og(e,t,n){const r=tc(e),i=r.Ui.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!zc(e))throw e;Ql("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ui=r.Ui.remove(t),r.qi.delete(i.target)}function Pg(e,t,n){const r=tc(e);let i=wc.min(),s=If();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=tc(e),i=r.qi.get(n);return void 0!==i?Fc.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,wd(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Li.getDocumentsMatchingQuery(e,t,n?i:wc.min(),n?s:If()))).next((e=>(Mg(r,_d(t),e),{documents:e,Hi:s})))))}function Lg(e,t){const n=tc(e),r=tc(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.se(e,t).next((e=>e?e.target:null))))}function Rg(e,t){const n=tc(e),r=n.Ki.get(t)||wc.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Gi.getAllFromCollectionGroup(e,t,Nc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Mg(n,t,e),e)))}function Mg(e,t,n){let r=e.Ki.get(t)||wc.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}async function Fg(e,t,n=If()){const r=await Ag(e,wd(Zp(t.bundledQuery))),i=tc(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Bf(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ns.saveNamedQuery(e,t);const o=r.withResumeToken(oh.EMPTY_BYTE_STRING,s);return i.Ui=i.Ui.insert(o.targetId,o),i.Cs.updateTargetData(e,o).next((()=>i.Cs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Cs.addMatchingKeys(e,n,r.targetId))).next((()=>i.Ns.saveNamedQuery(e,t)))}))}function Vg(e,t){return`firestore_clients_${e}_${t}`}function jg(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Ug(e,t){return`firestore_targets_${e}_${t}`}class Bg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Zi(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new rc(r.error.code,r.error.message))),s?new Bg(e,t,r.state,i):(Yl("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Zi(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new rc(n.error.code,n.error.message))),i?new zg(e,n.state,r):(Yl("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=_f();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=vh(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new qg(e,i):(Yl("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $g{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $g(t.clientId,t.onlineState):(Yl("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kg{constructor(){this.activeTargetIds=_f()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gg{constructor(e,t,n,r,i){this.window=e,this.Hs=t,this.persistenceKey=n,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Zc(mc),this.started=!1,this.cr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ar=Vg(this.persistenceKey,this.sr),this.hr=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Kg),this.lr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.wr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.mr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.vi();for(const t of e){if(t===this.sr)continue;const e=this.getItem(Vg(this.persistenceKey,t));if(e){const n=qg.Zi(t,e);n&&(this.ur=this.ur.insert(n.clientId,n))}}this.gr();const t=this.storage.getItem(this.wr);if(t){const e=this.yr(t);e&&this.pr(e)}for(const e of this.cr)this.rr(e);this.cr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,n){this.Tr(e,t,n),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Ug(this.persistenceKey,e));if(n){const r=zg.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ug(this.persistenceKey,e))}updateQueryState(e,t,n){this.Rr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Er(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ql("SharedClientState","READ",e,t),t}setItem(e,t){Ql("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ql("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){const t=e;if(t.storageArea===this.storage){if(Ql("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ar)return void Yl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.lr.test(t.key)){if(null==t.newValue){const e=this.vr(t.key);return this.Vr(e,null)}{const e=this.Sr(t.key,t.newValue);if(e)return this.Vr(e.clientId,e)}}else if(this.dr.test(t.key)){if(null!==t.newValue){const e=this.Dr(t.key,t.newValue);if(e)return this.Cr(e)}}else if(this._r.test(t.key)){if(null!==t.newValue){const e=this.Nr(t.key,t.newValue);if(e)return this.kr(e)}}else if(t.key===this.wr){if(null!==t.newValue){const e=this.yr(t.newValue);if(e)return this.pr(e)}}else if(t.key===this.hr){const e=function(e){let t=Qc.at;if(null!=e)try{const n=JSON.parse(e);ec("number"==typeof n),t=n}catch(e){Yl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Qc.at&&this.sequenceNumberHandler(e)}else if(t.key===this.mr){const e=this.Or(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Mr(e))))}}else this.cr.push(t)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,n){const r=new Bg(this.currentUser,e,t,n),i=jg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}Er(e){const t=jg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){const t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}Rr(e,t,n){const r=Ug(this.persistenceKey,e),i=new zg(e,t,n);this.setItem(r,i.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const n=this.vr(e);return qg.Zi(n,t)}Dr(e,t){const n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Bg.Zi(new Kl(i),r,t)}Nr(e,t){const n=this._r.exec(e),r=Number(n[1]);return zg.Zi(r,t)}yr(e){return $g.Zi(e)}Or(e){return JSON.parse(e)}async Cr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Fr(e.batchId,e.state,e.error);Ql("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const n=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),i=this.Ir(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Br(s,o).then((()=>{this.ur=n}))}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=_f();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Hg{constructor(){this.Lr=new Kg,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,n){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Kg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wg{qr(e){}shutdown(){}}class Qg{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ql("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ql("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Yg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xg{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Jg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,n,r,i){const s=this.ho(e,t);Ql("RestConnection","Sending: ",s,n);const o={};return this.lo(o,r,i),this.fo(e,s,o,n).then((e=>(Ql("RestConnection","Received: ",e),e)),(t=>{throw Xl("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}_o(e,t,n,r,i,s){return this.ao(e,t,n,r,i)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}ho(e,t){const n=Yg[e];return`${this.oo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,r){return new Promise(((i,s)=>{const o=new ql;o.setWithCredentials(!0),o.listenOnce(Vl.COMPLETE,(()=>{var t;try{switch(o.getLastErrorCode()){case Fl.NO_ERROR:const n=o.getResponseJson();Ql("Connection","XHR received:",JSON.stringify(n)),i(n);break;case Fl.TIMEOUT:Ql("Connection",'RPC "'+e+'" timed out'),s(new rc(nc.DEADLINE_EXCEEDED,"Request time out"));break;case Fl.HTTP_ERROR:const r=o.getStatus();if(Ql("Connection",'RPC "'+e+'" failed with status:',r,"response text:",o.getResponseText()),r>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(nc).indexOf(t)>=0?t:nc.UNKNOWN}(n.status);s(new rc(e,n.message))}else s(new rc(nc.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new rc(nc.UNAVAILABLE,"Connection failed."));break;default:Zl()}}finally{Ql("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}wo(e,t,n){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Rl(),s=Ml(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Bl({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const a=r.join("");Ql("Connection","Creating WebChannel: "+a,o);const u=i.createWebChannel(a,o);let l=!1,c=!1;const h=new Xg({Hr:e=>{c?Ql("Connection","Not sending because WebChannel is closed:",e):(l||(Ql("Connection","Opening WebChannel transport."),u.open(),l=!0),Ql("Connection","WebChannel sending:",e),u.send(e))},Jr:()=>u.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(u,zl.EventType.OPEN,(()=>{c||Ql("Connection","WebChannel transport opened.")})),d(u,zl.EventType.CLOSE,(()=>{c||(c=!0,Ql("Connection","WebChannel transport closed"),h.io())})),d(u,zl.EventType.ERROR,(e=>{c||(c=!0,Xl("Connection","WebChannel transport errored:",e),h.io(new rc(nc.UNAVAILABLE,"The operation could not be completed")))})),d(u,zl.EventType.MESSAGE,(e=>{var t;if(!c){const n=e.data[0];ec(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ql("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=uf[e];if(void 0!==t)return hf(t)}(e),n=i.message;void 0===t&&(t=nc.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,h.io(new rc(t,n)),u.close()}else Ql("Connection","WebChannel received:",n),h.ro(n)}})),d(s,jl.STAT_EVENT,(e=>{e.stat===Ul.PROXY?Ql("Connection","Detected buffering proxy"):e.stat===Ul.NOPROXY&&Ql("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.so()}),0),h}}function Zg(){return"undefined"!=typeof window?window:null}function ey(){return"undefined"!=typeof document?document:null}function ty(e){return new Ff(e,!0)}class ny{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=t,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&Ql("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,(()=>(this.Eo=Date.now(),e()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ry{constructor(e,t,n,r,i,s,o,a){this.Hs=e,this.vo=n,this.Vo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ny(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(()=>this.$o())))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==e?this.xo.reset():t&&t.code===nc.RESOURCE_EXHAUSTED?(Yl(t.toString()),Yl("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===nc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.So===t&&this.Go(e,n)}),(t=>{e((()=>{const e=new rc(nc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Qo(e)}))}))}Go(e,t){const n=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((()=>{n((()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,(()=>(this.ko()&&(this.state=3),Promise.resolve()))),this.listener.Yr())))})),this.stream.Zr((e=>{n((()=>this.Qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Oo(){this.state=5,this.xo.Ro((async()=>{this.state=0,this.start()}))}Qo(e){return Ql("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget((()=>this.So===e?t():(Ql("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iy extends ry{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.It=i}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Zl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.gt?(ec(void 0===t||"string"==typeof t),oh.fromBase64String(t||"")):(ec(void 0===t||t instanceof Uint8Array),oh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?nc.UNKNOWN:hf(e.code);return new rc(t,e.message||"")}(o);n=new Nf(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kf(e,r.document.name),s=Bf(r.document.updateTime),o=new Uh({mapValue:{fields:r.document.fields}}),a=zh.newFoundDocument(i,s,o),u=r.targetIds||[],l=r.removedTargetIds||[];n=new xf(u,l,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Kf(e,r.document),s=r.readTime?Bf(r.readTime):wc.min(),o=zh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Kf(e,r.document),s=r.removedTargetIds||[];n=new xf([],s,i,null)}else{if(!("filter"in t))return Zl();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new af(r),s=e.targetId;n=new Df(s,i)}}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return wc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?wc.min():t.readTime?Bf(t.readTime):wc.min()}(e);return this.listener.Wo(t,n)}zo(e){const t={};t.database=Wf(this.It),t.addTarget=function(e,t){let n;const r=t.target;return n=Hh(r)?{documents:ep(e,r)}:{query:tp(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=jf(e,t.resumeToken):t.snapshotVersion.compareTo(wc.min())>0&&(n.readTime=Vf(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zl()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}Ho(e){const t={};t.database=Wf(this.It),t.removeTarget=e,this.Bo(t)}}class sy extends ry{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(ec(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function(e,t){return e&&e.length>0?(ec(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Bf(e.updateTime):Bf(t);return n.isEqual(wc.min())&&(n=Bf(t)),new $d(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Bf(e.commitTime);return this.listener.Zo(n,t)}return ec(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Wf(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Jf(this.It,e)))};this.Bo(t)}}class oy extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.It=r,this.nu=!1}su(){if(this.nu)throw new rc(nc.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.ao(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===nc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rc(nc.UNKNOWN,e.toString())}))}_o(e,t,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection._o(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===nc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rc(nc.UNKNOWN,e.toString())}))}terminate(){this.nu=!0}}class ay{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Yl(t),this.ou=!1):Ql("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class uy{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr((e=>{n.enqueueAndForget((async()=>{yy(this)&&(Ql("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=tc(e);t._u.add(4),await cy(t),t.gu.set("Unknown"),t._u.delete(4),await ly(t)}(this))}))})),this.gu=new ay(n,r)}}async function ly(e){if(yy(e))for(const t of e.wu)await t(!0)}async function cy(e){for(const t of e.wu)await t(!1)}function hy(e,t){const n=tc(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),gy(n)?my(n):Ry(n).ko()&&fy(n,t))}function dy(e,t){const n=tc(e),r=Ry(n);n.du.delete(t),r.ko()&&py(n,t),0===n.du.size&&(r.ko()?r.Fo():yy(n)&&n.gu.set("Unknown"))}function fy(e,t){e.yu.Mt(t.targetId),Ry(e).zo(t)}function py(e,t){e.yu.Mt(t),Ry(e).Ho(t)}function my(e){e.yu=new Of({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),se:t=>e.du.get(t)||null}),Ry(e).start(),e.gu.uu()}function gy(e){return yy(e)&&!Ry(e).No()&&e.du.size>0}function yy(e){return 0===tc(e)._u.size}function vy(e){e.yu=void 0}async function wy(e){e.du.forEach(((t,n)=>{fy(e,t)}))}async function by(e,t){vy(e),gy(e)?(e.gu.hu(t),my(e)):e.gu.set("Unknown")}async function Ey(e,t,n){if(e.gu.set("Online"),t instanceof Nf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.du.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.du.delete(r),e.yu.removeTarget(r))}(e,t)}catch(n){Ql("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Sy(e,n)}else if(t instanceof xf?e.yu.Gt(t):t instanceof Df?e.yu.Yt(t):e.yu.Wt(t),!n.isEqual(wc.min()))try{const t=await xg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.yu.te(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.du.get(t);if(!n)return;e.du.set(t,n.withResumeToken(oh.EMPTY_BYTE_STRING,n.snapshotVersion)),py(e,t);const r=new $p(n.target,t,1,n.sequenceNumber);fy(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ql("RemoteStore","Failed to raise snapshot:",t),await Sy(e,t)}}async function Sy(e,t,n){if(!zc(t))throw t;e._u.add(1),await cy(e),e.gu.set("Offline"),n||(n=()=>xg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ql("RemoteStore","Retrying IndexedDB access"),await n(),e._u.delete(1),await ly(e)}))}function Iy(e,t){return t().catch((n=>Sy(e,n,t)))}async function ky(e){const t=tc(e),n=My(t);let r=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;_y(t);)try{const e=await Ng(t.localStore,r);if(null===e){0===t.fu.length&&n.Fo();break}r=e.batchId,Ty(t,e)}catch(e){await Sy(t,e)}Cy(t)&&xy(t)}function _y(e){return yy(e)&&e.fu.length<10}function Ty(e,t){e.fu.push(t);const n=My(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function Cy(e){return yy(e)&&!My(e).No()&&e.fu.length>0}function xy(e){My(e).start()}async function Dy(e){My(e).eu()}async function Ny(e){const t=My(e);for(const n of e.fu)t.Xo(n.mutations)}async function Ay(e,t,n){const r=e.fu.shift(),i=zp.from(r,t,n);await Iy(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ky(e)}async function Oy(e,t){t&&My(e).Yo&&await async function(e,t){if(cf(n=t.code)&&n!==nc.ABORTED){const n=e.fu.shift();My(e).Mo(),await Iy(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ky(e)}var n}(e,t),Cy(e)&&xy(e)}async function Py(e,t){const n=tc(e);n.asyncQueue.verifyOperationInProgress(),Ql("RemoteStore","RemoteStore received new credentials");const r=yy(n);n._u.add(3),await cy(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n._u.delete(3),await ly(n)}async function Ly(e,t){const n=tc(e);t?(n._u.delete(2),await ly(n)):t||(n._u.add(2),await cy(n),n.gu.set("Unknown"))}function Ry(e){return e.pu||(e.pu=function(e,t,n){const r=tc(e);return r.su(),new iy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:wy.bind(null,e),Zr:by.bind(null,e),Wo:Ey.bind(null,e)}),e.wu.push((async t=>{t?(e.pu.Mo(),gy(e)?my(e):e.gu.set("Unknown")):(await e.pu.stop(),vy(e))}))),e.pu}function My(e){return e.Iu||(e.Iu=function(e,t,n){const r=tc(e);return r.su(),new sy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Dy.bind(null,e),Zr:Oy.bind(null,e),tu:Ny.bind(null,e),Zo:Ay.bind(null,e)}),e.wu.push((async t=>{t?(e.Iu.Mo(),await ky(e)):(await e.Iu.stop(),e.fu.length>0&&(Ql("RemoteStore",`Stopping write stream with ${e.fu.length} pending writes`),e.fu=[]))}))),e.Iu}class Fy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ic,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Fy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rc(nc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(e,t){if(Yl("AsyncQueue",`${t}: ${e}`),zc(e))return new rc(nc.UNAVAILABLE,`${t}: ${e}`);throw e}class jy{constructor(e){this.comparator=e?(t,n)=>e(t,n)||kc.comparator(t.key,n.key):(e,t)=>kc.comparator(e.key,t.key),this.keyedMap=gf(),this.sortedSet=new Zc(this.comparator)}static emptySet(e){return new jy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new jy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Uy{constructor(){this.Tu=new Zc(kc.comparator)}track(e){const t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Zl():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class By{constructor(e,t,n,r,i,s,o,a,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new By(e,t,jy.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class zy{constructor(){this.Au=void 0,this.listeners=[]}}class qy{constructor(){this.queries=new df((e=>Sd(e)),Ed),this.onlineState="Unknown",this.Ru=new Set}}async function $y(e,t){const n=tc(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new zy),i)try{s.Au=await n.onListen(r)}catch(e){const n=Vy(e,`Initialization of query '${Id(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.bu(n.onlineState),s.Au&&t.Pu(s.Au)&&Wy(n)}async function Ky(e,t){const n=tc(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Gy(e,t){const n=tc(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.Pu(e)&&(r=!0);i.Au=e}}r&&Wy(n)}function Hy(e,t,n){const r=tc(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function Wy(e){e.Ru.forEach((e=>{e.next()}))}class Qy{constructor(e,t,n){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new By(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}xu(e){e=By.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Yy{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Xy{constructor(e){this.It=e}Ji(e){return Kf(this.It,e)}Yi(e){return e.metadata.exists?Xf(this.It,e.document,!1):zh.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Bf(e)}}class Jy{constructor(e,t,n){this.Mu=e,this.localStore=t,this.It=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zy(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const n=Ec.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,n=new Xy(this.It);for(const r of e)if(r.metadata.queries){const e=n.Ji(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||If()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=tc(e);let s=If(),o=pf();for(const e of n){const n=t.Ji(e.metadata.name);e.document&&(s=s.add(n));const r=t.Yi(e);r.setReadTime(t.Xi(e.metadata.readTime)),o=o.insert(n,r)}const a=i.Gi.newChangeBuffer({trackRemovals:!0}),u=await Ag(i,function(e){return wd(fd(Ec.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Dg(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Cs.removeMatchingKeysForTargetId(e,u.targetId).next((()=>i.Cs.addMatchingKeys(e,s,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi))).next((()=>t.Wi))))))}(this.localStore,new Xy(this.It),this.documents,this.Mu.id),t=this.$u(this.documents);for(const e of this.queries)await Fg(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function Zy(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ev{constructor(e){this.key=e}}class tv{constructor(e){this.key=e}}class nv{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=If(),this.mutatedKeys=If(),this.Gu=Td(e),this.Qu=new jy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const n=t?t.zu:new Uy,r=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),c=kd(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Hu(l,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Gu(c,a)>0||u&&this.Gu(c,u)<0)&&(o=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(a||u)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Qu:s,zu:n,$i:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zl()}};return n(e)-n(t)}(e.type,t.type)||this.Gu(e.doc,t.doc))),this.Ju(n);const s=t?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.qu;return this.qu=o,0!==i.length||a?{snapshot:new By(this.query,e.Qu,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:s}:{Xu:s}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Uy,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach((e=>this.Uu=this.Uu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Uu=this.Uu.delete(e))),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=If(),this.Qu.forEach((e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))}));const t=[];return e.forEach((e=>{this.Ku.has(e)||t.push(new tv(e))})),this.Ku.forEach((n=>{e.has(n)||t.push(new ev(n))})),t}tc(e){this.Uu=e.Hi,this.Ku=If();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return By.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class rv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class iv{constructor(e){this.key=e,this.nc=!1}}class sv{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.sc={},this.ic=new df((e=>Sd(e)),Ed),this.rc=new Map,this.oc=new Set,this.uc=new Zc(kc.comparator),this.cc=new Map,this.ac=new ag,this.hc={},this.lc=new Map,this.fc=Fm.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function ov(e,t){const n=Ov(e);let r,i;const s=n.ic.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const e=await Ag(n.localStore,wd(t));n.isPrimaryClient&&hy(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await av(n,t,r,"current"===s,e.resumeToken)}return i}async function av(e,t,n,r,i){e._c=(t,n,r)=>async function(e,t,n,r){let i=t.view.Wu(n);i.$i&&(i=await Pg(e.localStore,t.query,!1).then((({documents:e})=>t.view.Wu(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return vv(e,t.targetId,o.Xu),o.snapshot}(e,t,n,r);const s=await Pg(e.localStore,t,!0),o=new nv(t,s.Hi),a=o.Wu(s.documents),u=Cf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,u);vv(e,n,l.Xu);const c=new rv(t,n,o);return e.ic.set(t,c),e.rc.has(n)?e.rc.get(n).push(t):e.rc.set(n,[t]),l.snapshot}async function uv(e,t){const n=tc(e),r=n.ic.get(t),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter((e=>!Ed(e,t)))),void n.ic.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Og(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),dy(n.remoteStore,r.targetId),gv(n,r.targetId)})).catch(Mc)):(gv(n,r.targetId),await Og(n.localStore,r.targetId,!0))}async function lv(e,t){const n=tc(e);try{const e=await function(e,t){const n=tc(e),r=t.snapshotVersion;let i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;const o=[];t.targetChanges.forEach(((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.Cs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Cs.addMatchingKeys(e,s.addedDocuments,a))));let l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?l=l.withResumeToken(oh.EMPTY_BYTE_STRING,wc.min()).withLastLimboFreeSnapshotVersion(wc.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,l,s)&&o.push(n.Cs.updateTargetData(e,l))}));let a=pf(),u=If();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Dg(e,s,t.documentUpdates).next((e=>{a=e.Wi,u=e.zi}))),!r.isEqual(wc.min())){const t=n.Cs.getLastRemoteSnapshotVersion(e).next((t=>n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Fc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,u))).next((()=>a))})).then((e=>(n.Ui=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.cc.get(t);r&&(ec(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.nc=!0:e.modifiedDocuments.size>0?ec(r.nc):e.removedDocuments.size>0&&(ec(r.nc),r.nc=!1))})),await Ev(n,e,t)}catch(e){await Mc(e)}}function cv(e,t,n){const r=tc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ic.forEach(((n,r)=>{const i=r.view.bu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=tc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.bu(t)&&(r=!0)})),r&&Wy(n)}(r.eventManager,t),e.length&&r.sc.Wo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function hv(e,t,n){const r=tc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.cc.get(t),s=i&&i.key;if(s){let e=new Zc(kc.comparator);e=e.insert(s,zh.newNoDocument(s,wc.min()));const n=If().add(s),i=new Tf(wc.min(),new Map,new nh(mc),e,n);await lv(r,i),r.uc=r.uc.remove(s),r.cc.delete(t),bv(r)}else await Og(r.localStore,t,!1).then((()=>gv(r,t,n))).catch(Mc)}async function dv(e,t){const n=tc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=tc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Fc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ec(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=If();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);mv(n,r,null),pv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ev(n,e)}catch(e){await Mc(e)}}async function fv(e,t,n){const r=tc(e);try{const e=await function(e,t){const n=tc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ec(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);mv(r,t,n),pv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ev(r,e)}catch(n){await Mc(n)}}function pv(e,t){(e.lc.get(t)||[]).forEach((e=>{e.resolve()})),e.lc.delete(t)}function mv(e,t,n){const r=tc(e);let i=r.hc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function gv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.rc.get(t))e.ic.delete(r),n&&e.sc.wc(r,n);e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((t=>{e.ac.containsKey(t)||yv(e,t)}))}function yv(e,t){e.oc.delete(t.path.canonicalString());const n=e.uc.get(t);null!==n&&(dy(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),bv(e))}function vv(e,t,n){for(const r of n)r instanceof ev?(e.ac.addReference(r.key,t),wv(e,r)):r instanceof tv?(Ql("SyncEngine","Document no longer in limbo: "+r.key),e.ac.removeReference(r.key,t),e.ac.containsKey(r.key)||yv(e,r.key)):Zl()}function wv(e,t){const n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Ql("SyncEngine","New document in limbo: "+n),e.oc.add(r),bv(e))}function bv(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){const t=e.oc.values().next().value;e.oc.delete(t);const n=new kc(Ec.fromString(t)),r=e.fc.next();e.cc.set(r,new iv(n)),e.uc=e.uc.insert(n,r),hy(e.remoteStore,new $p(wd(fd(n.path)),r,2,Qc.at))}}async function Ev(e,t,n){const r=tc(e),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach(((e,a)=>{o.push(r._c(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Ig.Ci(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.sc.Wo(i),await async function(e,t){const n=tc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Fc.forEach(t,(t=>Fc.forEach(t.Si,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Fc.forEach(t.Di,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zc(e))throw e;Ql("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ui.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ui=n.Ui.insert(t,i)}}}(r.localStore,s))}async function Sv(e,t){const n=tc(e);if(!n.currentUser.isEqual(t)){Ql("SyncEngine","User change. New user:",t.toKey());const e=await Cg(n.localStore,t);n.currentUser=t,function(e,t){e.lc.forEach((e=>{e.forEach((e=>{e.reject(new rc(nc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ev(n,e.ji)}}function Iv(e,t){const n=tc(e),r=n.cc.get(t);if(r&&r.nc)return If().add(r.key);{let e=If();const r=n.rc.get(t);if(!r)return e;for(const t of r){const r=n.ic.get(t);e=e.unionWith(r.view.ju)}return e}}async function kv(e,t){const n=tc(e),r=await Pg(n.localStore,t.query,!0),i=t.view.tc(r);return n.isPrimaryClient&&vv(n,t.targetId,i.Xu),i}async function _v(e,t){const n=tc(e);return Rg(n.localStore,t).then((e=>Ev(n,e)))}async function Tv(e,t,n,r){const i=tc(e),s=await function(e,t){const n=tc(e),r=tc(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Tn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Fc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await ky(i.remoteStore):"acknowledged"===n||"rejected"===n?(mv(i,t,r||null),pv(i,t),function(e,t){tc(tc(e).mutationQueue).An(t)}(i.localStore,t)):Zl(),await Ev(i,s)):Ql("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Cv(e,t,n){const r=tc(e),i=[],s=[];for(const e of t){let t;const n=r.rc.get(e);if(n&&0!==n.length){t=await Ag(r.localStore,wd(n[0]));for(const e of n){const t=r.ic.get(e),n=await kv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await Lg(r.localStore,e);t=await Ag(r.localStore,n),await av(r,xv(n),e,!1,t.resumeToken)}i.push(t)}return r.sc.Wo(s),i}function xv(e){return dd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Dv(e){const t=tc(e);return tc(tc(t.localStore).persistence).vi()}async function Nv(e,t,n,r){const i=tc(e);if(i.dc)return void Ql("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Rg(i.localStore,_d(s[0])),r=Tf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,oh.EMPTY_BYTE_STRING);await Ev(i,e,r);break}case"rejected":await Og(i.localStore,t,!0),gv(i,t,r);break;default:Zl()}}async function Av(e,t,n){const r=Ov(e);if(r.dc){for(const e of t){if(r.rc.has(e)){Ql("SyncEngine","Adding an already active target "+e);continue}const t=await Lg(r.localStore,e),n=await Ag(r.localStore,t);await av(r,xv(t),n.targetId,!1,n.resumeToken),hy(r.remoteStore,n)}for(const e of n)r.rc.has(e)&&await Og(r.localStore,e,!1).then((()=>{dy(r.remoteStore,e),gv(r,e)})).catch(Mc)}}function Ov(e){const t=tc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Iv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hv.bind(null,t),t.sc.Wo=Gy.bind(null,t.eventManager),t.sc.wc=Hy.bind(null,t.eventManager),t}function Pv(e){const t=tc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fv.bind(null,t),t}class Lv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=ty(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Tg(this.persistence,new kg,e.initialUser,this.It)}yc(e){return new fg(mg.Bs,this.It)}gc(e){return new Hg}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Rv extends Lv{constructor(e,t,n){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ac.initialize(this,e),await Pv(this.Ac.syncEngine),await ky(this.Ac.remoteStore),await this.persistence.li((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}Ic(e){return Tg(this.persistence,new kg,e.initialUser,this.It)}Tc(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new $m(n,e.asyncQueue,t)}Ec(e,t){const n=new Wc(t,this.persistence);return new Hc(e.asyncQueue,n)}yc(e){const t=Sg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Dm.withCacheSize(this.cacheSizeBytes):Dm.DEFAULT;return new wg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Zg(),ey(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Hg}}class Mv extends Rv{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ac.syncEngine;this.sharedClientState instanceof Gg&&(this.sharedClientState.syncEngine={Fr:Tv.bind(null,t),$r:Nv.bind(null,t),Br:Av.bind(null,t),vi:Dv.bind(null,t),Mr:_v.bind(null,t)},await this.sharedClientState.start()),await this.persistence.li((async e=>{await async function(e,t){const n=tc(e);if(Ov(n),Pv(n),!0===t&&!0!==n.dc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Cv(n,e.toArray());n.dc=!0,await Ly(n.remoteStore,!0);for(const e of t)hy(n.remoteStore,e)}else if(!1===t&&!1!==n.dc){const e=[];let t=Promise.resolve();n.rc.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(gv(n,i),Og(n.localStore,i,!0)))),dy(n.remoteStore,i)})),await t,await Cv(n,e),function(e){const t=tc(e);t.cc.forEach(((e,n)=>{dy(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new Zc(kc.comparator)}(n),n.dc=!1,await Ly(n.remoteStore,!1)}}(this.Ac.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}gc(e){const t=Zg();if(!Gg.C(t))throw new rc(nc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Sg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Fv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>cv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sv.bind(null,this.syncEngine),await Ly(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new qy}createDatastore(e){const t=ty(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Jg(r));var r;return function(e,t,n,r){return new oy(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>cv(this.syncEngine,e,0),s=Qg.C()?new Qg:new Wg,new uy(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new sv(e,t,n,r,i,s);return o&&(a.dc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=tc(e);Ql("RemoteStore","RemoteStore shutting down."),t._u.add(5),await cy(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}function Vv(e,t,n){if(!n)throw new rc(nc.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function jv(e,t,n,r){if(!0===t&&!0===r)throw new rc(nc.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Uv(e){if(!kc.isDocumentKey(e))throw new rc(nc.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Bv(e){if(kc.isDocumentKey(e))throw new rc(nc.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function zv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Zl()}function qv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new rc(nc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zv(e);throw new rc(nc.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function $v(e,t){if(t<=0)throw new rc(nc.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const Kv=new Map;class Gv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new rc(nc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rc(nc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rc(nc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rc(nc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new oc;switch(e.type){case"gapi":const t=e.client;return new cc(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new rc(nc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kv.get(e);t&&(Ql("ComponentProvider","Removing Datastore"),Kv.delete(e),t.terminate())}(this),Promise.resolve()}}class Wv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wv(this.firestore,e,this._key)}}class Qv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qv(this.firestore,e,this._query)}}class Yv extends Qv{constructor(e,t,n){super(e,t,fd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wv(this.firestore,null,new kc(e))}withConverter(e){return new Yv(this.firestore,e,this._path)}}function Xv(e,t,...n){if(e=Qn(e),Vv("collection","path",t),e instanceof Hv){const r=Ec.fromString(t,...n);return Bv(r),new Yv(e,null,r)}{if(!(e instanceof Wv||e instanceof Yv))throw new rc(nc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ec.fromString(t,...n));return Bv(r),new Yv(e.firestore,null,r)}}function Jv(e,t,...n){if(e=Qn(e),1===arguments.length&&(t=pc.R()),Vv("doc","path",t),e instanceof Hv){const r=Ec.fromString(t,...n);return Uv(r),new Wv(e,null,new kc(r))}{if(!(e instanceof Wv||e instanceof Yv))throw new rc(nc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ec.fromString(t,...n));return Uv(r),new Wv(e.firestore,e instanceof Yv?e.converter:null,new kc(r))}}function Zv(e,t){return e=Qn(e),t=Qn(t),(e instanceof Wv||e instanceof Yv)&&(t instanceof Wv||t instanceof Yv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ew(e,t){return e=Qn(e),t=Qn(t),e instanceof Qv&&t instanceof Qv&&e.firestore===t.firestore&&Ed(e._query,t._query)&&e.converter===t.converter}function tw(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class nw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Yl("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class rw{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ic,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((e=>{e&&e.Ou()?this.metadata.resolve(e.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.ku)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Pc.cancel()}async getMetadata(){return this.metadata.promise}async mc(){return await this.getMetadata(),this.Vc()}async Vc(){const e=await this.Sc();if(null===e)return null;const t=this.vc.decode(e),n=Number(t);isNaN(n)&&this.Dc(`length string (${t}) is not valid number`);const r=await this.Cc(n);return new Yy(JSON.parse(r),e.length+n)}xc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Sc(){for(;this.xc()<0&&!await this.Nc(););if(0===this.buffer.length)return null;const e=this.xc();e<0&&this.Dc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Cc(e){for(;this.buffer.length<e;)await this.Nc()&&this.Dc("Reached the end of bundle when more is expected.");const t=this.vc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Nc(){const e=await this.Pc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class iw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new rc(nc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=tc(e),r=Wf(n.It)+"/documents",i={documents:t.map((e=>$f(n.It,e)))},s=await n._o("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){ec(!!t.found),t.found.name,t.found.updateTime;const n=Kf(e,t.found.name),r=Bf(t.found.updateTime),i=new Uh({mapValue:{fields:t.found.fields}});return zh.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){ec(!!t.missing),ec(!!t.readTime);const n=Kf(e,t.missing),r=Bf(t.readTime);return zh.newNoDocument(n,r)}(e,t):Zl()}(n.It,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());ec(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new sf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=kc.fromPath(t);this.mutations.push(new of(n,this.precondition(n)))})),await async function(e,t){const n=tc(e),r=Wf(n.It)+"/documents",i={writes:t.map((e=>Jf(n.It,e)))};await n.ao("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zl();t=wc.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new rc(nc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wc.min())?Kd.exists(!1):Kd.updateTime(t):Kd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wc.min()))throw new rc(nc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kd.updateTime(t)}return Kd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sw{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.kc=n.maxAttempts,this.xo=new ny(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){this.xo.Ro((async()=>{const e=new iw(this.datastore),t=this.Mc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Fc(e)}))))})).catch((e=>{this.Fc(e)}))}))}Mc(e){try{const t=this.updateFunction(e);return!gh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Oc(),Promise.resolve())))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!cf(t)}return!1}}class ow{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Kl.UNAUTHENTICATED,this.clientId=pc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ql("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ql("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rc(nc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ic;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vy(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function aw(e,t){e.asyncQueue.verifyOperationInProgress(),Ql("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Cg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function uw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await lw(e);Ql("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Py(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Py(t.remoteStore,n))),e.onlineComponents=t}async function lw(e){return e.offlineComponents||(Ql("FirestoreClient","Using default OfflineComponentProvider"),await aw(e,new Lv)),e.offlineComponents}async function cw(e){return e.onlineComponents||(Ql("FirestoreClient","Using default OnlineComponentProvider"),await uw(e,new Fv)),e.onlineComponents}function hw(e){return lw(e).then((e=>e.persistence))}function dw(e){return lw(e).then((e=>e.localStore))}function fw(e){return cw(e).then((e=>e.remoteStore))}function pw(e){return cw(e).then((e=>e.syncEngine))}async function mw(e){const t=await cw(e),n=t.eventManager;return n.onListen=ov.bind(null,t.syncEngine),n.onUnlisten=uv.bind(null,t.syncEngine),n}function gw(e,t,n={}){const r=new ic;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new nw({next:s=>{t.enqueueAndForget((()=>Ky(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new rc(nc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new rc(nc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Qy(fd(n.path),s,{includeMetadataChanges:!0,Nu:!0});return $y(e,o)}(await mw(e),e.asyncQueue,t,n,r))),r.promise}function yw(e,t,n={}){const r=new ic;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new nw({next:n=>{t.enqueueAndForget((()=>Ky(e,o))),n.fromCache&&"server"===r.source?i.reject(new rc(nc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Qy(n,s,{includeMetadataChanges:!0,Nu:!0});return $y(e,o)}(await mw(e),e.asyncQueue,t,n,r))),r.promise}class vw{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ny(this,"async_queue_retry"),this.Wc=()=>{const e=ey();e&&Ql("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const e=ey();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ey();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise((()=>{}));const t=new ic;return this.Hc((()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Lc.push(e),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!zc(e))throw e;Ql("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(e){const t=this.Bc.then((()=>(this.Gc=!0,e().catch((e=>{this.Kc=e,this.Gc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Gc=!1,e))))));return this.Bc=t,t}enqueueAfterDelay(e,t,n){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=Fy.createAndSchedule(this,e,t,n,(e=>this.Yc(e)));return this.qc.push(r),r}zc(){this.Kc&&Zl()}verifyOperationInProgress(){}async Xc(){let e;do{e=this.Bc,await e}while(e!==this.Bc)}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then((()=>{this.qc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()}))}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function ww(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class bw{constructor(){this._progressObserver={},this._taskCompletionResolver=new ic,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ew extends Hv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new vw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Iw(this),this._firestoreClient.terminate()}}function Sw(e){return e._firestoreClient||Iw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Iw(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new ph(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ow(e._authCredentials,e._appCheckCredentials,e._queue,r)}function kw(e,t,n){const r=new ic;return e.asyncQueue.enqueue((async()=>{try{await aw(e,n),await uw(e,t),r.resolve()}catch(e){const t=e;if(!function(e){return"FirebaseError"===e.name?e.code===nc.FAILED_PRECONDITION||e.code===nc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(t))throw t;Xl("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.reject(t)}})).then((()=>r.promise))}function _w(e){if(e._initialized||e._terminated)throw new rc(nc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tw(oh.fromBase64String(e))}catch(e){throw new rc(nc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Tw(oh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cw{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new rc(nc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ic(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xw{constructor(e){this._methodName=e}}class Dw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new rc(nc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new rc(nc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mc(this._lat,e._lat)||mc(this._long,e._long)}}const Nw=/^__.*__$/;class Aw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ef(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zd(e,this.data,t,this.fieldTransforms)}}class Ow{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ef(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Pw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zl()}}class Lw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.It=n,this.ignoreUndefinedProperties=r,void 0===i&&this.na(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Lw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}ca(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return eb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Pw(this.sa)&&Nw.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Rw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=n||ty(e)}da(e,t,n,r=!1){return new Lw({sa:e,methodName:t,fa:n,path:Ic.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mw(e){const t=e._freezeSettings(),n=ty(e._databaseId);return new Rw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fw(e,t,n,r,i,s={}){const o=e.da(s.merge||s.mergeFields?2:0,t,n,i);Yw("Data must be an object, but it was:",o,r);const a=Ww(r,o);let u,l;if(s.merge)u=new sh(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Xw(t,r,n);if(!o.contains(i))throw new rc(nc.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);tb(e,i)||e.push(i)}u=new sh(e),l=o.fieldTransforms.filter((e=>u.covers(e.field)))}else u=null,l=o.fieldTransforms;return new Aw(new Uh(a),u,l)}class Vw extends xw{_toFieldTransform(e){if(2!==e.sa)throw 1===e.sa?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vw}}function jw(e,t,n){return new Lw({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}class Uw extends xw{_toFieldTransform(e){return new qd(e.path,new Rd)}isEqual(e){return e instanceof Uw}}class Bw extends xw{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=jw(this,e,!0),n=this._a.map((e=>Hw(e,t))),r=new Md(n);return new qd(e.path,r)}isEqual(e){return this===e}}class zw extends xw{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=jw(this,e,!0),n=this._a.map((e=>Hw(e,t))),r=new Vd(n);return new qd(e.path,r)}isEqual(e){return this===e}}class qw extends xw{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ud(e.It,Nd(e.It,this.wa));return new qd(e.path,t)}isEqual(e){return this===e}}function $w(e,t,n,r){const i=e.da(1,t,n);Yw("Data must be an object, but it was:",i,r);const s=[],o=Uh.empty();Xc(r,((e,r)=>{const a=Zw(t,e,n);r=Qn(r);const u=i.ca(a);if(r instanceof Vw)s.push(a);else{const e=Hw(r,u);null!=e&&(s.push(a),o.set(a,e))}}));const a=new sh(s);return new Ow(o,a,i.fieldTransforms)}function Kw(e,t,n,r,i,s){const o=e.da(1,t,n),a=[Xw(t,r,n)],u=[i];if(s.length%2!=0)throw new rc(nc.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(Xw(t,s[e])),u.push(s[e+1]);const l=[],c=Uh.empty();for(let e=a.length-1;e>=0;--e)if(!tb(l,a[e])){const t=a[e];let n=u[e];n=Qn(n);const r=o.ca(t);if(n instanceof Vw)l.push(t);else{const e=Hw(n,r);null!=e&&(l.push(t),c.set(t,e))}}const h=new sh(l);return new Ow(c,h,o.fieldTransforms)}function Gw(e,t,n,r=!1){return Hw(n,e.da(r?4:3,t))}function Hw(e,t){if(Qw(e=Qn(e)))return Yw("Unsupported field value:",t,e),Ww(e,t);if(e instanceof xw)return function(e,t){if(!Pw(t.sa))throw t.ha(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Hw(i,t.aa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Qn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nd(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=vc.fromDate(e);return{timestampValue:Vf(t.It,n)}}if(e instanceof vc){const n=new vc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vf(t.It,n)}}if(e instanceof Dw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Tw)return{bytesValue:jf(t.It,e._byteString)};if(e instanceof Wv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:zf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha(`Unsupported field value: ${zv(e)}`)}(e,t)}function Ww(e,t){const n={};return Jc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xc(e,((e,r)=>{const i=Hw(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Qw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof vc||e instanceof Dw||e instanceof Tw||e instanceof Wv||e instanceof xw)}function Yw(e,t,n){if(!Qw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=zv(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function Xw(e,t,n){if((t=Qn(t))instanceof Cw)return t._internalPath;if("string"==typeof t)return Zw(e,t);throw eb("Field path arguments must be of type string or ",e,!1,void 0,n)}const Jw=new RegExp("[~\\*/\\[\\]]");function Zw(e,t,n){if(t.search(Jw)>=0)throw eb(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Cw(...t.split("."))._internalPath}catch(r){throw eb(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function eb(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new rc(nc.INVALID_ARGUMENT,a+e+u)}function tb(e,t){return e.some((e=>e.isEqual(t)))}class nb{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ib("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rb extends nb{data(){return super.data()}}function ib(e,t){return"string"==typeof t?Zw(e,t):t instanceof Cw?t._internalPath:t._delegate._internalPath}function sb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new rc(nc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ob{}function ab(e,...t){for(const n of t)e=n._apply(e);return e}class ub extends ob{constructor(e,t,n){super(),this.ma=e,this.ga=t,this.ya=n,this.type="where"}_apply(e){const t=Mw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new rc(nc.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){mb(o,s);const t=[];for(const n of o)t.push(pb(r,e,n));a={arrayValue:{values:t}}}else a=pb(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||mb(o,s),a=Gw(n,"where",o,"in"===s||"not-in"===s);const u=Xh.create(i,s,a);return function(e,t){if(t.dt()){const n=gd(e);if(null!==n&&!n.isEqual(t.field))throw new rc(nc.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=md(e);null!==r&&gb(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new rc(nc.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rc(nc.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Qv(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new hd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class lb extends ob{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new rc(nc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new rc(nc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ad(t,n);return function(e,t){if(null===md(e)){const n=gd(e);null!==n&&gb(0,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new Qv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new hd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class cb extends ob{constructor(e,t,n){super(),this.type=e,this.Ia=t,this.Ta=n}_apply(e){return new Qv(e.firestore,e.converter,bd(e._query,this.Ia,this.Ta))}}class hb extends ob{constructor(e,t,n){super(),this.type=e,this.Ea=t,this.Aa=n}_apply(e){const t=fb(e,this.type,this.Ea,this.Aa);return new Qv(e.firestore,e.converter,function(e,t){return new hd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class db extends ob{constructor(e,t,n){super(),this.type=e,this.Ea=t,this.Aa=n}_apply(e){const t=fb(e,this.type,this.Ea,this.Aa);return new Qv(e.firestore,e.converter,function(e,t){return new hd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function fb(e,t,n,r){if(n[0]=Qn(n[0]),n[0]instanceof nb)return function(e,t,n,r,i){if(!r)throw new rc(nc.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of vd(e))if(n.field.isKeyField())s.push(xh(t,r.key));else{const e=r.data.field(n.field);if(hh(e))throw new rc(nc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new rc(nc.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new od(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Mw(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new rc(nc.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const u=i[s];if(o[s].field.isKeyField()){if("string"!=typeof u)throw new rc(nc.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof u}`);if(!yd(e)&&-1!==u.indexOf("/"))throw new rc(nc.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${u}' contains a slash.`);const n=e.path.child(Ec.fromString(u));if(!kc.isDocumentKey(n))throw new rc(nc.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new kc(n);a.push(xh(t,i))}else{const e=Gw(n,r,u);a.push(e)}}return new od(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function pb(e,t,n){if("string"==typeof(n=Qn(n))){if(""===n)throw new rc(nc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yd(t)&&-1!==n.indexOf("/"))throw new rc(nc.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ec.fromString(n));if(!kc.isDocumentKey(r))throw new rc(nc.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xh(e,new kc(r))}if(n instanceof Wv)return xh(e,n._key);throw new rc(nc.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zv(n)}.`)}function mb(e,t){if(!Array.isArray(e)||0===e.length)throw new rc(nc.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new rc(nc.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function gb(e,t,n){if(!n.isEqual(t))throw new rc(nc.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class yb{convertValue(e,t="none"){switch(Eh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ch(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zl()}}convertObject(e,t){const n={};return Xc(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Dw(lh(e.latitude),lh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fh(e));default:return null}}convertTimestamp(e){const t=uh(e);return new vc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ec.fromString(e);ec(hp(n));const r=new mh(n.get(1),n.get(3)),i=new kc(n.popFirst(5));return r.isEqual(t)||Yl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function vb(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class wb extends yb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wv(this.firestore,null,t)}}class bb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eb extends nb{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ib("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Sb extends Eb{data(e={}){return super.data(e)}}class Ib{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Sb(this._firestore,this._userDataWriter,n.key,n,new bb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new rc(nc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Sb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new bb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Sb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:kb(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zl()}}function _b(e,t){return e instanceof Eb&&t instanceof Eb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ib&&t instanceof Ib&&e._firestore===t._firestore&&ew(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Tb extends yb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wv(this.firestore,null,t)}}function Cb(e,t,n){e=qv(e,Wv);const r=qv(e.firestore,Ew),i=vb(e.converter,t,n);return Nb(r,[Fw(Mw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kd.none())])}function xb(e,t,n,...r){e=qv(e,Wv);const i=qv(e.firestore,Ew),s=Mw(i);let o;return o="string"==typeof(t=Qn(t))||t instanceof Cw?Kw(s,"updateDoc",e._key,t,n,r):$w(s,"updateDoc",e._key,t),Nb(i,[o.toMutation(e._key,Kd.exists(!0))])}function Db(e,...t){var n,r,i;e=Qn(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||ww(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(ww(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,l,c;if(e instanceof Wv)l=qv(e.firestore,Ew),c=fd(e._key.path),u={next:n=>{t[o]&&t[o](Ab(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=qv(e,Qv);l=qv(n.firestore,Ew),c=n._query;const r=new Tb(l);u={next:e=>{t[o]&&t[o](new Ib(l,r,n,e))},error:t[o+1],complete:t[o+2]},sb(e._query)}return function(e,t,n,r){const i=new nw(r),s=new Qy(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>$y(await mw(e),s))),()=>{i.bc(),e.asyncQueue.enqueueAndForget((async()=>Ky(await mw(e),s)))}}(Sw(l),c,a,u)}function Nb(e,t){return function(e,t){const n=new ic;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Pv(e);try{const e=await function(e,t){const n=tc(e),r=vc.now(),i=t.reduce(((e,t)=>e.add(t.key)),If());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=pf(),u=If();return n.Gi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(u=u.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Xd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new ef(e.key,t,Bh(t.value.mapValue),Kd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:yf(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.hc[e.currentUser.toKey()];r||(r=new Zc(mc)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ev(r,e.changes),await ky(r.remoteStore)}catch(e){const t=Vy(e,"Failed to persist write");n.reject(t)}}(await pw(e),t,n))),n.promise}(Sw(e),t)}function Ab(e,t,n){const r=n.docs.get(t._key),i=new Tb(e);return new Eb(e,i,t._key,r,new bb(n.hasPendingWrites,n.fromCache),t.converter)}const Ob={maxAttempts:5};class Pb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mw(e)}set(e,t,n){this._verifyNotCommitted();const r=Lb(e,this._firestore),i=vb(r.converter,t,n),s=Fw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Kd.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=Lb(e,this._firestore);let s;return s="string"==typeof(t=Qn(t))||t instanceof Cw?Kw(this._dataReader,"WriteBatch.update",i._key,t,n,r):$w(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Kd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lb(e,this._firestore);return this._mutations=this._mutations.concat(new sf(t._key,Kd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new rc(nc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lb(e,t){if((e=Qn(e)).firestore!==t)throw new rc(nc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Rb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mw(e)}get(e){const t=Lb(e,this._firestore),n=new wb(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Zl();const r=e[0];if(r.isFoundDocument())return new nb(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new nb(this._firestore,n,t._key,null,t.converter);throw Zl()}))}set(e,t,n){const r=Lb(e,this._firestore),i=vb(r.converter,t,n),s=Fw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=Lb(e,this._firestore);let s;return s="string"==typeof(t=Qn(t))||t instanceof Cw?Kw(this._dataReader,"Transaction.update",i._key,t,n,r):$w(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=Lb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lb(e,this._firestore),n=new Tb(this._firestore);return super.get(e).then((e=>new Eb(this._firestore,n,t._key,e._document,new bb(!1,!1),t.converter)))}}function Mb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new rc("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Fb(){if("undefined"==typeof Uint8Array)throw new rc("unimplemented","Uint8Arrays are not available in this environment.")}function Vb(){if("undefined"==typeof atob)throw new rc("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){Gl=e}(Br),Rr(new Yn("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Ew(new uc(e.getProvider("auth-internal")),new dc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new rc(nc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mh(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),Gr($l,"3.7.3",e),Gr($l,"3.7.3","esm2017")}();class jb{constructor(e){this._delegate=e}static fromBase64String(e){return Vb(),new jb(Tw.fromBase64String(e))}static fromUint8Array(e){return Fb(),new jb(Tw.fromUint8Array(e))}toBase64(){return Vb(),this._delegate.toBase64()}toUint8Array(){return Fb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ub(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class Bb{enableIndexedDbPersistence(e,t){return function(e,t){_w(e=qv(e,Ew));const n=Sw(e),r=e._freezeSettings(),i=new Fv;return kw(n,i,new Rv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){_w(e=qv(e,Ew));const t=Sw(e),n=e._freezeSettings(),r=new Fv;return kw(t,r,new Mv(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new rc(nc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ic;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!jc.C())return Promise.resolve();const t=e+"main";await jc.delete(t)}(Sg(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class zb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof mh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Xl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=qv(e,Hv))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Xl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Kl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[On(JSON.stringify({alg:"none",type:"JWT"})),On(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new rc(nc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Kl(s)}e._authCredentials=new ac(new sc(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await hw(e),n=await fw(e);return t.setNetworkEnabled(!0),function(e){const t=tc(e);return t._u.delete(0),ly(t)}(n)}))}(Sw(e=qv(e,Ew)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await hw(e),n=await fw(e);return t.setNetworkEnabled(!1),async function(e){const t=tc(e);t._u.add(0),await cy(t),t.gu.set("Offline")}(n)}))}(Sw(e=qv(e,Ew)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,jv("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new ic;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=tc(e);yy(n.remoteStore)||Ql("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=tc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.lc.get(e)||[];r.push(t),n.lc.set(e,r)}catch(e){const n=Vy(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await pw(e),t))),t.promise}(Sw(e=qv(e,Ew)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new nw(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){tc(e).Ru.add(t),t.next()}(await mw(e),n))),()=>{n.bc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){tc(e).Ru.delete(t)}(await mw(e),n)))}}(Sw(e=qv(e,Ew)),ww(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new rc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nE(this,Xv(this._delegate,e))}catch(e){throw Wb(e,"collection()","Firestore.collection()")}}doc(e){try{return new Hb(this,Jv(this._delegate,e))}catch(e){throw Wb(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zb(this,function(e,t){if(e=qv(e,Hv),Vv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new rc(nc.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qv(e,null,function(e){return new hd(Ec.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Wb(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=qv(e,Ew);const r=Object.assign(Object.assign({},Ob),void 0);return function(e){if(e.maxAttempts<1)throw new rc(nc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new ic;return e.asyncQueue.enqueueAndForget((async()=>{const i=await function(e){return cw(e).then((e=>e.datastore))}(e);new sw(e.asyncQueue,i,n,t,r).run()})),r.promise}(Sw(e),(n=>t(new Rb(e,n))),r)}(this._delegate,(t=>e(new $b(this,t))))}batch(){return Sw(this._delegate),new Kb(new Pb(this._delegate,(e=>Nb(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Sw(e=qv(e,Ew)),r=new bw;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new rw(e,t)}(function(e,t){if(e instanceof Uint8Array)return tw(e,t);if(e instanceof ArrayBuffer)return tw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,ty(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=tc(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=tc(e),r=Bf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ns.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Zy(r));const i=new Jy(r,e.localStore,t.It);let s=await t.mc();for(;s;){const e=await i.Fu(s);e&&n._updateProgress(e),s=await t.mc()}const o=await i.complete();return await Ev(e,o.Lu,void 0),await function(e,t){const n=tc(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ns.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Bu)}catch(e){return Xl("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await pw(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=tc(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ns.getNamedQuery(e,t)))}(await dw(e),t)))}(Sw(e=qv(e,Ew)),t).then((t=>t?new Qv(e,null,t.query):null))}(this._delegate,e).then((e=>e?new Zb(this,e):null))}}class qb extends yb{constructor(e){super(),this.firestore=e}convertBytes(e){return new jb(new Tw(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Hb.forKey(t,this.firestore,null)}}class $b{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qb(e)}get(e){const t=rE(e);return this._delegate.get(t).then((e=>new Xb(this._firestore,new Eb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=rE(e);return n?(Mb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=rE(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=rE(e);return this._delegate.delete(t),this}}class Kb{constructor(e){this._delegate=e}set(e,t,n){const r=rE(e);return n?(Mb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=rE(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=rE(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gb{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Sb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jb(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Gb.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Gb(e,new qb(e),t),r.set(t,i)),i}}Gb.INSTANCES=new WeakMap;class Hb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qb(e)}static forPath(e,t,n){if(e.length%2!=0)throw new rc("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hb(t,new Wv(t._delegate,n,new kc(e)))}static forKey(e,t,n){return new Hb(t,new Wv(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new nE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nE(this.firestore,Xv(this._delegate,e))}catch(e){throw Wb(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Qn(e))instanceof Wv&&Zv(this._delegate,e)}set(e,t){t=Mb("DocumentReference.set",t);try{return t?Cb(this._delegate,e,t):Cb(this._delegate,e)}catch(e){throw Wb(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?xb(this._delegate,e):xb(this._delegate,e,t,...n)}catch(e){throw Wb(e,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return Nb(qv(e.firestore,Ew),[new sf(e._key,Kd.none())])}(this._delegate)}onSnapshot(...e){const t=Qb(e),n=Yb(e,(e=>new Xb(this.firestore,new Eb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Db(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=qv(e,Wv);const t=qv(e.firestore,Ew),n=Sw(t),r=new Tb(t);return function(e,t){const n=new ic;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=tc(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new rc(nc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Vy(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await dw(e),t,n))),n.promise}(n,e._key).then((n=>new Eb(t,r,e._key,n,new bb(null!==n&&n.hasLocalMutations,!0),e.converter)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=qv(e,Wv);const t=qv(e.firestore,Ew);return gw(Sw(t),e._key,{source:"server"}).then((n=>Ab(t,e,n)))}(this._delegate):function(e){e=qv(e,Wv);const t=qv(e.firestore,Ew);return gw(Sw(t),e._key).then((n=>Ab(t,e,n)))}(this._delegate),t.then((e=>new Xb(this.firestore,new Eb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Hb(this.firestore,e?this._delegate.withConverter(Gb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Wb(e,t,n){return e.message=e.message.replace(t,n),e}function Qb(e){for(const t of e)if("object"==typeof t&&!Ub(t))return t;return{}}function Yb(e,t){var n,r;let i;return i=Ub(e[0])?e[0]:Ub(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Xb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Hb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _b(this._delegate,e._delegate)}}class Jb extends Xb{data(e){const t=this._delegate.data(e);return function(e,t){e||Zl()}(void 0!==t),t}}class Zb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qb(e)}where(e,t,n){try{return new Zb(this.firestore,ab(this._delegate,function(e,t,n){const r=t,i=ib("where",e);return new ub(i,r,n)}(e,t,n)))}catch(e){throw Wb(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zb(this.firestore,ab(this._delegate,function(e,t="asc"){const n=t,r=ib("orderBy",e);return new lb(r,n)}(e,t)))}catch(e){throw Wb(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zb(this.firestore,ab(this._delegate,function(e){return $v("limit",e),new cb("limit",e,"F")}(e)))}catch(e){throw Wb(e,"limit()","Query.limit()")}}limitToLast(e){try{return new Zb(this.firestore,ab(this._delegate,function(e){return $v("limitToLast",e),new cb("limitToLast",e,"L")}(e)))}catch(e){throw Wb(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zb(this.firestore,ab(this._delegate,function(...e){return new hb("startAt",e,!0)}(...e)))}catch(e){throw Wb(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zb(this.firestore,ab(this._delegate,function(...e){return new hb("startAfter",e,!1)}(...e)))}catch(e){throw Wb(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zb(this.firestore,ab(this._delegate,function(...e){return new db("endBefore",e,!1)}(...e)))}catch(e){throw Wb(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zb(this.firestore,ab(this._delegate,function(...e){return new db("endAt",e,!0)}(...e)))}catch(e){throw Wb(e,"endAt()","Query.endAt()")}}isEqual(e){return ew(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=qv(e,Qv);const t=qv(e.firestore,Ew),n=Sw(t),r=new Tb(t);return function(e,t){const n=new ic;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Pg(e,t,!0),i=new nv(t,r.Hi),s=i.Wu(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Vy(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await dw(e),t,n))),n.promise}(n,e._query).then((n=>new Ib(t,r,e,n)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=qv(e,Qv);const t=qv(e.firestore,Ew),n=Sw(t),r=new Tb(t);return yw(n,e._query,{source:"server"}).then((n=>new Ib(t,r,e,n)))}(this._delegate):function(e){e=qv(e,Qv);const t=qv(e.firestore,Ew),n=Sw(t),r=new Tb(t);return sb(e._query),yw(n,e._query).then((n=>new Ib(t,r,e,n)))}(this._delegate),t.then((e=>new tE(this.firestore,new Ib(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=Qb(e),n=Yb(e,(e=>new tE(this.firestore,new Ib(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Db(this._delegate,t,n)}withConverter(e){return new Zb(this.firestore,e?this._delegate.withConverter(Gb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class eE{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tE{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zb(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Jb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new eE(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Jb(this._firestore,n))}))}isEqual(e){return _b(this._delegate,e._delegate)}}class nE extends Zb{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hb(this.firestore,e):null}doc(e){try{return new Hb(this.firestore,void 0===e?Jv(this._delegate):Jv(this._delegate,e))}catch(e){throw Wb(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=qv(e.firestore,Ew),r=Jv(e),i=vb(e.converter,t);return Nb(n,[Fw(Mw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Kd.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Hb(this.firestore,e)))}isEqual(e){return Zv(this._delegate,e._delegate)}withConverter(e){return new nE(this.firestore,e?this._delegate.withConverter(Gb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function rE(e){return qv(e,Wv)}class iE{constructor(...e){this._delegate=new Cw(...e)}static documentId(){return new iE(Ic.keyField().canonicalString())}isEqual(e){return(e=Qn(e))instanceof Cw&&this._delegate._internalPath.isEqual(e._internalPath)}}class sE{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Uw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new sE(e)}static delete(){const e=new Vw("deleteField");return e._methodName="FieldValue.delete",new sE(e)}static arrayUnion(...e){const t=function(...e){return new Bw("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new sE(t)}static arrayRemove(...e){const t=function(...e){return new zw("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new sE(t)}static increment(e){const t=function(e){return new qw("increment",e)}(e);return t._methodName="FieldValue.increment",new sE(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oE={Firestore:zb,GeoPoint:Dw,Timestamp:vc,Blob:jb,Transaction:$b,WriteBatch:Kb,DocumentReference:Hb,DocumentSnapshot:Xb,Query:Zb,QueryDocumentSnapshot:Jb,QuerySnapshot:tE,CollectionReference:nE,FieldPath:iE,FieldValue:sE,setLogLevel:function(e){!function(e){Hl.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var aE;(function(e,t){e.INTERNAL.registerComponent(new Yn("firestore-compat",(e=>((e,t)=>new zb(e,t,new Bb))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())),"PUBLIC").setServiceProps(Object.assign({},oE)))})(aE=vs),aE.registerVersion("@firebase/firestore-compat","0.2.3"),vs.initializeApp({apiKey:"AIzaSyCH-8vJ9BYwgBLGXXWrx5mO3Qff1kWTzpI",authDomain:"kvasir-5bc41.firebaseapp.com",projectId:"kvasir-5bc41",storageBucket:"kvasir-5bc41.appspot.com",messagingSenderId:"339657070876",appId:"1:339657070876:web:502a78e6334519df55c2d9",measurementId:"G-45EM8TKG1J"}).firestore();var uE=function(){return uE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},uE.apply(this,arguments)},lE=function(e){return{loading:null==e,value:e}},cE=function(e,t){var n=!e&&!t,r=!!e&&!!t&&ew(e,t);return n||r},hE=function(e,t){return function(e,t,r){var i=(0,n.useRef)(e);return(0,n.useEffect)((function(){t(e,i.current)||(i.current=e,r&&r())})),i}(e,cE,t)},dE=function(e,t){var r=function(e,t){var r=function(e){var t=e?e():void 0,r=(0,n.useReducer)((function(e,t){switch(t.type){case"error":return uE(uE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return lE(t.defaultValue);case"value":return uE(uE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),lE(t)),i=r[0],s=r[1],o=(0,n.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,n.useCallback)((function(e){s({type:"error",error:e})}),[]),u=(0,n.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,n.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:u,value:i.value}}),[i.error,i.loading,o,a,u,i.value])}(),i=r.error,s=r.loading,o=r.reset,a=r.setError,u=r.setValue,l=r.value,c=hE(e,o);return(0,n.useEffect)((function(){if(c.current){var e=(null==t?void 0:t.snapshotListenOptions)?Db(c.current,t.snapshotListenOptions,u,a):Db(c.current,u,a);return function(){e()}}u(void 0)}),[c.current]),[l,s,i]}(e,t),i=r[0],s=r[1],o=r[2];return[fE(i,null==t?void 0:t.snapshotOptions,null==t?void 0:t.initialValue),s,o,i]},fE=function(e,t,r){return(0,n.useMemo)((function(){var n;return null!==(n=null==e?void 0:e.docs.map((function(e){return e.data(t)})))&&void 0!==n?n:r}),[e,t])};function pE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const gE=function(e){var t=e.img,r=e.name,i=pE((0,n.useState)(!1),2),s=i[0],o=i[1],a=firestore.collection("messages").orderBy("createdAt").limit(25),u=pE(dE(a,{idField:"id"}),1)[0];return s?n.createElement("div",{className:"chatbox"},n.createElement("div",{className:"chatbox-chat"},n.createElement("div",{className:"chatbox-header"},n.createElement("a",null,r),n.createElement("a",{className:"chat-btn",onClick:function(){return o(!1)}},"-"),n.createElement("a",{className:"chat-btn",onClick:function(){return console.log("REMOVE FROM CHAT")}},"X")),n.createElement("div",{className:"messages"},u&&u.map((function(e){return n.createElement(ChatMessage,{key:e.id,message:e})}))),n.createElement("div",{className:"input-div"},n.createElement("input",{placeholder:"Type here",value:formValue,onChange:function(e){return setFormValue(e.target.value)}})))):n.createElement("div",{className:"chatbox-mini",onClick:function(){return o(!0)}},n.createElement("img",{className:"chat-img",src:t}),n.createElement("a",{className:"chat-btn-mini",onClick:function(){return console.log("REMOVE FROM CHAT")}},"X"))};function yE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const vE=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(!1),2);return e[0],e[1],n.createElement("div",{id:"chat-bar"},n.createElement(gE,{img:"https://media-exp1.licdn.com/dms/image/D4E03AQF3Vc4LC38e6g/profile-displayphoto-shrink_800_800/0/1669821402564?e=1675900800&v=beta&t=C0IU8x638VYRfUxG0_vSbBoO4IU1s1uSxRwH0wtO51w",name:"Cassidy"}),n.createElement(gE,{img:"https://media-exp1.licdn.com/dms/image/D4E03AQH2Qn7l9oEW7Q/profile-displayphoto-shrink_800_800/0/1669423518618?e=1675900800&v=beta&t=_jn6ZDTiFlh7SbSzuk19EFBjm7nT1uguz3tE7rNiIXU",name:"Kelly"}))};function wE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const bE=function(){var e=gn((function(e){return e.feedCurrent})),t=[];(0,n.useEffect)((function(){}),[t]);var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(e),2),i=r[0],s=(r[1],gn((function(e){return e.loggedIn}))),o=kn();return n.createElement("div",null,s?n.createElement("div",null,n.createElement(Dn,{options:["Friends","Pending","Requests"],current:i,handleChange:function(e){o(Xt(e)),getFriends(e)}}),n.createElement("div",{id:"card-container"},t),n.createElement(vE,null)):n.createElement("div",null,"YOU NEED TO LOG IN OK"))};function EE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return SE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var IE=["bye","happy","sad"],kE="hi";const _E=function(){var e=gn((function(e){return e.userInfo.canLearn})),t=gn((function(e){return e.userInfo.canTeach})),r=gn((function(e){return e.userInfo.interests})),i=gn((function(e){return e.userInfo.displayName})),s=EE((0,n.useState)(""),2),o=s[0],a=s[1],u=EE((0,n.useState)(!1),2),l=u[0],c=u[1];console.log(e,t);var h=function(e){var t=Array.from(e.target.classList)[0];document.getElementById("".concat(t,"_").concat(e.target.id)).remove()},d=function(e){console.log(e)},f=function(e,t,r){return console.log(e,t,r),n.createElement("div",{id:"".concat(e,"_").concat(t),className:"pb",key:"".concat(e[0],"_").concat(r)},n.createElement("button",{className:"profile-button"},t),n.createElement("a",{id:"".concat(t),className:"".concat(e," remove-link edit hidden"),onClick:h},"x"))},p=e.map((function(e,t){return f("learn",e,t)})),m=t.map((function(e,t){return f("teach",e,t)})),g=r.map((function(e,t){return f("interests",e,t)}));return(0,n.useEffect)((function(){var e=Array.from(document.querySelectorAll(".edit"));l?e.forEach((function(e){return e.classList.remove("hidden")})):e.forEach((function(e){return e.classList.add("hidden")}))}),[l]),n.createElement("div",{id:"profile-page"},n.createElement("button",{onClick:function(e){return c(!l)},className:"edit-button"},"Edit"),n.createElement("section",{className:"profile-section"},n.createElement("p",{className:"profile-title"},"I am teaching:"),n.createElement("div",{className:"profile-selections"},m),n.createElement("div",{className:"edit hidden"},n.createElement(Dn,{handleChange:d,options:IE,current:kE}))),n.createElement("section",{className:"profile-section"},n.createElement("p",{className:"profile-title"},"I am learning:"),n.createElement("div",{className:"profile-selections"},p),n.createElement("div",{className:"edit hidden"},n.createElement(Dn,{handleChange:d,options:IE,current:kE}))),n.createElement("section",{className:"profile-section"},n.createElement("p",{className:"profile-title"},"My interests are:"),n.createElement("div",{className:"profile-selections"},g),n.createElement("div",{className:"edit hidden"},n.createElement(Dn,{handleChange:d,options:IE,current:kE}))),n.createElement("section",{className:"profile-section"},n.createElement("p",{className:"profile-title"},"Basic Info:"),n.createElement("div",{className:"profile-selections"},n.createElement("p",null,"Display Name: ",i)),n.createElement("div",{className:"edit hidden"},n.createElement("label",{htmlFor:"displayName"},"Change Display Name:"),n.createElement("input",{name:"displayName",type:"text",value:o,onChange:function(e){return a(e.target.value)}}),n.createElement("button",{type:"submit",onClick:function(e){return console.log(o)}},"Submit")),n.createElement("div",{className:"edit hidden"},n.createElement("label",null,"Change Your Password:"),n.createElement("label",{htmlFor:"password"},"Current Password:"),n.createElement("input",{name:"password",type:"text"}),n.createElement("label",{htmlFor:"newPassword"},"New Password:"),n.createElement("input",{name:"newPassword",type:"text"}),n.createElement("label",{htmlFor:"confirm"},"Confirm New Password:"),n.createElement("input",{name:"confirm",type:"text"}),n.createElement("button",{className:"edit hidden"},"Submit"))))};function TE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const CE=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return TE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(!0),2),t=e[0],r=e[1],i=kn();(0,n.useEffect)((function(){}),[]);var s=X();return n.createElement("div",null,t?n.createElement("div",null,n.createElement("input",{placeholder:"email"}),n.createElement("input",{placeholder:"password"}),n.createElement("button",{onClick:function(){i(Jt()),s("/")}},"Submit"),n.createElement("a",{onClick:function(){return r(!1)}},"Don't have an account?")):n.createElement("div",null,n.createElement("input",{placeholder:"email"}),n.createElement("input",{placeholder:"password"}),n.createElement("input",{placeholder:"confirm password"}),n.createElement("button",{onClick:function(){i(Jt()),s("/profile")}},"Submit"),n.createElement("a",{onClick:function(){return r(!0)}},"Already have an account?")))},xE=function(e){var t=e.name,r=e.imgUrl,i=e.willTeach,s=e.willLearn;return i.forEach((function(e){e=n.createElement("li",{className:"cardLang"},e)})),s.forEach((function(e){e=n.createElement("li",{className:"cardLang"},e)})),n.createElement("div",{className:"card"},n.createElement("p",{className:"cardName"},t),n.createElement("img",{className:"cardImage",src:r,alt:"".concat(t,"'s profile photo")}),n.createElement("div",{className:"cardLangs"},n.createElement("p",{className:"cardListHeading"},"Teaching: "),n.createElement("ul",{className:"cardLanguageList"},i)),n.createElement("div",{className:"cardLangs"},n.createElement("p",{className:"cardListHeading"},"Learning: "),n.createElement("ul",{className:"cardLanguageList"},s)))};function DE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const NE=function(){var e=kn(),t=gn((function(e){return e.userInfo.canLearn})),r=gn((function(e){return e.userInfo.canTeach})),i=gn((function(e){return e.exploreCurrent.willLearn?e.exploreCurrent.willLearn:"Select"})),s=gn((function(e){return e.exploreCurrent.willTeach?e.exploreCurrent.willTeach:"Select"})),o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return DE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)([]),2),a=o[0],u=o[1];return(0,n.useEffect)((function(){u([n.createElement(xE,{name:"Kate",imgUrl:"https://media-exp1.licdn.com/dms/image/D5603AQHSp4HQWIqk3Q/profile-displayphoto-shrink_800_800/0/1669852886544?e=1675900800&v=beta&t=gXRgilH66Ve0RurZ3SqpIrneAV-3PkONwtK85WWfzko",willTeach:["Russian"],willLearn:["Cantonese","Norwegian"]}),n.createElement(xE,{name:"Kelly",imgUrl:"https://media-exp1.licdn.com/dms/image/D4E03AQH2Qn7l9oEW7Q/profile-displayphoto-shrink_800_800/0/1669423518618?e=1675900800&v=beta&t=_jn6ZDTiFlh7SbSzuk19EFBjm7nT1uguz3tE7rNiIXU",willTeach:["Japanese"],willLearn:["Korean","German"]}),n.createElement(xE,{name:"Emily",imgUrl:"https://media-exp1.licdn.com/dms/image/C4E03AQGoCiZlHk4INg/profile-displayphoto-shrink_800_800/0/1586788791685?e=1675900800&v=beta&t=pfrHp3Ilczx7Qn4EgNAX4qiTB58PmgpSqTDQjmuq2x4",willTeach:["German"],willLearn:["Cantonese","English"]}),n.createElement(xE,{name:"Cassidy",imgUrl:"https://media-exp1.licdn.com/dms/image/D4E03AQF3Vc4LC38e6g/profile-displayphoto-shrink_800_800/0/1669821402564?e=1675900800&v=beta&t=C0IU8x638VYRfUxG0_vSbBoO4IU1s1uSxRwH0wtO51w",willTeach:["Arabic"],willLearn:["English","Spanish"]})])}),[]),n.createElement("div",{id:"explore-page"},n.createElement("aside",{id:"explore-aside"},n.createElement("div",{className:"filter"},n.createElement("label",{className:"filter-heading"},"I want to learn: "),n.createElement(Dn,{options:t,current:i,handleChange:function(t){e(Zt({willTeach:s,willLearn:t})),console.log("changed learn to "+t)}})),n.createElement("div",{className:"filter"},n.createElement("label",{className:"filter-heading"},"I want to teach: "),n.createElement(Dn,{options:r,current:s,handleChange:function(t){e(Zt({willTeach:t,willLearn:i})),console.log("changed teach to "+t)}}))),n.createElement("div",{className:"card-holder"},a))},AE=function(){return n.createElement("div",null,n.createElement(Cn,{loggedIn:!1}),n.createElement(ae,null,n.createElement(se,{path:"/login",element:n.createElement(CE,null)}),n.createElement(se,{path:"/explore",element:n.createElement(NE,null)}),n.createElement(se,{path:"/profile",element:n.createElement(_E,null)}),n.createElement(se,{path:"/",element:n.createElement(bE,null)})))};var OE=function(e){var t,n=function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new zt);return n&&(function(e){return"boolean"==typeof e}(n)?r.push(xt):r.push(xt.withExtraArgument(n.extraArgument))),r}(e)},r=e||{},i=r.reducer,s=void 0===i?void 0:i,o=r.middleware,a=void 0===o?n():o,u=r.devTools,l=void 0===u||u,c=r.preloadedState,h=void 0===c?void 0:c,d=r.enhancers,f=void 0===d?void 0:d;if("function"==typeof s)t=s;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var s,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Et.INIT}))throw new Error(vt(12));if(void 0===n(void 0,{type:Et.PROBE_UNKNOWN_ACTION()}))throw new Error(vt(13))}))}(n)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},a=0;a<o.length;a++){var u=o[a],l=n[u],c=e[u],h=l(c,t);if(void 0===h)throw t&&t.type,new Error(vt(14));i[u]=h,r=r||h!==c}return(r=r||o.length!==Object.keys(e).length)?i:e}}(s)}var p=a;"function"==typeof p&&(p=p(n));var m=_t.apply(void 0,p),g=kt;l&&(g=Bt(jt({trace:!1},"object"==typeof l&&l)));var y=[m];return Array.isArray(f)?y=At([m],f):"function"==typeof f&&(y=f(y)),It(t,h,g.apply(void 0,y))}({reducer:sn,middleware:function(e){return e().concat(xt)}});s.createRoot(document.getElementById("root")).render(n.createElement(bn,{store:OE},n.createElement(de,null,n.createElement(AE,null))))})()})();